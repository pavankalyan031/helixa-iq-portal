function sN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function aN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xy={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io=Symbol.for("react.element"),iN=Symbol.for("react.portal"),oN=Symbol.for("react.fragment"),lN=Symbol.for("react.strict_mode"),cN=Symbol.for("react.profiler"),uN=Symbol.for("react.provider"),dN=Symbol.for("react.context"),mN=Symbol.for("react.forward_ref"),hN=Symbol.for("react.suspense"),fN=Symbol.for("react.memo"),pN=Symbol.for("react.lazy"),sg=Symbol.iterator;function gN(t){return t===null||typeof t!="object"?null:(t=sg&&t[sg]||t["@@iterator"],typeof t=="function"?t:null)}var Zy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ev=Object.assign,tv={};function Sa(t,e,n){this.props=t,this.context=e,this.refs=tv,this.updater=n||Zy}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nv(){}nv.prototype=Sa.prototype;function Xm(t,e,n){this.props=t,this.context=e,this.refs=tv,this.updater=n||Zy}var Zm=Xm.prototype=new nv;Zm.constructor=Xm;ev(Zm,Sa.prototype);Zm.isPureReactComponent=!0;var ag=Array.isArray,rv=Object.prototype.hasOwnProperty,eh={current:null},sv={key:!0,ref:!0,__self:!0,__source:!0};function av(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)rv.call(e,r)&&!sv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:io,type:t,key:i,ref:o,props:s,_owner:eh.current}}function yN(t,e){return{$$typeof:io,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function th(t){return typeof t=="object"&&t!==null&&t.$$typeof===io}function vN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ig=/\/+/g;function Uu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vN(""+t.key):e.toString(36)}function ml(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case io:case iN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Uu(o,0):r,ag(s)?(n="",t!=null&&(n=t.replace(ig,"$&/")+"/"),ml(s,e,n,"",function(d){return d})):s!=null&&(th(s)&&(s=yN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ig,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ag(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Uu(i,c);o+=ml(i,e,n,u,s)}else if(u=gN(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Uu(i,c++),o+=ml(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zo(t,e,n){if(t==null)return t;var r=[],s=0;return ml(t,r,"","",function(i){return e.call(n,i,s++)}),r}function EN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},hl={transition:null},bN={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:hl,ReactCurrentOwner:eh};function iv(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:zo,forEach:function(t,e,n){zo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zo(t,function(){e++}),e},toArray:function(t){return zo(t,function(e){return e})||[]},only:function(t){if(!th(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Sa;oe.Fragment=oN;oe.Profiler=cN;oe.PureComponent=Xm;oe.StrictMode=lN;oe.Suspense=hN;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bN;oe.act=iv;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ev({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=eh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)rv.call(e,u)&&!sv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:io,type:t.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:dN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uN,_context:t},t.Consumer=t};oe.createElement=av;oe.createFactory=function(t){var e=av.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:mN,render:t}};oe.isValidElement=th;oe.lazy=function(t){return{$$typeof:pN,_payload:{_status:-1,_result:t},_init:EN}};oe.memo=function(t,e){return{$$typeof:fN,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=hl.transition;hl.transition={};try{t()}finally{hl.transition=e}};oe.unstable_act=iv;oe.useCallback=function(t,e){return At.current.useCallback(t,e)};oe.useContext=function(t){return At.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return At.current.useDeferredValue(t)};oe.useEffect=function(t,e){return At.current.useEffect(t,e)};oe.useId=function(){return At.current.useId()};oe.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return At.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};oe.useRef=function(t){return At.current.useRef(t)};oe.useState=function(t){return At.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return At.current.useTransition()};oe.version="18.3.1";Xy.exports=oe;var V=Xy.exports;const a=aN(V),wN=sN({__proto__:null,default:a},[V]);var ov={exports:{}},en={},lv={exports:{}},cv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,P){var B=C.length;C.push(P);e:for(;0<B;){var J=B-1>>>1,Y=C[J];if(0<s(Y,P))C[J]=P,C[B]=Y,B=J;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var P=C[0],B=C.pop();if(B!==P){C[0]=B;e:for(var J=0,Y=C.length,we=Y>>>1;J<we;){var ct=2*(J+1)-1,ut=C[ct],$t=ct+1,Ue=C[$t];if(0>s(ut,B))$t<Y&&0>s(Ue,ut)?(C[J]=Ue,C[$t]=B,J=$t):(C[J]=ut,C[ct]=B,J=ct);else if($t<Y&&0>s(Ue,B))C[J]=Ue,C[$t]=B,J=$t;else break e}}return P}function s(C,P){var B=C.sortIndex-P.sortIndex;return B!==0?B:C.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,g=null,p=3,b=!1,k=!1,A=!1,D=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(C){for(var P=n(d);P!==null;){if(P.callback===null)r(d);else if(P.startTime<=C)r(d),P.sortIndex=P.expirationTime,e(u,P);else break;P=n(d)}}function L(C){if(A=!1,T(C),!k)if(n(u)!==null)k=!0,H(U);else{var P=n(d);P!==null&&ve(L,P.startTime-C)}}function U(C,P){k=!1,A&&(A=!1,I(y),y=-1),b=!0;var B=p;try{for(T(P),g=n(u);g!==null&&(!(g.expirationTime>P)||C&&!v());){var J=g.callback;if(typeof J=="function"){g.callback=null,p=g.priorityLevel;var Y=J(g.expirationTime<=P);P=t.unstable_now(),typeof Y=="function"?g.callback=Y:g===n(u)&&r(u),T(P)}else r(u);g=n(u)}if(g!==null)var we=!0;else{var ct=n(d);ct!==null&&ve(L,ct.startTime-P),we=!1}return we}finally{g=null,p=B,b=!1}}var O=!1,_=null,y=-1,E=5,N=-1;function v(){return!(t.unstable_now()-N<E)}function R(){if(_!==null){var C=t.unstable_now();N=C;var P=!0;try{P=_(!0,C)}finally{P?S():(O=!1,_=null)}}else O=!1}var S;if(typeof w=="function")S=function(){w(R)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ee=ae.port2;ae.port1.onmessage=R,S=function(){ee.postMessage(null)}}else S=function(){D(R,0)};function H(C){_=C,O||(O=!0,S())}function ve(C,P){y=D(function(){C(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,H(U))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(C){switch(p){case 1:case 2:case 3:var P=3;break;default:P=p}var B=p;p=P;try{return C()}finally{p=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,P){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var B=p;p=C;try{return P()}finally{p=B}},t.unstable_scheduleCallback=function(C,P,B){var J=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?J+B:J):B=J,C){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=B+Y,C={id:h++,callback:P,priorityLevel:C,startTime:B,expirationTime:Y,sortIndex:-1},B>J?(C.sortIndex=B,e(d,C),n(u)===null&&C===n(d)&&(A?(I(y),y=-1):A=!0,ve(L,B-J))):(C.sortIndex=Y,e(u,C),k||b||(k=!0,H(U))),C},t.unstable_shouldYield=v,t.unstable_wrapCallback=function(C){var P=p;return function(){var B=p;p=P;try{return C.apply(this,arguments)}finally{p=B}}}})(cv);lv.exports=cv;var xN=lv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N=V,Zt=xN;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uv=new Set,Pi={};function Ts(t,e){ua(t,e),ua(t+"Capture",e)}function ua(t,e){for(Pi[t]=e,t=0;t<e.length;t++)uv.add(e[t])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kd=Object.prototype.hasOwnProperty,NN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,og={},lg={};function SN(t){return kd.call(lg,t)?!0:kd.call(og,t)?!1:NN.test(t)?lg[t]=!0:(og[t]=!0,!1)}function IN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TN(t,e,n,r){if(e===null||typeof e>"u"||IN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var nh=/[\-:]([a-z])/g;function rh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nh,rh);ot[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nh,rh);ot[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nh,rh);ot[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function sh(t,e,n,r){var s=ot.hasOwnProperty(e)?ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TN(e,n,s,r)&&(n=null),r||s===null?SN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sr=_N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),zs=Symbol.for("react.fragment"),ah=Symbol.for("react.strict_mode"),Ad=Symbol.for("react.profiler"),dv=Symbol.for("react.provider"),mv=Symbol.for("react.context"),ih=Symbol.for("react.forward_ref"),Cd=Symbol.for("react.suspense"),Pd=Symbol.for("react.suspense_list"),oh=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),hv=Symbol.for("react.offscreen"),cg=Symbol.iterator;function Ya(t){return t===null||typeof t!="object"?null:(t=cg&&t[cg]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,ju;function ai(t){if(ju===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ju=e&&e[1]||""}return`
`+ju+t}var Bu=!1;function zu(t,e){if(!t||Bu)return"";Bu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Bu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ai(t):""}function kN(t){switch(t.tag){case 5:return ai(t.type);case 16:return ai("Lazy");case 13:return ai("Suspense");case 19:return ai("SuspenseList");case 0:case 2:case 15:return t=zu(t.type,!1),t;case 11:return t=zu(t.type.render,!1),t;case 1:return t=zu(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zs:return"Fragment";case Bs:return"Portal";case Ad:return"Profiler";case ah:return"StrictMode";case Cd:return"Suspense";case Pd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mv:return(t.displayName||"Context")+".Consumer";case dv:return(t._context.displayName||"Context")+".Provider";case ih:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oh:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case hr:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function AN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===ah?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CN(t){var e=fv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qo(t){t._valueTracker||(t._valueTracker=CN(t))}function pv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Dl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dd(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ug(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gv(t,e){e=e.checked,e!=null&&sh(t,"checked",e,!1)}function Ld(t,e){gv(t,e);var n=Fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Od(t,e.type,n):e.hasOwnProperty("defaultValue")&&Od(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Od(t,e,n){(e!=="number"||Dl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ii=Array.isArray;function ea(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Md(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(ii(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function yv(t,e){var n=Fr(e.value),r=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wo,Ev=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wo=Wo||document.createElement("div"),Wo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ri(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PN=["Webkit","ms","Moz","O"];Object.keys(pi).forEach(function(t){PN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pi[e]=pi[t]})});function bv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pi.hasOwnProperty(t)&&pi[t]?(""+e).trim():e+"px"}function wv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var RN=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fd(t,e){if(e){if(RN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Ud(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jd=null;function lh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bd=null,ta=null,na=null;function fg(t){if(t=co(t)){if(typeof Bd!="function")throw Error($(280));var e=t.stateNode;e&&(e=Ac(e),Bd(t.stateNode,t.type,e))}}function xv(t){ta?na?na.push(t):na=[t]:ta=t}function _v(){if(ta){var t=ta,e=na;if(na=ta=null,fg(t),e)for(t=0;t<e.length;t++)fg(e[t])}}function Nv(t,e){return t(e)}function Sv(){}var $u=!1;function Iv(t,e,n){if($u)return t(e,n);$u=!0;try{return Nv(t,e,n)}finally{$u=!1,(ta!==null||na!==null)&&(Sv(),_v())}}function Di(t,e){var n=t.stateNode;if(n===null)return null;var r=Ac(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var zd=!1;if(Yn)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){zd=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{zd=!1}function DN(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var gi=!1,Ll=null,Ol=!1,$d=null,LN={onError:function(t){gi=!0,Ll=t}};function ON(t,e,n,r,s,i,o,c,u){gi=!1,Ll=null,DN.apply(LN,arguments)}function MN(t,e,n,r,s,i,o,c,u){if(ON.apply(this,arguments),gi){if(gi){var d=Ll;gi=!1,Ll=null}else throw Error($(198));Ol||(Ol=!0,$d=d)}}function ks(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pg(t){if(ks(t)!==t)throw Error($(188))}function VN(t){var e=t.alternate;if(!e){if(e=ks(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return pg(s),t;if(i===r)return pg(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function kv(t){return t=VN(t),t!==null?Av(t):null}function Av(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Av(t);if(e!==null)return e;t=t.sibling}return null}var Cv=Zt.unstable_scheduleCallback,gg=Zt.unstable_cancelCallback,FN=Zt.unstable_shouldYield,UN=Zt.unstable_requestPaint,Be=Zt.unstable_now,jN=Zt.unstable_getCurrentPriorityLevel,ch=Zt.unstable_ImmediatePriority,Pv=Zt.unstable_UserBlockingPriority,Ml=Zt.unstable_NormalPriority,BN=Zt.unstable_LowPriority,Rv=Zt.unstable_IdlePriority,Sc=null,kn=null;function zN(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Sc,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:WN,$N=Math.log,qN=Math.LN2;function WN(t){return t>>>=0,t===0?32:31-($N(t)/qN|0)|0}var Ho=64,Go=4194304;function oi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=oi(c):(i&=o,i!==0&&(r=oi(i)))}else o=n&~s,o!==0?r=oi(o):i!==0&&(r=oi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),s=1<<n,r|=t[n],e&=~s;return r}function HN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=HN(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function qd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dv(){var t=Ho;return Ho<<=1,!(Ho&4194240)&&(Ho=64),t}function qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function KN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function uh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function Lv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ov,dh,Mv,Vv,Fv,Wd=!1,Ko=[],Ir=null,Tr=null,kr=null,Li=new Map,Oi=new Map,pr=[],YN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yg(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Li.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(e.pointerId)}}function Ja(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=co(e),e!==null&&dh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function QN(t,e,n,r,s){switch(e){case"focusin":return Ir=Ja(Ir,t,e,n,r,s),!0;case"dragenter":return Tr=Ja(Tr,t,e,n,r,s),!0;case"mouseover":return kr=Ja(kr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Li.set(i,Ja(Li.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Oi.set(i,Ja(Oi.get(i)||null,t,e,n,r,s)),!0}return!1}function Uv(t){var e=ss(t.target);if(e!==null){var n=ks(e);if(n!==null){if(e=n.tag,e===13){if(e=Tv(n),e!==null){t.blockedOn=e,Fv(t.priority,function(){Mv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jd=r,n.target.dispatchEvent(r),jd=null}else return e=co(n),e!==null&&dh(e),t.blockedOn=n,!1;e.shift()}return!0}function vg(t,e,n){fl(t)&&n.delete(e)}function JN(){Wd=!1,Ir!==null&&fl(Ir)&&(Ir=null),Tr!==null&&fl(Tr)&&(Tr=null),kr!==null&&fl(kr)&&(kr=null),Li.forEach(vg),Oi.forEach(vg)}function Xa(t,e){t.blockedOn===e&&(t.blockedOn=null,Wd||(Wd=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,JN)))}function Mi(t){function e(s){return Xa(s,t)}if(0<Ko.length){Xa(Ko[0],t);for(var n=1;n<Ko.length;n++){var r=Ko[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ir!==null&&Xa(Ir,t),Tr!==null&&Xa(Tr,t),kr!==null&&Xa(kr,t),Li.forEach(e),Oi.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)Uv(n),n.blockedOn===null&&pr.shift()}var ra=sr.ReactCurrentBatchConfig,Fl=!0;function XN(t,e,n,r){var s=ge,i=ra.transition;ra.transition=null;try{ge=1,mh(t,e,n,r)}finally{ge=s,ra.transition=i}}function ZN(t,e,n,r){var s=ge,i=ra.transition;ra.transition=null;try{ge=4,mh(t,e,n,r)}finally{ge=s,ra.transition=i}}function mh(t,e,n,r){if(Fl){var s=Hd(t,e,n,r);if(s===null)ed(t,e,r,Ul,n),yg(t,r);else if(QN(s,t,e,n,r))r.stopPropagation();else if(yg(t,r),e&4&&-1<YN.indexOf(t)){for(;s!==null;){var i=co(s);if(i!==null&&Ov(i),i=Hd(t,e,n,r),i===null&&ed(t,e,r,Ul,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ed(t,e,r,null,n)}}var Ul=null;function Hd(t,e,n,r){if(Ul=null,t=lh(r),t=ss(t),t!==null)if(e=ks(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Tv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ul=t,null}function jv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jN()){case ch:return 1;case Pv:return 4;case Ml:case BN:return 16;case Rv:return 536870912;default:return 16}default:return 16}}var xr=null,hh=null,pl=null;function Bv(){if(pl)return pl;var t,e=hh,n=e.length,r,s="value"in xr?xr.value:xr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return pl=s.slice(t,1<r?1-r:void 0)}function gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yo(){return!0}function Eg(){return!1}function tn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yo:Eg,this.isPropagationStopped=Eg,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yo)},persist:function(){},isPersistent:Yo}),e}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fh=tn(Ia),lo=Re({},Ia,{view:0,detail:0}),eS=tn(lo),Wu,Hu,Za,Ic=Re({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ph,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Za&&(Za&&t.type==="mousemove"?(Wu=t.screenX-Za.screenX,Hu=t.screenY-Za.screenY):Hu=Wu=0,Za=t),Wu)},movementY:function(t){return"movementY"in t?t.movementY:Hu}}),bg=tn(Ic),tS=Re({},Ic,{dataTransfer:0}),nS=tn(tS),rS=Re({},lo,{relatedTarget:0}),Gu=tn(rS),sS=Re({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),aS=tn(sS),iS=Re({},Ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oS=tn(iS),lS=Re({},Ia,{data:0}),wg=tn(lS),cS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dS[t])?!!e[t]:!1}function ph(){return mS}var hS=Re({},lo,{key:function(t){if(t.key){var e=cS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ph,charCode:function(t){return t.type==="keypress"?gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fS=tn(hS),pS=Re({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xg=tn(pS),gS=Re({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ph}),yS=tn(gS),vS=Re({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),ES=tn(vS),bS=Re({},Ic,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wS=tn(bS),xS=[9,13,27,32],gh=Yn&&"CompositionEvent"in window,yi=null;Yn&&"documentMode"in document&&(yi=document.documentMode);var _S=Yn&&"TextEvent"in window&&!yi,zv=Yn&&(!gh||yi&&8<yi&&11>=yi),_g=" ",Ng=!1;function $v(t,e){switch(t){case"keyup":return xS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $s=!1;function NS(t,e){switch(t){case"compositionend":return qv(e);case"keypress":return e.which!==32?null:(Ng=!0,_g);case"textInput":return t=e.data,t===_g&&Ng?null:t;default:return null}}function SS(t,e){if($s)return t==="compositionend"||!gh&&$v(t,e)?(t=Bv(),pl=hh=xr=null,$s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zv&&e.locale!=="ko"?null:e.data;default:return null}}var IS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!IS[t.type]:e==="textarea"}function Wv(t,e,n,r){xv(r),e=jl(e,"onChange"),0<e.length&&(n=new fh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vi=null,Vi=null;function TS(t){nE(t,0)}function Tc(t){var e=Hs(t);if(pv(e))return t}function kS(t,e){if(t==="change")return e}var Hv=!1;if(Yn){var Ku;if(Yn){var Yu="oninput"in document;if(!Yu){var Ig=document.createElement("div");Ig.setAttribute("oninput","return;"),Yu=typeof Ig.oninput=="function"}Ku=Yu}else Ku=!1;Hv=Ku&&(!document.documentMode||9<document.documentMode)}function Tg(){vi&&(vi.detachEvent("onpropertychange",Gv),Vi=vi=null)}function Gv(t){if(t.propertyName==="value"&&Tc(Vi)){var e=[];Wv(e,Vi,t,lh(t)),Iv(TS,e)}}function AS(t,e,n){t==="focusin"?(Tg(),vi=e,Vi=n,vi.attachEvent("onpropertychange",Gv)):t==="focusout"&&Tg()}function CS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tc(Vi)}function PS(t,e){if(t==="click")return Tc(e)}function RS(t,e){if(t==="input"||t==="change")return Tc(e)}function DS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:DS;function Fi(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kd.call(e,s)||!En(t[s],e[s]))return!1}return!0}function kg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ag(t,e){var n=kg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kg(n)}}function Kv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yv(){for(var t=window,e=Dl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Dl(t.document)}return e}function yh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LS(t){var e=Yv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Kv(n.ownerDocument.documentElement,n)){if(r!==null&&yh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ag(n,i);var o=Ag(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OS=Yn&&"documentMode"in document&&11>=document.documentMode,qs=null,Gd=null,Ei=null,Kd=!1;function Cg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kd||qs==null||qs!==Dl(r)||(r=qs,"selectionStart"in r&&yh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ei&&Fi(Ei,r)||(Ei=r,r=jl(Gd,"onSelect"),0<r.length&&(e=new fh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qs)))}function Qo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ws={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionend:Qo("Transition","TransitionEnd")},Qu={},Qv={};Yn&&(Qv=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function kc(t){if(Qu[t])return Qu[t];if(!Ws[t])return t;var e=Ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qv)return Qu[t]=e[n];return t}var Jv=kc("animationend"),Xv=kc("animationiteration"),Zv=kc("animationstart"),eE=kc("transitionend"),tE=new Map,Pg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(t,e){tE.set(t,e),Ts(e,[t])}for(var Ju=0;Ju<Pg.length;Ju++){var Xu=Pg[Ju],MS=Xu.toLowerCase(),VS=Xu[0].toUpperCase()+Xu.slice(1);$r(MS,"on"+VS)}$r(Jv,"onAnimationEnd");$r(Xv,"onAnimationIteration");$r(Zv,"onAnimationStart");$r("dblclick","onDoubleClick");$r("focusin","onFocus");$r("focusout","onBlur");$r(eE,"onTransitionEnd");ua("onMouseEnter",["mouseout","mouseover"]);ua("onMouseLeave",["mouseout","mouseover"]);ua("onPointerEnter",["pointerout","pointerover"]);ua("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FS=new Set("cancel close invalid load scroll toggle".split(" ").concat(li));function Rg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MN(r,e,void 0,t),t.currentTarget=null}function nE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Rg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Rg(s,c,d),i=u}}}if(Ol)throw t=$d,Ol=!1,$d=null,t}function Ne(t,e){var n=e[Zd];n===void 0&&(n=e[Zd]=new Set);var r=t+"__bubble";n.has(r)||(rE(e,t,2,!1),n.add(r))}function Zu(t,e,n){var r=0;e&&(r|=4),rE(n,t,r,e)}var Jo="_reactListening"+Math.random().toString(36).slice(2);function Ui(t){if(!t[Jo]){t[Jo]=!0,uv.forEach(function(n){n!=="selectionchange"&&(FS.has(n)||Zu(n,!1,t),Zu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jo]||(e[Jo]=!0,Zu("selectionchange",!1,e))}}function rE(t,e,n,r){switch(jv(e)){case 1:var s=XN;break;case 4:s=ZN;break;default:s=mh}n=s.bind(null,e,n,t),s=void 0,!zd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ed(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=ss(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Iv(function(){var d=i,h=lh(n),g=[];e:{var p=tE.get(t);if(p!==void 0){var b=fh,k=t;switch(t){case"keypress":if(gl(n)===0)break e;case"keydown":case"keyup":b=fS;break;case"focusin":k="focus",b=Gu;break;case"focusout":k="blur",b=Gu;break;case"beforeblur":case"afterblur":b=Gu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=bg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=nS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=yS;break;case Jv:case Xv:case Zv:b=aS;break;case eE:b=ES;break;case"scroll":b=eS;break;case"wheel":b=wS;break;case"copy":case"cut":case"paste":b=oS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=xg}var A=(e&4)!==0,D=!A&&t==="scroll",I=A?p!==null?p+"Capture":null:p;A=[];for(var w=d,T;w!==null;){T=w;var L=T.stateNode;if(T.tag===5&&L!==null&&(T=L,I!==null&&(L=Di(w,I),L!=null&&A.push(ji(w,L,T)))),D)break;w=w.return}0<A.length&&(p=new b(p,k,null,n,h),g.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",p&&n!==jd&&(k=n.relatedTarget||n.fromElement)&&(ss(k)||k[Qn]))break e;if((b||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,b?(k=n.relatedTarget||n.toElement,b=d,k=k?ss(k):null,k!==null&&(D=ks(k),k!==D||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=d),b!==k)){if(A=bg,L="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(A=xg,L="onPointerLeave",I="onPointerEnter",w="pointer"),D=b==null?p:Hs(b),T=k==null?p:Hs(k),p=new A(L,w+"leave",b,n,h),p.target=D,p.relatedTarget=T,L=null,ss(h)===d&&(A=new A(I,w+"enter",k,n,h),A.target=T,A.relatedTarget=D,L=A),D=L,b&&k)t:{for(A=b,I=k,w=0,T=A;T;T=Vs(T))w++;for(T=0,L=I;L;L=Vs(L))T++;for(;0<w-T;)A=Vs(A),w--;for(;0<T-w;)I=Vs(I),T--;for(;w--;){if(A===I||I!==null&&A===I.alternate)break t;A=Vs(A),I=Vs(I)}A=null}else A=null;b!==null&&Dg(g,p,b,A,!1),k!==null&&D!==null&&Dg(g,D,k,A,!0)}}e:{if(p=d?Hs(d):window,b=p.nodeName&&p.nodeName.toLowerCase(),b==="select"||b==="input"&&p.type==="file")var U=kS;else if(Sg(p))if(Hv)U=RS;else{U=CS;var O=AS}else(b=p.nodeName)&&b.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(U=PS);if(U&&(U=U(t,d))){Wv(g,U,n,h);break e}O&&O(t,p,d),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Od(p,"number",p.value)}switch(O=d?Hs(d):window,t){case"focusin":(Sg(O)||O.contentEditable==="true")&&(qs=O,Gd=d,Ei=null);break;case"focusout":Ei=Gd=qs=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,Cg(g,n,h);break;case"selectionchange":if(OS)break;case"keydown":case"keyup":Cg(g,n,h)}var _;if(gh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $s?$v(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(zv&&n.locale!=="ko"&&($s||y!=="onCompositionStart"?y==="onCompositionEnd"&&$s&&(_=Bv()):(xr=h,hh="value"in xr?xr.value:xr.textContent,$s=!0)),O=jl(d,y),0<O.length&&(y=new wg(y,t,null,n,h),g.push({event:y,listeners:O}),_?y.data=_:(_=qv(n),_!==null&&(y.data=_)))),(_=_S?NS(t,n):SS(t,n))&&(d=jl(d,"onBeforeInput"),0<d.length&&(h=new wg("onBeforeInput","beforeinput",null,n,h),g.push({event:h,listeners:d}),h.data=_))}nE(g,e)})}function ji(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Di(t,n),i!=null&&r.unshift(ji(t,i,s)),i=Di(t,e),i!=null&&r.push(ji(t,i,s))),t=t.return}return r}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Di(n,i),u!=null&&o.unshift(ji(n,u,c))):s||(u=Di(n,i),u!=null&&o.push(ji(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var US=/\r\n?/g,jS=/\u0000|\uFFFD/g;function Lg(t){return(typeof t=="string"?t:""+t).replace(US,`
`).replace(jS,"")}function Xo(t,e,n){if(e=Lg(e),Lg(t)!==e&&n)throw Error($(425))}function Bl(){}var Yd=null,Qd=null;function Jd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xd=typeof setTimeout=="function"?setTimeout:void 0,BS=typeof clearTimeout=="function"?clearTimeout:void 0,Og=typeof Promise=="function"?Promise:void 0,zS=typeof queueMicrotask=="function"?queueMicrotask:typeof Og<"u"?function(t){return Og.resolve(null).then(t).catch($S)}:Xd;function $S(t){setTimeout(function(){throw t})}function td(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Mi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Mi(e)}function Ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Ta,Bi="__reactProps$"+Ta,Qn="__reactContainer$"+Ta,Zd="__reactEvents$"+Ta,qS="__reactListeners$"+Ta,WS="__reactHandles$"+Ta;function ss(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qn]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mg(t);t!==null;){if(n=t[Sn])return n;t=Mg(t)}return e}t=n,n=t.parentNode}return null}function co(t){return t=t[Sn]||t[Qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Ac(t){return t[Bi]||null}var em=[],Gs=-1;function qr(t){return{current:t}}function Ie(t){0>Gs||(t.current=em[Gs],em[Gs]=null,Gs--)}function xe(t,e){Gs++,em[Gs]=t.current,t.current=e}var Ur={},xt=qr(Ur),Mt=qr(!1),fs=Ur;function da(t,e){var n=t.type.contextTypes;if(!n)return Ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vt(t){return t=t.childContextTypes,t!=null}function zl(){Ie(Mt),Ie(xt)}function Vg(t,e,n){if(xt.current!==Ur)throw Error($(168));xe(xt,e),xe(Mt,n)}function sE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,AN(t)||"Unknown",s));return Re({},n,r)}function $l(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ur,fs=xt.current,xe(xt,t),xe(Mt,Mt.current),!0}function Fg(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=sE(t,e,fs),r.__reactInternalMemoizedMergedChildContext=t,Ie(Mt),Ie(xt),xe(xt,t)):Ie(Mt),xe(Mt,n)}var jn=null,Cc=!1,nd=!1;function aE(t){jn===null?jn=[t]:jn.push(t)}function HS(t){Cc=!0,aE(t)}function Wr(){if(!nd&&jn!==null){nd=!0;var t=0,e=ge;try{var n=jn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,Cc=!1}catch(s){throw jn!==null&&(jn=jn.slice(t+1)),Cv(ch,Wr),s}finally{ge=e,nd=!1}}return null}var Ks=[],Ys=0,ql=null,Wl=0,nn=[],rn=0,ps=null,Bn=1,zn="";function es(t,e){Ks[Ys++]=Wl,Ks[Ys++]=ql,ql=t,Wl=e}function iE(t,e,n){nn[rn++]=Bn,nn[rn++]=zn,nn[rn++]=ps,ps=t;var r=Bn;t=zn;var s=32-yn(r)-1;r&=~(1<<s),n+=1;var i=32-yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bn=1<<32-yn(e)+s|n<<s|r,zn=i+t}else Bn=1<<i|n<<s|r,zn=t}function vh(t){t.return!==null&&(es(t,1),iE(t,1,0))}function Eh(t){for(;t===ql;)ql=Ks[--Ys],Ks[Ys]=null,Wl=Ks[--Ys],Ks[Ys]=null;for(;t===ps;)ps=nn[--rn],nn[rn]=null,zn=nn[--rn],nn[rn]=null,Bn=nn[--rn],nn[rn]=null}var Jt=null,Kt=null,ke=!1,gn=null;function oE(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ug(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Kt=Ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:Bn,overflow:zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Kt=null,!0):!1;default:return!1}}function tm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nm(t){if(ke){var e=Kt;if(e){var n=e;if(!Ug(t,e)){if(tm(t))throw Error($(418));e=Ar(n.nextSibling);var r=Jt;e&&Ug(t,e)?oE(r,n):(t.flags=t.flags&-4097|2,ke=!1,Jt=t)}}else{if(tm(t))throw Error($(418));t.flags=t.flags&-4097|2,ke=!1,Jt=t}}}function jg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function Zo(t){if(t!==Jt)return!1;if(!ke)return jg(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jd(t.type,t.memoizedProps)),e&&(e=Kt)){if(tm(t))throw lE(),Error($(418));for(;e;)oE(t,e),e=Ar(e.nextSibling)}if(jg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=Ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Jt?Ar(t.stateNode.nextSibling):null;return!0}function lE(){for(var t=Kt;t;)t=Ar(t.nextSibling)}function ma(){Kt=Jt=null,ke=!1}function bh(t){gn===null?gn=[t]:gn.push(t)}var GS=sr.ReactCurrentBatchConfig;function ei(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function el(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bg(t){var e=t._init;return e(t._payload)}function cE(t){function e(I,w){if(t){var T=I.deletions;T===null?(I.deletions=[w],I.flags|=16):T.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=Dr(I,w),I.index=0,I.sibling=null,I}function i(I,w,T){return I.index=T,t?(T=I.alternate,T!==null?(T=T.index,T<w?(I.flags|=2,w):T):(I.flags|=2,w)):(I.flags|=1048576,w)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function c(I,w,T,L){return w===null||w.tag!==6?(w=cd(T,I.mode,L),w.return=I,w):(w=s(w,T),w.return=I,w)}function u(I,w,T,L){var U=T.type;return U===zs?h(I,w,T.props.children,L,T.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===hr&&Bg(U)===w.type)?(L=s(w,T.props),L.ref=ei(I,w,T),L.return=I,L):(L=_l(T.type,T.key,T.props,null,I.mode,L),L.ref=ei(I,w,T),L.return=I,L)}function d(I,w,T,L){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=ud(T,I.mode,L),w.return=I,w):(w=s(w,T.children||[]),w.return=I,w)}function h(I,w,T,L,U){return w===null||w.tag!==7?(w=us(T,I.mode,L,U),w.return=I,w):(w=s(w,T),w.return=I,w)}function g(I,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=cd(""+w,I.mode,T),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $o:return T=_l(w.type,w.key,w.props,null,I.mode,T),T.ref=ei(I,null,w),T.return=I,T;case Bs:return w=ud(w,I.mode,T),w.return=I,w;case hr:var L=w._init;return g(I,L(w._payload),T)}if(ii(w)||Ya(w))return w=us(w,I.mode,T,null),w.return=I,w;el(I,w)}return null}function p(I,w,T,L){var U=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return U!==null?null:c(I,w,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $o:return T.key===U?u(I,w,T,L):null;case Bs:return T.key===U?d(I,w,T,L):null;case hr:return U=T._init,p(I,w,U(T._payload),L)}if(ii(T)||Ya(T))return U!==null?null:h(I,w,T,L,null);el(I,T)}return null}function b(I,w,T,L,U){if(typeof L=="string"&&L!==""||typeof L=="number")return I=I.get(T)||null,c(w,I,""+L,U);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case $o:return I=I.get(L.key===null?T:L.key)||null,u(w,I,L,U);case Bs:return I=I.get(L.key===null?T:L.key)||null,d(w,I,L,U);case hr:var O=L._init;return b(I,w,T,O(L._payload),U)}if(ii(L)||Ya(L))return I=I.get(T)||null,h(w,I,L,U,null);el(w,L)}return null}function k(I,w,T,L){for(var U=null,O=null,_=w,y=w=0,E=null;_!==null&&y<T.length;y++){_.index>y?(E=_,_=null):E=_.sibling;var N=p(I,_,T[y],L);if(N===null){_===null&&(_=E);break}t&&_&&N.alternate===null&&e(I,_),w=i(N,w,y),O===null?U=N:O.sibling=N,O=N,_=E}if(y===T.length)return n(I,_),ke&&es(I,y),U;if(_===null){for(;y<T.length;y++)_=g(I,T[y],L),_!==null&&(w=i(_,w,y),O===null?U=_:O.sibling=_,O=_);return ke&&es(I,y),U}for(_=r(I,_);y<T.length;y++)E=b(_,I,y,T[y],L),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?y:E.key),w=i(E,w,y),O===null?U=E:O.sibling=E,O=E);return t&&_.forEach(function(v){return e(I,v)}),ke&&es(I,y),U}function A(I,w,T,L){var U=Ya(T);if(typeof U!="function")throw Error($(150));if(T=U.call(T),T==null)throw Error($(151));for(var O=U=null,_=w,y=w=0,E=null,N=T.next();_!==null&&!N.done;y++,N=T.next()){_.index>y?(E=_,_=null):E=_.sibling;var v=p(I,_,N.value,L);if(v===null){_===null&&(_=E);break}t&&_&&v.alternate===null&&e(I,_),w=i(v,w,y),O===null?U=v:O.sibling=v,O=v,_=E}if(N.done)return n(I,_),ke&&es(I,y),U;if(_===null){for(;!N.done;y++,N=T.next())N=g(I,N.value,L),N!==null&&(w=i(N,w,y),O===null?U=N:O.sibling=N,O=N);return ke&&es(I,y),U}for(_=r(I,_);!N.done;y++,N=T.next())N=b(_,I,y,N.value,L),N!==null&&(t&&N.alternate!==null&&_.delete(N.key===null?y:N.key),w=i(N,w,y),O===null?U=N:O.sibling=N,O=N);return t&&_.forEach(function(R){return e(I,R)}),ke&&es(I,y),U}function D(I,w,T,L){if(typeof T=="object"&&T!==null&&T.type===zs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case $o:e:{for(var U=T.key,O=w;O!==null;){if(O.key===U){if(U=T.type,U===zs){if(O.tag===7){n(I,O.sibling),w=s(O,T.props.children),w.return=I,I=w;break e}}else if(O.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===hr&&Bg(U)===O.type){n(I,O.sibling),w=s(O,T.props),w.ref=ei(I,O,T),w.return=I,I=w;break e}n(I,O);break}else e(I,O);O=O.sibling}T.type===zs?(w=us(T.props.children,I.mode,L,T.key),w.return=I,I=w):(L=_l(T.type,T.key,T.props,null,I.mode,L),L.ref=ei(I,w,T),L.return=I,I=L)}return o(I);case Bs:e:{for(O=T.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(I,w.sibling),w=s(w,T.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=ud(T,I.mode,L),w.return=I,I=w}return o(I);case hr:return O=T._init,D(I,w,O(T._payload),L)}if(ii(T))return k(I,w,T,L);if(Ya(T))return A(I,w,T,L);el(I,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,T),w.return=I,I=w):(n(I,w),w=cd(T,I.mode,L),w.return=I,I=w),o(I)):n(I,w)}return D}var ha=cE(!0),uE=cE(!1),Hl=qr(null),Gl=null,Qs=null,wh=null;function xh(){wh=Qs=Gl=null}function _h(t){var e=Hl.current;Ie(Hl),t._currentValue=e}function rm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sa(t,e){Gl=t,wh=Qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(wh!==t)if(t={context:t,memoizedValue:e,next:null},Qs===null){if(Gl===null)throw Error($(308));Qs=t,Gl.dependencies={lanes:0,firstContext:t}}else Qs=Qs.next=t;return e}var as=null;function Nh(t){as===null?as=[t]:as.push(t)}function dE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Nh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Jn(t,r)}function Jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function Sh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Jn(t,n)}return s=r.interleaved,s===null?(e.next=e,Nh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Jn(t,n)}function yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uh(t,n)}}function zg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kl(t,e,n,r){var s=t.updateQueue;fr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,h=d=u=null,c=i;do{var p=c.lane,b=c.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var k=t,A=c;switch(p=e,b=n,A.tag){case 1:if(k=A.payload,typeof k=="function"){g=k.call(b,g,p);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=A.payload,p=typeof k=="function"?k.call(b,g,p):k,p==null)break e;g=Re({},g,p);break e;case 2:fr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[c]:p.push(c))}else b={eventTime:b,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=b,u=g):h=h.next=b,o|=p;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;p=c,c=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=g),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ys|=o,t.lanes=o,t.memoizedState=g}}function $g(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var uo={},An=qr(uo),zi=qr(uo),$i=qr(uo);function is(t){if(t===uo)throw Error($(174));return t}function Ih(t,e){switch(xe($i,e),xe(zi,t),xe(An,uo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vd(e,t)}Ie(An),xe(An,e)}function fa(){Ie(An),Ie(zi),Ie($i)}function hE(t){is($i.current);var e=is(An.current),n=Vd(e,t.type);e!==n&&(xe(zi,t),xe(An,n))}function Th(t){zi.current===t&&(Ie(An),Ie(zi))}var Ce=qr(0);function Yl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rd=[];function kh(){for(var t=0;t<rd.length;t++)rd[t]._workInProgressVersionPrimary=null;rd.length=0}var vl=sr.ReactCurrentDispatcher,sd=sr.ReactCurrentBatchConfig,gs=0,Pe=null,Ke=null,Xe=null,Ql=!1,bi=!1,qi=0,KS=0;function ft(){throw Error($(321))}function Ah(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function Ch(t,e,n,r,s,i){if(gs=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vl.current=t===null||t.memoizedState===null?XS:ZS,t=n(r,s),bi){i=0;do{if(bi=!1,qi=0,25<=i)throw Error($(301));i+=1,Xe=Ke=null,e.updateQueue=null,vl.current=eI,t=n(r,s)}while(bi)}if(vl.current=Jl,e=Ke!==null&&Ke.next!==null,gs=0,Xe=Ke=Pe=null,Ql=!1,e)throw Error($(300));return t}function Ph(){var t=qi!==0;return qi=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function cn(){if(Ke===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Xe===null?Pe.memoizedState:Xe.next;if(e!==null)Xe=e,Ke=t;else{if(t===null)throw Error($(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Wi(t,e){return typeof e=="function"?e(t):e}function ad(t){var e=cn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var h=d.lane;if((gs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=g,o=r):u=u.next=g,Pe.lanes|=h,ys|=h}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,En(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,ys|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function id(t){var e=cn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);En(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function fE(){}function pE(t,e){var n=Pe,r=cn(),s=e(),i=!En(r.memoizedState,s);if(i&&(r.memoizedState=s,Ot=!0),r=r.queue,Rh(vE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Hi(9,yE.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error($(349));gs&30||gE(n,e,s)}return s}function gE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yE(t,e,n,r){e.value=n,e.getSnapshot=r,EE(e)&&bE(t)}function vE(t,e,n){return n(function(){EE(e)&&bE(t)})}function EE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function bE(t){var e=Jn(t,1);e!==null&&vn(e,t,1,-1)}function qg(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},e.queue=t,t=t.dispatch=JS.bind(null,Pe,t),[e.memoizedState,t]}function Hi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wE(){return cn().memoizedState}function El(t,e,n,r){var s=Nn();Pe.flags|=t,s.memoizedState=Hi(1|e,n,void 0,r===void 0?null:r)}function Pc(t,e,n,r){var s=cn();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&Ah(r,o.deps)){s.memoizedState=Hi(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=Hi(1|e,n,i,r)}function Wg(t,e){return El(8390656,8,t,e)}function Rh(t,e){return Pc(2048,8,t,e)}function xE(t,e){return Pc(4,2,t,e)}function _E(t,e){return Pc(4,4,t,e)}function NE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function SE(t,e,n){return n=n!=null?n.concat([t]):null,Pc(4,4,NE.bind(null,e,t),n)}function Dh(){}function IE(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ah(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TE(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ah(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kE(t,e,n){return gs&21?(En(n,e)||(n=Dv(),Pe.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function YS(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=sd.transition;sd.transition={};try{t(!1),e()}finally{ge=n,sd.transition=r}}function AE(){return cn().memoizedState}function QS(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CE(t))PE(e,n);else if(n=dE(t,e,n,r),n!==null){var s=kt();vn(n,t,r,s),RE(n,e,r)}}function JS(t,e,n){var r=Rr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CE(t))PE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,En(c,o)){var u=e.interleaved;u===null?(s.next=s,Nh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=dE(t,e,s,r),n!==null&&(s=kt(),vn(n,t,r,s),RE(n,e,r))}}function CE(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function PE(t,e){bi=Ql=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uh(t,n)}}var Jl={readContext:ln,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},XS={readContext:ln,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:Wg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,El(4194308,4,NE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return El(4194308,4,t,e)},useInsertionEffect:function(t,e){return El(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QS.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:qg,useDebugValue:Dh,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=qg(!1),e=t[0];return t=YS.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=Nn();if(ke){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ze===null)throw Error($(349));gs&30||gE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Wg(vE.bind(null,r,i,t),[t]),r.flags|=2048,Hi(9,yE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Nn(),e=Ze.identifierPrefix;if(ke){var n=zn,r=Bn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZS={readContext:ln,useCallback:IE,useContext:ln,useEffect:Rh,useImperativeHandle:SE,useInsertionEffect:xE,useLayoutEffect:_E,useMemo:TE,useReducer:ad,useRef:wE,useState:function(){return ad(Wi)},useDebugValue:Dh,useDeferredValue:function(t){var e=cn();return kE(e,Ke.memoizedState,t)},useTransition:function(){var t=ad(Wi)[0],e=cn().memoizedState;return[t,e]},useMutableSource:fE,useSyncExternalStore:pE,useId:AE,unstable_isNewReconciler:!1},eI={readContext:ln,useCallback:IE,useContext:ln,useEffect:Rh,useImperativeHandle:SE,useInsertionEffect:xE,useLayoutEffect:_E,useMemo:TE,useReducer:id,useRef:wE,useState:function(){return id(Wi)},useDebugValue:Dh,useDeferredValue:function(t){var e=cn();return Ke===null?e.memoizedState=t:kE(e,Ke.memoizedState,t)},useTransition:function(){var t=id(Wi)[0],e=cn().memoizedState;return[t,e]},useMutableSource:fE,useSyncExternalStore:pE,useId:AE,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rc={isMounted:function(t){return(t=t._reactInternals)?ks(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),s=Rr(t),i=Hn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(vn(e,t,s,r),yl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),s=Rr(t),i=Hn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(vn(e,t,s,r),yl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=Rr(t),s=Hn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cr(t,s,r),e!==null&&(vn(e,t,r,n),yl(e,t,r))}};function Hg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Fi(n,r)||!Fi(s,i):!0}function DE(t,e,n){var r=!1,s=Ur,i=e.contextType;return typeof i=="object"&&i!==null?i=ln(i):(s=Vt(e)?fs:xt.current,r=e.contextTypes,i=(r=r!=null)?da(t,s):Ur),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rc.enqueueReplaceState(e,e.state,null)}function am(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ln(i):(i=Vt(e)?fs:xt.current,s.context=da(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Rc.enqueueReplaceState(s,s.state,null),Kl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function pa(t,e){try{var n="",r=e;do n+=kN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function od(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function im(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tI=typeof WeakMap=="function"?WeakMap:Map;function LE(t,e,n){n=Hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zl||(Zl=!0,gm=r),im(t,e)},n}function OE(t,e,n){n=Hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){im(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){im(t,e),typeof r!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Kg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pI.bind(null,t,e,n),e.then(t,t))}function Yg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hn(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var nI=sr.ReactCurrentOwner,Ot=!1;function Tt(t,e,n,r){e.child=t===null?uE(e,null,n,r):ha(e,t.child,n,r)}function Jg(t,e,n,r,s){n=n.render;var i=e.ref;return sa(e,s),r=Ch(t,e,n,r,i,s),n=Ph(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xn(t,e,s)):(ke&&n&&vh(e),e.flags|=1,Tt(t,e,r,s),e.child)}function Xg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Bh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ME(t,e,i,r,s)):(t=_l(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Fi,n(o,r)&&t.ref===e.ref)return Xn(t,e,s)}return e.flags|=1,t=Dr(i,r),t.ref=e.ref,t.return=e,e.child=t}function ME(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Fi(i,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,Xn(t,e,s)}return om(t,e,n,r,s)}function VE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Xs,Ht),Ht|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Xs,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,xe(Xs,Ht),Ht|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,xe(Xs,Ht),Ht|=r;return Tt(t,e,s,n),e.child}function FE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function om(t,e,n,r,s){var i=Vt(n)?fs:xt.current;return i=da(e,i),sa(e,s),n=Ch(t,e,n,r,i,s),r=Ph(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xn(t,e,s)):(ke&&r&&vh(e),e.flags|=1,Tt(t,e,n,s),e.child)}function Zg(t,e,n,r,s){if(Vt(n)){var i=!0;$l(e)}else i=!1;if(sa(e,s),e.stateNode===null)bl(t,e),DE(e,n,r),am(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=ln(d):(d=Vt(n)?fs:xt.current,d=da(e,d));var h=n.getDerivedStateFromProps,g=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Gg(e,o,r,d),fr=!1;var p=e.memoizedState;o.state=p,Kl(e,r,o,s),u=e.memoizedState,c!==r||p!==u||Mt.current||fr?(typeof h=="function"&&(sm(e,n,h,r),u=e.memoizedState),(c=fr||Hg(e,n,c,r,p,u,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mE(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:fn(e.type,c),o.props=d,g=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ln(u):(u=Vt(n)?fs:xt.current,u=da(e,u));var b=n.getDerivedStateFromProps;(h=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==g||p!==u)&&Gg(e,o,r,u),fr=!1,p=e.memoizedState,o.state=p,Kl(e,r,o,s);var k=e.memoizedState;c!==g||p!==k||Mt.current||fr?(typeof b=="function"&&(sm(e,n,b,r),k=e.memoizedState),(d=fr||Hg(e,n,d,r,p,k,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return lm(t,e,n,r,i,s)}function lm(t,e,n,r,s,i){FE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Fg(e,n,!1),Xn(t,e,i);r=e.stateNode,nI.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ha(e,t.child,null,i),e.child=ha(e,null,c,i)):Tt(t,e,c,i),e.memoizedState=r.state,s&&Fg(e,n,!0),e.child}function UE(t){var e=t.stateNode;e.pendingContext?Vg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vg(t,e.context,!1),Ih(t,e.containerInfo)}function e0(t,e,n,r,s){return ma(),bh(s),e.flags|=256,Tt(t,e,n,r),e.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function um(t){return{baseLanes:t,cachePool:null,transitions:null}}function jE(t,e,n){var r=e.pendingProps,s=Ce.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),xe(Ce,s&1),t===null)return nm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Oc(o,r,0,null),t=us(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=um(n),e.memoizedState=cm,t):Lh(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return rI(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Dr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Dr(c,i):(i=us(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?um(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cm,r}return i=t.child,t=i.sibling,r=Dr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lh(t,e){return e=Oc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tl(t,e,n,r){return r!==null&&bh(r),ha(e,t.child,null,n),t=Lh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=od(Error($(422))),tl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Oc({mode:"visible",children:r.children},s,0,null),i=us(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ha(e,t.child,null,o),e.child.memoizedState=um(o),e.memoizedState=cm,i);if(!(e.mode&1))return tl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error($(419)),r=od(i,r,void 0),tl(t,e,o,r)}if(c=(o&t.childLanes)!==0,Ot||c){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Jn(t,s),vn(r,t,s,-1))}return jh(),r=od(Error($(421))),tl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Kt=Ar(s.nextSibling),Jt=e,ke=!0,gn=null,t!==null&&(nn[rn++]=Bn,nn[rn++]=zn,nn[rn++]=ps,Bn=t.id,zn=t.overflow,ps=e),e=Lh(e,r.children),e.flags|=4096,e)}function t0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rm(t.return,e,n)}function ld(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function BE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t0(t,n,e);else if(t.tag===19)t0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Yl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ld(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Yl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ld(e,!0,n,null,i);break;case"together":ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sI(t,e,n){switch(e.tag){case 3:UE(e),ma();break;case 5:hE(e);break;case 1:Vt(e.type)&&$l(e);break;case 4:Ih(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;xe(Hl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?jE(t,e,n):(xe(Ce,Ce.current&1),t=Xn(t,e,n),t!==null?t.sibling:null);xe(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,VE(t,e,n)}return Xn(t,e,n)}var zE,dm,$E,qE;zE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dm=function(){};$E=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,is(An.current);var i=null;switch(n){case"input":s=Dd(t,s),r=Dd(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=Md(t,s),r=Md(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bl)}Fd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Pi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Pi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ne("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};qE=function(t,e,n,r){n!==r&&(e.flags|=4)};function ti(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aI(t,e,n){var r=e.pendingProps;switch(Eh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Vt(e.type)&&zl(),pt(e),null;case 3:return r=e.stateNode,fa(),Ie(Mt),Ie(xt),kh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(Em(gn),gn=null))),dm(t,e),pt(e),null;case 5:Th(e);var s=is($i.current);if(n=e.type,t!==null&&e.stateNode!=null)$E(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return pt(e),null}if(t=is(An.current),Zo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Sn]=e,r[Bi]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<li.length;s++)Ne(li[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":ug(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":mg(r,i),Ne("invalid",r)}Fd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Xo(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Xo(r.textContent,c,t),s=["children",""+c]):Pi.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":qo(r),dg(r,i,!0);break;case"textarea":qo(r),hg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Bl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sn]=e,t[Bi]=r,zE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ud(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<li.length;s++)Ne(li[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":ug(t,r),s=Dd(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":mg(t,r),s=Md(t,r),Ne("invalid",t);break;default:s=r}Fd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?wv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ev(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ri(t,u):typeof u=="number"&&Ri(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ne("scroll",t):u!=null&&sh(t,i,u,o))}switch(n){case"input":qo(t),dg(t,r,!1);break;case"textarea":qo(t),hg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ea(t,!!r.multiple,i,!1):r.defaultValue!=null&&ea(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)qE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=is($i.current),is(An.current),Zo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sn]=e,(i=r.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:Xo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=e,e.stateNode=r}return pt(e),null;case 13:if(Ie(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Kt!==null&&e.mode&1&&!(e.flags&128))lE(),ma(),e.flags|=98560,i=!1;else if(i=Zo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Sn]=e}else ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else gn!==null&&(Em(gn),gn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?Ye===0&&(Ye=3):jh())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return fa(),dm(t,e),t===null&&Ui(e.stateNode.containerInfo),pt(e),null;case 10:return _h(e.type._context),pt(e),null;case 17:return Vt(e.type)&&zl(),pt(e),null;case 19:if(Ie(Ce),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ti(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yl(t),o!==null){for(e.flags|=128,ti(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>ga&&(e.flags|=128,r=!0,ti(i,!1),e.lanes=4194304)}else{if(!r)if(t=Yl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ti(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return pt(e),null}else 2*Be()-i.renderingStartTime>ga&&n!==1073741824&&(e.flags|=128,r=!0,ti(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=Ce.current,xe(Ce,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return Uh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ht&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function iI(t,e){switch(Eh(e),e.tag){case 1:return Vt(e.type)&&zl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fa(),Ie(Mt),Ie(xt),kh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Th(e),null;case 13:if(Ie(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ma()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ce),null;case 4:return fa(),null;case 10:return _h(e.type._context),null;case 22:case 23:return Uh(),null;case 24:return null;default:return null}}var nl=!1,vt=!1,oI=typeof WeakSet=="function"?WeakSet:Set,G=null;function Js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function mm(t,e,n){try{n()}catch(r){Me(t,e,r)}}var n0=!1;function lI(t,e){if(Yd=Fl,t=Yv(),yh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,h=0,g=t,p=null;t:for(;;){for(var b;g!==n||s!==0&&g.nodeType!==3||(c=o+s),g!==i||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(b=g.firstChild)!==null;)p=g,g=b;for(;;){if(g===t)break t;if(p===n&&++d===s&&(c=o),p===i&&++h===r&&(u=o),(b=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=b}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qd={focusedElem:t,selectionRange:n},Fl=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var A=k.memoizedProps,D=k.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?A:fn(e.type,A),D);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(L){Me(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return k=n0,n0=!1,k}function wi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&mm(e,n,i)}s=s.next}while(s!==r)}}function Dc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WE(t){var e=t.alternate;e!==null&&(t.alternate=null,WE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[Bi],delete e[Zd],delete e[qS],delete e[WS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function HE(t){return t.tag===5||t.tag===3||t.tag===4}function r0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||HE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bl));else if(r!==4&&(t=t.child,t!==null))for(fm(t,e,n),t=t.sibling;t!==null;)fm(t,e,n),t=t.sibling}function pm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pm(t,e,n),t=t.sibling;t!==null;)pm(t,e,n),t=t.sibling}var nt=null,pn=!1;function dr(t,e,n){for(n=n.child;n!==null;)GE(t,e,n),n=n.sibling}function GE(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Sc,n)}catch{}switch(n.tag){case 5:vt||Js(n,e);case 6:var r=nt,s=pn;nt=null,dr(t,e,n),nt=r,pn=s,nt!==null&&(pn?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(pn?(t=nt,n=n.stateNode,t.nodeType===8?td(t.parentNode,n):t.nodeType===1&&td(t,n),Mi(t)):td(nt,n.stateNode));break;case 4:r=nt,s=pn,nt=n.stateNode.containerInfo,pn=!0,dr(t,e,n),nt=r,pn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&mm(n,e,o),s=s.next}while(s!==r)}dr(t,e,n);break;case 1:if(!vt&&(Js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Me(n,e,c)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,dr(t,e,n),vt=r):dr(t,e,n);break;default:dr(t,e,n)}}function s0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oI),e.forEach(function(r){var s=yI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:nt=c.stateNode,pn=!1;break e;case 3:nt=c.stateNode.containerInfo,pn=!0;break e;case 4:nt=c.stateNode.containerInfo,pn=!0;break e}c=c.return}if(nt===null)throw Error($(160));GE(i,o,s),nt=null,pn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KE(e,t),e=e.sibling}function KE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),_n(t),r&4){try{wi(3,t,t.return),Dc(3,t)}catch(A){Me(t,t.return,A)}try{wi(5,t,t.return)}catch(A){Me(t,t.return,A)}}break;case 1:hn(e,t),_n(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(hn(e,t),_n(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var s=t.stateNode;try{Ri(s,"")}catch(A){Me(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&gv(s,i),Ud(c,o);var d=Ud(c,i);for(o=0;o<u.length;o+=2){var h=u[o],g=u[o+1];h==="style"?wv(s,g):h==="dangerouslySetInnerHTML"?Ev(s,g):h==="children"?Ri(s,g):sh(s,h,g,d)}switch(c){case"input":Ld(s,i);break;case"textarea":yv(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?ea(s,!!i.multiple,b,!1):p!==!!i.multiple&&(i.defaultValue!=null?ea(s,!!i.multiple,i.defaultValue,!0):ea(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bi]=i}catch(A){Me(t,t.return,A)}}break;case 6:if(hn(e,t),_n(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){Me(t,t.return,A)}}break;case 3:if(hn(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mi(e.containerInfo)}catch(A){Me(t,t.return,A)}break;case 4:hn(e,t),_n(t);break;case 13:hn(e,t),_n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vh=Be())),r&4&&s0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(d=vt)||h,hn(e,t),vt=d):hn(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(g=G=h;G!==null;){switch(p=G,b=p.child,p.tag){case 0:case 11:case 14:case 15:wi(4,p,p.return);break;case 1:Js(p,p.return);var k=p.stateNode;if(typeof k.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(A){Me(r,n,A)}}break;case 5:Js(p,p.return);break;case 22:if(p.memoizedState!==null){i0(g);continue}}b!==null?(b.return=p,G=b):i0(g)}h=h.sibling}e:for(h=null,g=t;;){if(g.tag===5){if(h===null){h=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=bv("display",o))}catch(A){Me(t,t.return,A)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(A){Me(t,t.return,A)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:hn(e,t),_n(t),r&4&&s0(t);break;case 21:break;default:hn(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(HE(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ri(s,""),r.flags&=-33);var i=r0(t);pm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=r0(t);fm(t,c,o);break;default:throw Error($(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cI(t,e,n){G=t,YE(t)}function YE(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||nl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||vt;c=nl;var d=vt;if(nl=o,(vt=u)&&!d)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?o0(s):u!==null?(u.return=o,G=u):o0(s);for(;i!==null;)G=i,YE(i),i=i.sibling;G=s,nl=c,vt=d}a0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):a0(t)}}function a0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Dc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$g(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$g(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&Mi(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}vt||e.flags&512&&hm(e)}catch(p){Me(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function i0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function o0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dc(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Me(e,s,u)}}var i=e.return;try{hm(e)}catch(u){Me(e,i,u)}break;case 5:var o=e.return;try{hm(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){G=null;break}var c=e.sibling;if(c!==null){c.return=e.return,G=c;break}G=e.return}}var uI=Math.ceil,Xl=sr.ReactCurrentDispatcher,Oh=sr.ReactCurrentOwner,an=sr.ReactCurrentBatchConfig,he=0,Ze=null,He=null,at=0,Ht=0,Xs=qr(0),Ye=0,Gi=null,ys=0,Lc=0,Mh=0,xi=null,Dt=null,Vh=0,ga=1/0,Un=null,Zl=!1,gm=null,Pr=null,rl=!1,_r=null,ec=0,_i=0,ym=null,wl=-1,xl=0;function kt(){return he&6?Be():wl!==-1?wl:wl=Be()}function Rr(t){return t.mode&1?he&2&&at!==0?at&-at:GS.transition!==null?(xl===0&&(xl=Dv()),xl):(t=ge,t!==0||(t=window.event,t=t===void 0?16:jv(t.type)),t):1}function vn(t,e,n,r){if(50<_i)throw _i=0,ym=null,Error($(185));oo(t,n,r),(!(he&2)||t!==Ze)&&(t===Ze&&(!(he&2)&&(Lc|=n),Ye===4&&gr(t,at)),Ft(t,r),n===1&&he===0&&!(e.mode&1)&&(ga=Be()+500,Cc&&Wr()))}function Ft(t,e){var n=t.callbackNode;GN(t,e);var r=Vl(t,t===Ze?at:0);if(r===0)n!==null&&gg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gg(n),e===1)t.tag===0?HS(l0.bind(null,t)):aE(l0.bind(null,t)),zS(function(){!(he&6)&&Wr()}),n=null;else{switch(Lv(r)){case 1:n=ch;break;case 4:n=Pv;break;case 16:n=Ml;break;case 536870912:n=Rv;break;default:n=Ml}n=rb(n,QE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function QE(t,e){if(wl=-1,xl=0,he&6)throw Error($(327));var n=t.callbackNode;if(aa()&&t.callbackNode!==n)return null;var r=Vl(t,t===Ze?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=tc(t,r);else{e=r;var s=he;he|=2;var i=XE();(Ze!==t||at!==e)&&(Un=null,ga=Be()+500,cs(t,e));do try{hI();break}catch(c){JE(t,c)}while(!0);xh(),Xl.current=i,he=s,He!==null?e=0:(Ze=null,at=0,e=Ye)}if(e!==0){if(e===2&&(s=qd(t),s!==0&&(r=s,e=vm(t,s))),e===1)throw n=Gi,cs(t,0),gr(t,r),Ft(t,Be()),n;if(e===6)gr(t,r);else{if(s=t.current.alternate,!(r&30)&&!dI(s)&&(e=tc(t,r),e===2&&(i=qd(t),i!==0&&(r=i,e=vm(t,i))),e===1))throw n=Gi,cs(t,0),gr(t,r),Ft(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:ts(t,Dt,Un);break;case 3:if(gr(t,r),(r&130023424)===r&&(e=Vh+500-Be(),10<e)){if(Vl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xd(ts.bind(null,t,Dt,Un),e);break}ts(t,Dt,Un);break;case 4:if(gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uI(r/1960))-r,10<r){t.timeoutHandle=Xd(ts.bind(null,t,Dt,Un),r);break}ts(t,Dt,Un);break;case 5:ts(t,Dt,Un);break;default:throw Error($(329))}}}return Ft(t,Be()),t.callbackNode===n?QE.bind(null,t):null}function vm(t,e){var n=xi;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=tc(t,e),t!==2&&(e=Dt,Dt=n,e!==null&&Em(e)),t}function Em(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function dI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!En(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e){for(e&=~Mh,e&=~Lc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function l0(t){if(he&6)throw Error($(327));aa();var e=Vl(t,0);if(!(e&1))return Ft(t,Be()),null;var n=tc(t,e);if(t.tag!==0&&n===2){var r=qd(t);r!==0&&(e=r,n=vm(t,r))}if(n===1)throw n=Gi,cs(t,0),gr(t,e),Ft(t,Be()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ts(t,Dt,Un),Ft(t,Be()),null}function Fh(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(ga=Be()+500,Cc&&Wr())}}function vs(t){_r!==null&&_r.tag===0&&!(he&6)&&aa();var e=he;he|=1;var n=an.transition,r=ge;try{if(an.transition=null,ge=1,t)return t()}finally{ge=r,an.transition=n,he=e,!(he&6)&&Wr()}}function Uh(){Ht=Xs.current,Ie(Xs)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BS(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Eh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zl();break;case 3:fa(),Ie(Mt),Ie(xt),kh();break;case 5:Th(r);break;case 4:fa();break;case 13:Ie(Ce);break;case 19:Ie(Ce);break;case 10:_h(r.type._context);break;case 22:case 23:Uh()}n=n.return}if(Ze=t,He=t=Dr(t.current,null),at=Ht=e,Ye=0,Gi=null,Mh=Lc=ys=0,Dt=xi=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}as=null}return t}function JE(t,e){do{var n=He;try{if(xh(),vl.current=Jl,Ql){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ql=!1}if(gs=0,Xe=Ke=Pe=null,bi=!1,qi=0,Oh.current=null,n===null||n.return===null){Ye=1,Gi=e,He=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=at,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var b=Yg(o);if(b!==null){b.flags&=-257,Qg(b,o,c,i,e),b.mode&1&&Kg(i,d,e),e=b,u=d;var k=e.updateQueue;if(k===null){var A=new Set;A.add(u),e.updateQueue=A}else k.add(u);break e}else{if(!(e&1)){Kg(i,d,e),jh();break e}u=Error($(426))}}else if(ke&&c.mode&1){var D=Yg(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Qg(D,o,c,i,e),bh(pa(u,c));break e}}i=u=pa(u,c),Ye!==4&&(Ye=2),xi===null?xi=[i]:xi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=LE(i,u,e);zg(i,I);break e;case 1:c=u;var w=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Pr===null||!Pr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var L=OE(i,c,e);zg(i,L);break e}}i=i.return}while(i!==null)}eb(n)}catch(U){e=U,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function XE(){var t=Xl.current;return Xl.current=Jl,t===null?Jl:t}function jh(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Ze===null||!(ys&268435455)&&!(Lc&268435455)||gr(Ze,at)}function tc(t,e){var n=he;he|=2;var r=XE();(Ze!==t||at!==e)&&(Un=null,cs(t,e));do try{mI();break}catch(s){JE(t,s)}while(!0);if(xh(),he=n,Xl.current=r,He!==null)throw Error($(261));return Ze=null,at=0,Ye}function mI(){for(;He!==null;)ZE(He)}function hI(){for(;He!==null&&!FN();)ZE(He)}function ZE(t){var e=nb(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?eb(t):He=e,Oh.current=null}function eb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iI(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,He=null;return}}else if(n=aI(n,e,Ht),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ye===0&&(Ye=5)}function ts(t,e,n){var r=ge,s=an.transition;try{an.transition=null,ge=1,fI(t,e,n,r)}finally{an.transition=s,ge=r}return null}function fI(t,e,n,r){do aa();while(_r!==null);if(he&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KN(t,i),t===Ze&&(He=Ze=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rl||(rl=!0,rb(Ml,function(){return aa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=an.transition,an.transition=null;var o=ge;ge=1;var c=he;he|=4,Oh.current=null,lI(t,n),KE(n,t),LS(Qd),Fl=!!Yd,Qd=Yd=null,t.current=n,cI(n),UN(),he=c,ge=o,an.transition=i}else t.current=n;if(rl&&(rl=!1,_r=t,ec=s),i=t.pendingLanes,i===0&&(Pr=null),zN(n.stateNode),Ft(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zl)throw Zl=!1,t=gm,gm=null,t;return ec&1&&t.tag!==0&&aa(),i=t.pendingLanes,i&1?t===ym?_i++:(_i=0,ym=t):_i=0,Wr(),null}function aa(){if(_r!==null){var t=Lv(ec),e=an.transition,n=ge;try{if(an.transition=null,ge=16>t?16:t,_r===null)var r=!1;else{if(t=_r,_r=null,ec=0,he&6)throw Error($(331));var s=he;for(he|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(G=d;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:wi(8,h,i)}var g=h.child;if(g!==null)g.return=h,G=g;else for(;G!==null;){h=G;var p=h.sibling,b=h.return;if(WE(h),h===d){G=null;break}if(p!==null){p.return=b,G=p;break}G=b}}}var k=i.alternate;if(k!==null){var A=k.child;if(A!==null){k.child=null;do{var D=A.sibling;A.sibling=null,A=D}while(A!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wi(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,G=I;break e}G=i.return}}var w=t.current;for(G=w;G!==null;){o=G;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,G=T;else e:for(o=w;G!==null;){if(c=G,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Dc(9,c)}}catch(U){Me(c,c.return,U)}if(c===o){G=null;break e}var L=c.sibling;if(L!==null){L.return=c.return,G=L;break e}G=c.return}}if(he=s,Wr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Sc,t)}catch{}r=!0}return r}finally{ge=n,an.transition=e}}return!1}function c0(t,e,n){e=pa(n,e),e=LE(t,e,1),t=Cr(t,e,1),e=kt(),t!==null&&(oo(t,1,e),Ft(t,e))}function Me(t,e,n){if(t.tag===3)c0(t,t,n);else for(;e!==null;){if(e.tag===3){c0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pr===null||!Pr.has(r))){t=pa(n,t),t=OE(e,t,1),e=Cr(e,t,1),t=kt(),e!==null&&(oo(e,1,t),Ft(e,t));break}}e=e.return}}function pI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(at&n)===n&&(Ye===4||Ye===3&&(at&130023424)===at&&500>Be()-Vh?cs(t,0):Mh|=n),Ft(t,e)}function tb(t,e){e===0&&(t.mode&1?(e=Go,Go<<=1,!(Go&130023424)&&(Go=4194304)):e=1);var n=kt();t=Jn(t,e),t!==null&&(oo(t,e,n),Ft(t,n))}function gI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tb(t,n)}function yI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),tb(t,n)}var nb;nb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,sI(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,ke&&e.flags&1048576&&iE(e,Wl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bl(t,e),t=e.pendingProps;var s=da(e,xt.current);sa(e,n),s=Ch(null,e,r,t,s,n);var i=Ph();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(r)?(i=!0,$l(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sh(e),s.updater=Rc,e.stateNode=s,s._reactInternals=e,am(e,r,t,n),e=lm(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&vh(e),Tt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=EI(r),t=fn(r,t),s){case 0:e=om(null,e,r,t,n);break e;case 1:e=Zg(null,e,r,t,n);break e;case 11:e=Jg(null,e,r,t,n);break e;case 14:e=Xg(null,e,r,fn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),om(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Zg(t,e,r,s,n);case 3:e:{if(UE(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,mE(t,e),Kl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=pa(Error($(423)),e),e=e0(t,e,r,n,s);break e}else if(r!==s){s=pa(Error($(424)),e),e=e0(t,e,r,n,s);break e}else for(Kt=Ar(e.stateNode.containerInfo.firstChild),Jt=e,ke=!0,gn=null,n=uE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ma(),r===s){e=Xn(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return hE(e),t===null&&nm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Jd(r,s)?o=null:i!==null&&Jd(r,i)&&(e.flags|=32),FE(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&nm(e),null;case 13:return jE(t,e,n);case 4:return Ih(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ha(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Jg(t,e,r,s,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,xe(Hl,r._currentValue),r._currentValue=o,i!==null)if(En(i.value,o)){if(i.children===s.children&&!Mt.current){e=Xn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Hn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),rm(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),rm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,sa(e,n),s=ln(s),r=r(s),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),Xg(t,e,r,s,n);case 15:return ME(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),bl(t,e),e.tag=1,Vt(r)?(t=!0,$l(e)):t=!1,sa(e,n),DE(e,r,s),am(e,r,s,n),lm(null,e,r,!0,t,n);case 19:return BE(t,e,n);case 22:return VE(t,e,n)}throw Error($(156,e.tag))};function rb(t,e){return Cv(t,e)}function vI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new vI(t,e,n,r)}function Bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function EI(t){if(typeof t=="function")return Bh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ih)return 11;if(t===oh)return 14}return 2}function Dr(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _l(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Bh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zs:return us(n.children,s,i,e);case ah:o=8,s|=8;break;case Ad:return t=sn(12,n,e,s|2),t.elementType=Ad,t.lanes=i,t;case Cd:return t=sn(13,n,e,s),t.elementType=Cd,t.lanes=i,t;case Pd:return t=sn(19,n,e,s),t.elementType=Pd,t.lanes=i,t;case hv:return Oc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dv:o=10;break e;case mv:o=9;break e;case ih:o=11;break e;case oh:o=14;break e;case hr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function us(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function Oc(t,e,n,r){return t=sn(22,t,r,e),t.elementType=hv,t.lanes=n,t.stateNode={isHidden:!1},t}function cd(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function ud(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qu(0),this.expirationTimes=qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zh(t,e,n,r,s,i,o,c,u){return t=new bI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sh(i),t}function wI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sb(t){if(!t)return Ur;t=t._reactInternals;e:{if(ks(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Vt(n))return sE(t,n,e)}return e}function ab(t,e,n,r,s,i,o,c,u){return t=zh(n,r,!0,t,s,i,o,c,u),t.context=sb(null),n=t.current,r=kt(),s=Rr(n),i=Hn(r,s),i.callback=e??null,Cr(n,i,s),t.current.lanes=s,oo(t,s,r),Ft(t,r),t}function Mc(t,e,n,r){var s=e.current,i=kt(),o=Rr(s);return n=sb(n),e.context===null?e.context=n:e.pendingContext=n,e=Hn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(s,e,o),t!==null&&(vn(t,s,o,i),yl(t,s,o)),o}function nc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function u0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $h(t,e){u0(t,e),(t=t.alternate)&&u0(t,e)}function xI(){return null}var ib=typeof reportError=="function"?reportError:function(t){console.error(t)};function qh(t){this._internalRoot=t}Vc.prototype.render=qh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Mc(t,e,null,null)};Vc.prototype.unmount=qh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){Mc(null,t,null,null)}),e[Qn]=null}};function Vc(t){this._internalRoot=t}Vc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&Uv(t)}};function Wh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function d0(){}function _I(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=nc(o);i.call(d)}}var o=ab(e,r,t,0,null,!1,!1,"",d0);return t._reactRootContainer=o,t[Qn]=o.current,Ui(t.nodeType===8?t.parentNode:t),vs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=nc(u);c.call(d)}}var u=zh(t,0,!1,null,null,!1,!1,"",d0);return t._reactRootContainer=u,t[Qn]=u.current,Ui(t.nodeType===8?t.parentNode:t),vs(function(){Mc(e,u,n,r)}),u}function Uc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=nc(o);c.call(u)}}Mc(e,o,t,s)}else o=_I(n,e,t,s,r);return nc(o)}Ov=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oi(e.pendingLanes);n!==0&&(uh(e,n|1),Ft(e,Be()),!(he&6)&&(ga=Be()+500,Wr()))}break;case 13:vs(function(){var r=Jn(t,1);if(r!==null){var s=kt();vn(r,t,1,s)}}),$h(t,1)}};dh=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var n=kt();vn(e,t,134217728,n)}$h(t,134217728)}};Mv=function(t){if(t.tag===13){var e=Rr(t),n=Jn(t,e);if(n!==null){var r=kt();vn(n,t,e,r)}$h(t,e)}};Vv=function(){return ge};Fv=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Bd=function(t,e,n){switch(e){case"input":if(Ld(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ac(r);if(!s)throw Error($(90));pv(r),Ld(r,s)}}}break;case"textarea":yv(t,n);break;case"select":e=n.value,e!=null&&ea(t,!!n.multiple,e,!1)}};Nv=Fh;Sv=vs;var NI={usingClientEntryPoint:!1,Events:[co,Hs,Ac,xv,_v,Fh]},ni={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SI={bundleType:ni.bundleType,version:ni.version,rendererPackageName:ni.rendererPackageName,rendererConfig:ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kv(t),t===null?null:t.stateNode},findFiberByHostInstance:ni.findFiberByHostInstance||xI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{Sc=sl.inject(SI),kn=sl}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NI;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wh(e))throw Error($(200));return wI(t,e,null,n)};en.createRoot=function(t,e){if(!Wh(t))throw Error($(299));var n=!1,r="",s=ib;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zh(t,1,!1,null,null,n,!1,r,s),t[Qn]=e.current,Ui(t.nodeType===8?t.parentNode:t),new qh(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=kv(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return vs(t)};en.hydrate=function(t,e,n){if(!Fc(e))throw Error($(200));return Uc(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!Wh(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ib;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ab(e,null,t,1,n??null,s,!1,i,o),t[Qn]=e.current,Ui(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vc(e)};en.render=function(t,e,n){if(!Fc(e))throw Error($(200));return Uc(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!Fc(t))throw Error($(40));return t._reactRootContainer?(vs(function(){Uc(null,null,t,!1,function(){t._reactRootContainer=null,t[Qn]=null})}),!0):!1};en.unstable_batchedUpdates=Fh;en.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Uc(t,e,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function ob(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ob)}catch(t){console.error(t)}}ob(),ov.exports=en;var II=ov.exports,lb,m0=II;lb=m0.createRoot,m0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ki(){return Ki=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ki.apply(this,arguments)}var Nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nr||(Nr={}));const h0="popstate";function TI(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return bm("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:rc(s)}return AI(e,n,null,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kI(){return Math.random().toString(36).substr(2,8)}function f0(t,e){return{usr:t.state,key:t.key,idx:e}}function bm(t,e,n,r){return n===void 0&&(n=null),Ki({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ka(e):e,{state:n,key:e&&e.key||r||kI()})}function rc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ka(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function AI(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=Nr.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Ki({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function g(){c=Nr.Pop;let D=h(),I=D==null?null:D-d;d=D,u&&u({action:c,location:A.location,delta:I})}function p(D,I){c=Nr.Push;let w=bm(A.location,D,I);d=h()+1;let T=f0(w,d),L=A.createHref(w);try{o.pushState(T,"",L)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(L)}i&&u&&u({action:c,location:A.location,delta:1})}function b(D,I){c=Nr.Replace;let w=bm(A.location,D,I);d=h();let T=f0(w,d),L=A.createHref(w);o.replaceState(T,"",L),i&&u&&u({action:c,location:A.location,delta:0})}function k(D){let I=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof D=="string"?D:rc(D);return w=w.replace(/ $/,"%20"),ze(I,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,I)}let A={get action(){return c},get location(){return t(s,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(h0,g),u=D,()=>{s.removeEventListener(h0,g),u=null}},createHref(D){return e(s,D)},createURL:k,encodeLocation(D){let I=k(D);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:p,replace:b,go(D){return o.go(D)}};return A}var p0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(p0||(p0={}));function CI(t,e,n){return n===void 0&&(n="/"),PI(t,e,n)}function PI(t,e,n,r){let s=typeof e=="string"?ka(e):e,i=Hh(s.pathname||"/",n);if(i==null)return null;let o=ub(t);RI(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=qI(i);c=BI(o[u],d)}return c}function ub(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(ze(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Lr([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ub(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:UI(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of db(i.path))s(i,o,u)}),e}function db(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=db(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function RI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const DI=/^:[\w-]+$/,LI=3,OI=2,MI=1,VI=10,FI=-2,g0=t=>t==="*";function UI(t,e){let n=t.split("/"),r=n.length;return n.some(g0)&&(r+=FI),e&&(r+=OI),n.filter(s=>!g0(s)).reduce((s,i)=>s+(DI.test(i)?LI:i===""?MI:VI),r)}function jI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function BI(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",g=zI({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:Lr([i,g.pathname]),pathnameBase:KI(Lr([i,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(i=Lr([i,g.pathnameBase]))}return o}function zI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$I(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,h,g)=>{let{paramName:p,isOptional:b}=h;if(p==="*"){let A=c[g]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const k=c[g];return b&&!k?d[p]=void 0:d[p]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function $I(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function qI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Hh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ka(t):t;return{pathname:n?n.startsWith("/")?n:HI(n,e):e,search:YI(r),hash:QI(s)}}function HI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gh(t,e){let n=GI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Kh(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ka(t):(s=Ki({},t),ze(!s.pathname||!s.pathname.includes("?"),dd("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),dd("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),dd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),g-=1;s.pathname=p.join("/")}c=g>=0?e[g]:"/"}let u=WI(s,c),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Lr=t=>t.join("/").replace(/\/\/+/g,"/"),KI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),YI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mb=["post","put","patch","delete"];new Set(mb);const XI=["get",...mb];new Set(XI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yi(){return Yi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yi.apply(this,arguments)}const Yh=V.createContext(null),ZI=V.createContext(null),Hr=V.createContext(null),jc=V.createContext(null),ar=V.createContext({outlet:null,matches:[],isDataRoute:!1}),hb=V.createContext(null);function eT(t,e){let{relative:n}=e===void 0?{}:e;Aa()||ze(!1);let{basename:r,navigator:s}=V.useContext(Hr),{hash:i,pathname:o,search:c}=pb(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Lr([r,o])),s.createHref({pathname:u,search:c,hash:i})}function Aa(){return V.useContext(jc)!=null}function Ca(){return Aa()||ze(!1),V.useContext(jc).location}function fb(t){V.useContext(Hr).static||V.useLayoutEffect(t)}function Qe(){let{isDataRoute:t}=V.useContext(ar);return t?fT():tT()}function tT(){Aa()||ze(!1);let t=V.useContext(Yh),{basename:e,future:n,navigator:r}=V.useContext(Hr),{matches:s}=V.useContext(ar),{pathname:i}=Ca(),o=JSON.stringify(Gh(s,n.v7_relativeSplatPath)),c=V.useRef(!1);return fb(()=>{c.current=!0}),V.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let g=Kh(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Lr([e,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[e,r,o,i,t])}function nT(){let{matches:t}=V.useContext(ar),e=t[t.length-1];return e?e.params:{}}function pb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(Hr),{matches:s}=V.useContext(ar),{pathname:i}=Ca(),o=JSON.stringify(Gh(s,r.v7_relativeSplatPath));return V.useMemo(()=>Kh(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function rT(t,e){return sT(t,e)}function sT(t,e,n,r){Aa()||ze(!1);let{navigator:s}=V.useContext(Hr),{matches:i}=V.useContext(ar),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Ca(),h;if(e){var g;let D=typeof e=="string"?ka(e):e;u==="/"||(g=D.pathname)!=null&&g.startsWith(u)||ze(!1),h=D}else h=d;let p=h.pathname||"/",b=p;if(u!=="/"){let D=u.replace(/^\//,"").split("/");b="/"+p.replace(/^\//,"").split("/").slice(D.length).join("/")}let k=CI(t,{pathname:b}),A=cT(k&&k.map(D=>Object.assign({},D,{params:Object.assign({},c,D.params),pathname:Lr([u,s.encodeLocation?s.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?u:Lr([u,s.encodeLocation?s.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),i,n,r);return e&&A?V.createElement(jc.Provider,{value:{location:Yi({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Nr.Pop}},A):A}function aT(){let t=hT(),e=JI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:s},n):null,null)}const iT=V.createElement(aT,null);class oT extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(ar.Provider,{value:this.props.routeContext},V.createElement(hb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lT(t){let{routeContext:e,match:n,children:r}=t,s=V.useContext(Yh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(ar.Provider,{value:e},r)}function cT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let h=o.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);h>=0||ze(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let g=o[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=h),g.route.id){let{loaderData:p,errors:b}=n,k=g.route.loader&&p[g.route.id]===void 0&&(!b||b[g.route.id]===void 0);if(g.route.lazy||k){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,g,p)=>{let b,k=!1,A=null,D=null;n&&(b=c&&g.route.id?c[g.route.id]:void 0,A=g.route.errorElement||iT,u&&(d<0&&p===0?(pT("route-fallback"),k=!0,D=null):d===p&&(k=!0,D=g.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,p+1)),w=()=>{let T;return b?T=A:k?T=D:g.route.Component?T=V.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=h,V.createElement(lT,{match:g,routeContext:{outlet:h,matches:I,isDataRoute:n!=null},children:T})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?V.createElement(oT,{location:n.location,revalidation:n.revalidation,component:A,error:b,children:w(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):w()},null)}var gb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gb||{}),yb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yb||{});function uT(t){let e=V.useContext(Yh);return e||ze(!1),e}function dT(t){let e=V.useContext(ZI);return e||ze(!1),e}function mT(t){let e=V.useContext(ar);return e||ze(!1),e}function vb(t){let e=mT(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function hT(){var t;let e=V.useContext(hb),n=dT(),r=vb();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function fT(){let{router:t}=uT(gb.UseNavigateStable),e=vb(yb.UseNavigateStable),n=V.useRef(!1);return fb(()=>{n.current=!0}),V.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Yi({fromRouteId:e},i)))},[t,e])}const y0={};function pT(t,e,n){y0[t]||(y0[t]=!0)}function gT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function tt(t){let{to:e,replace:n,state:r,relative:s}=t;Aa()||ze(!1);let{future:i,static:o}=V.useContext(Hr),{matches:c}=V.useContext(ar),{pathname:u}=Ca(),d=Qe(),h=Kh(e,Gh(c,i.v7_relativeSplatPath),u,s==="path"),g=JSON.stringify(h);return V.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function qe(t){ze(!1)}function yT(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Nr.Pop,navigator:i,static:o=!1,future:c}=t;Aa()&&ze(!1);let u=e.replace(/^\/*/,"/"),d=V.useMemo(()=>({basename:u,navigator:i,static:o,future:Yi({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof r=="string"&&(r=ka(r));let{pathname:h="/",search:g="",hash:p="",state:b=null,key:k="default"}=r,A=V.useMemo(()=>{let D=Hh(h,u);return D==null?null:{location:{pathname:D,search:g,hash:p,state:b,key:k},navigationType:s}},[u,h,g,p,b,k,s]);return A==null?null:V.createElement(Hr.Provider,{value:d},V.createElement(jc.Provider,{children:n,value:A}))}function vT(t){let{children:e,location:n}=t;return rT(wm(e),n)}new Promise(()=>{});function wm(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,s)=>{if(!V.isValidElement(r))return;let i=[...e,s];if(r.type===V.Fragment){n.push.apply(n,wm(r.props.children,i));return}r.type!==qe&&ze(!1),!r.props.index||!r.props.children||ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xm.apply(this,arguments)}function ET(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function bT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wT(t,e){return t.button===0&&(!e||e==="_self")&&!bT(t)}function _m(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function xT(t,e){let n=_m(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const _T=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NT="6";try{window.__reactRouterVersion=NT}catch{}const ST="startTransition",v0=wN[ST];function IT(t){let{basename:e,children:n,future:r,window:s}=t,i=V.useRef();i.current==null&&(i.current=TI({window:s,v5Compat:!0}));let o=i.current,[c,u]=V.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=V.useCallback(g=>{d&&v0?v0(()=>u(g)):u(g)},[u,d]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.useEffect(()=>gT(r),[r]),V.createElement(yT,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const TT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sc=V.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:g}=e,p=ET(e,_T),{basename:b}=V.useContext(Hr),k,A=!1;if(typeof d=="string"&&kT.test(d)&&(k=d,TT))try{let T=new URL(window.location.href),L=d.startsWith("//")?new URL(T.protocol+d):new URL(d),U=Hh(L.pathname,b);L.origin===T.origin&&U!=null?d=U+L.search+L.hash:A=!0}catch{}let D=eT(d,{relative:s}),I=AT(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:s,viewTransition:g});function w(T){r&&r(T),T.defaultPrevented||I(T)}return V.createElement("a",xm({},p,{href:k||D,onClick:A||i?r:w,ref:n,target:u}))});var E0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(E0||(E0={}));var b0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(b0||(b0={}));function AT(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,u=Qe(),d=Ca(),h=pb(t,{relative:o});return V.useCallback(g=>{if(wT(g,n)){g.preventDefault();let p=r!==void 0?r:rc(d)===rc(h);u(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[d,u,h,r,s,n,t,i,o,c])}function Eb(t){let e=V.useRef(_m(t)),n=V.useRef(!1),r=Ca(),s=V.useMemo(()=>xT(r.search,n.current?null:e.current),[r.search]),i=Qe(),o=V.useCallback((c,u)=>{const d=_m(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,o]}var w0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},CT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},wb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,g=(i&3)<<4|c>>4;let p=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(p=64)),r.push(n[h],n[g],n[p],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||g==null)throw new PT;const p=i<<2|c>>4;if(r.push(p),d!==64){const b=c<<4&240|d>>2;if(r.push(b),g!==64){const k=d<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RT=function(t){const e=bb(t);return wb.encodeByteArray(e,!0)},ac=function(t){return RT(t).replace(/\./g,"")},xb=function(t){try{return wb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=()=>DT().__FIREBASE_DEFAULTS__,OT=()=>{if(typeof process>"u"||typeof w0>"u")return;const t=w0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xb(t[1]);return e&&JSON.parse(e)},Bc=()=>{try{return LT()||OT()||MT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_b=t=>{var e,n;return(n=(e=Bc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Nb=t=>{const e=_b(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Sb=()=>{var t;return(t=Bc())===null||t===void 0?void 0:t.config},Ib=t=>{var e;return(e=Bc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ac(JSON.stringify(n)),ac(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function UT(){var t;const e=(t=Bc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zT(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $T(){return!UT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ab(){try{return typeof indexedDB=="object"}catch{return!1}}function Cb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function qT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="FirebaseError";class dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WT,Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,As.prototype.create)}}class As{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?HT(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new dn(s,c,r)}}function HT(t,e){return t.replace(GT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GT=/\{\$([^}]+)}/g;function KT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(x0(i)&&x0(o)){if(!Qi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function x0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ci(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ui(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YT(t,e){const n=new QT(t,e);return n.subscribe.bind(n)}class QT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=md),s.error===void 0&&(s.error=md),s.complete===void 0&&(s.complete=md);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function md(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=1e3,ZT=2,e2=4*60*60*1e3,t2=.5;function _0(t,e=XT,n=ZT){const r=e*Math.pow(n,t),s=Math.round(t2*r*(Math.random()-.5)*2);return Math.min(e2,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t){return t&&t._delegate?t._delegate:t}class un{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s2(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r2(t){return t===ns?void 0:t}function s2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new n2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const i2={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},o2=ue.INFO,l2={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},c2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=l2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zc{constructor(e){this.name=e,this._logLevel=o2,this._logHandler=c2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const u2=(t,e)=>e.some(n=>t instanceof n);let N0,S0;function d2(){return N0||(N0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m2(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pb=new WeakMap,Nm=new WeakMap,Rb=new WeakMap,hd=new WeakMap,Qh=new WeakMap;function h2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Or(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pb.set(n,t)}).catch(()=>{}),Qh.set(e,t),e}function f2(t){if(Nm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Nm.set(t,e)}let Sm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function p2(t){Sm=t(Sm)}function g2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fd(this),e,...n);return Rb.set(r,e.sort?e.sort():[e]),Or(r)}:m2().includes(t)?function(...e){return t.apply(fd(this),e),Or(Pb.get(this))}:function(...e){return Or(t.apply(fd(this),e))}}function y2(t){return typeof t=="function"?g2(t):(t instanceof IDBTransaction&&f2(t),u2(t,d2())?new Proxy(t,Sm):t)}function Or(t){if(t instanceof IDBRequest)return h2(t);if(hd.has(t))return hd.get(t);const e=y2(t);return e!==t&&(hd.set(t,e),Qh.set(e,t)),e}const fd=t=>Qh.get(t);function Db(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Or(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Or(o.result),u.oldVersion,u.newVersion,Or(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const v2=["get","getKey","getAll","getAllKeys","count"],E2=["put","add","delete","clear"],pd=new Map;function I0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pd.get(e))return pd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=E2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||v2.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return pd.set(e,i),i}p2(t=>({...t,get:(e,n,r)=>I0(e,n)||t.get(e,n,r),has:(e,n)=>!!I0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Im="@firebase/app",T0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new zc("@firebase/app"),x2="@firebase/app-compat",_2="@firebase/analytics-compat",N2="@firebase/analytics",S2="@firebase/app-check-compat",I2="@firebase/app-check",T2="@firebase/auth",k2="@firebase/auth-compat",A2="@firebase/database",C2="@firebase/data-connect",P2="@firebase/database-compat",R2="@firebase/functions",D2="@firebase/functions-compat",L2="@firebase/installations",O2="@firebase/installations-compat",M2="@firebase/messaging",V2="@firebase/messaging-compat",F2="@firebase/performance",U2="@firebase/performance-compat",j2="@firebase/remote-config",B2="@firebase/remote-config-compat",z2="@firebase/storage",$2="@firebase/storage-compat",q2="@firebase/firestore",W2="@firebase/vertexai-preview",H2="@firebase/firestore-compat",G2="firebase",K2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="[DEFAULT]",Y2={[Im]:"fire-core",[x2]:"fire-core-compat",[N2]:"fire-analytics",[_2]:"fire-analytics-compat",[I2]:"fire-app-check",[S2]:"fire-app-check-compat",[T2]:"fire-auth",[k2]:"fire-auth-compat",[A2]:"fire-rtdb",[C2]:"fire-data-connect",[P2]:"fire-rtdb-compat",[R2]:"fire-fn",[D2]:"fire-fn-compat",[L2]:"fire-iid",[O2]:"fire-iid-compat",[M2]:"fire-fcm",[V2]:"fire-fcm-compat",[F2]:"fire-perf",[U2]:"fire-perf-compat",[j2]:"fire-rc",[B2]:"fire-rc-compat",[z2]:"fire-gcs",[$2]:"fire-gcs-compat",[q2]:"fire-fst",[H2]:"fire-fst-compat",[W2]:"fire-vertex","fire-js":"fire-js",[G2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,Q2=new Map,km=new Map;function k0(t,e){try{t.container.addComponent(e)}catch(n){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bn(t){const e=t.name;if(km.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,t);for(const n of ic.values())k0(n,t);for(const n of Q2.values())k0(n,t);return!0}function Gr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function In(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new As("app","Firebase",J2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=K2;function Lb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Tm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Mr.create("bad-app-name",{appName:String(s)});if(n||(n=Sb()),!n)throw Mr.create("no-options");const i=ic.get(s);if(i){if(Qi(n,i.options)&&Qi(r,i.config))return i;throw Mr.create("duplicate-app",{appName:s})}const o=new a2(s);for(const u of km.values())o.addComponent(u);const c=new X2(n,r,o);return ic.set(s,c),c}function $c(t=Tm){const e=ic.get(t);if(!e&&t===Tm&&Sb())return Lb();if(!e)throw Mr.create("no-app",{appName:t});return e}function Ut(t,e,n){var r;let s=(r=Y2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(c.join(" "));return}bn(new un(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="firebase-heartbeat-database",ek=1,Ji="firebase-heartbeat-store";let gd=null;function Ob(){return gd||(gd=Db(Z2,ek,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ji)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),gd}async function tk(t){try{const n=(await Ob()).transaction(Ji),r=await n.objectStore(Ji).get(Mb(t));return await n.done,r}catch(e){if(e instanceof dn)Zn.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zn.warn(n.message)}}}async function A0(t,e){try{const r=(await Ob()).transaction(Ji,"readwrite");await r.objectStore(Ji).put(e,Mb(t)),await r.done}catch(n){if(n instanceof dn)Zn.warn(n.message);else{const r=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zn.warn(r.message)}}}function Mb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=1024,rk=30*24*60*60*1e3;class sk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ik(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=C0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=rk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=C0(),{heartbeatsToSend:r,unsentEntries:s}=ak(this._heartbeatsCache.heartbeats),i=ac(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Zn.warn(n),""}}}function C0(){return new Date().toISOString().substring(0,10)}function ak(t,e=nk){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),P0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ik{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ab()?Cb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function P0(t){return ac(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){bn(new un("platform-logger",e=>new b2(e),"PRIVATE")),bn(new un("heartbeat",e=>new sk(e),"PRIVATE")),Ut(Im,T0,t),Ut(Im,T0,"esm2017"),Ut("fire-js","")}ok("");function Jh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lk=Vb,Fb=new As("auth","Firebase",Vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new zc("@firebase/auth");function ck(t,...e){oc.logLevel<=ue.WARN&&oc.warn(`Auth (${Cs}): ${t}`,...e)}function Nl(t,...e){oc.logLevel<=ue.ERROR&&oc.error(`Auth (${Cs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw Xh(t,...e)}function Cn(t,...e){return Xh(t,...e)}function Ub(t,e,n){const r=Object.assign(Object.assign({},lk()),{[e]:n});return new As("auth","Firebase",r).create(e,{appName:t.name})}function Gn(t){return Ub(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Fb.create(t,...e)}function te(t,e,...n){if(!t)throw Xh(e,...n)}function $n(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nl(e),new Error(e)}function er(t,e){t||$n(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uk(){return R0()==="http:"||R0()==="https:"}function R0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uk()||kb()||"connection"in navigator)?navigator.onLine:!0}function mk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=FT()||BT()}get(){return dk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t,e){er(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new ho(3e4,6e4);function ir(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function On(t,e,n,r,s={}){return Bb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=mo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return jT()||(d.referrerPolicy="no-referrer"),jb.fetch()(zb(t,t.config.apiHost,n,c),d)})}async function Bb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},hk),e);try{const s=new gk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw al(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw al(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw al(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw al(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ub(t,h,d);wn(t,h)}}catch(s){if(s instanceof dn)throw s;wn(t,"network-request-failed",{message:String(s)})}}async function fo(t,e,n,r,s={}){const i=await On(t,e,n,r,s);return"mfaPendingCredential"in i&&wn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function zb(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Zh(t.config,s):`${t.config.apiScheme}://${s}`}function pk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),fk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function al(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cn(t,e,r);return s.customData._tokenResponse=n,s}function D0(t){return t!==void 0&&t.enterprise!==void 0}class yk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function vk(t,e){return On(t,"GET","/v2/recaptchaConfig",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(t,e){return On(t,"POST","/v1/accounts:delete",e)}async function $b(t,e){return On(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bk(t,e=!1){const n=Ee(t),r=await n.getIdToken(e),s=ef(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ni(yd(s.auth_time)),issuedAtTime:Ni(yd(s.iat)),expirationTime:Ni(yd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yd(t){return Number(t)*1e3}function ef(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nl("JWT malformed, contained fewer than 3 sections"),null;try{const s=xb(n);return s?JSON.parse(s):(Nl("Failed to decode base64 JWT payload"),null)}catch(s){return Nl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function L0(t){const e=ef(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dn&&wk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ni(this.lastLoginAt),this.creationTime=Ni(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ya(t,$b(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?qb(i.providerUserInfo):[],c=Nk(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),h=u?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Cm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,g)}async function _k(t){const e=Ee(t);await lc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Nk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function qb(t){return t.map(e=>{var{providerId:n}=e,r=Jh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(t,e){const n=await Bb(t,{},async()=>{const r=mo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=zb(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",jb.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ik(t,e){return On(t,"POST","/v2/accounts:revokeToken",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):L0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=L0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Sk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ia;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return $n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Jh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Cm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ya(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bk(this,e)}reload(){return _k(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(Gn(this.auth));const e=await this.getIdToken();return await ya(this,Ek(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,h;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,b=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(c=n.tenantId)!==null&&c!==void 0?c:void 0,D=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:L,isAnonymous:U,providerData:O,stsTokenManager:_}=n;te(T&&_,e,"internal-error");const y=ia.fromJSON(this.name,_);te(typeof T=="string",e,"internal-error"),mr(g,e.name),mr(p,e.name),te(typeof L=="boolean",e,"internal-error"),te(typeof U=="boolean",e,"internal-error"),mr(b,e.name),mr(k,e.name),mr(A,e.name),mr(D,e.name),mr(I,e.name),mr(w,e.name);const E=new qn({uid:T,auth:e,email:p,emailVerified:L,displayName:g,isAnonymous:U,photoURL:k,phoneNumber:b,tenantId:A,stsTokenManager:y,createdAt:I,lastLoginAt:w});return O&&Array.isArray(O)&&(E.providerData=O.map(N=>Object.assign({},N))),D&&(E._redirectEventId=D),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new ia;s.updateFromServerResponse(n);const i=new qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await lc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?qb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new ia;c.updateFromIdToken(r);const u=new qn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Cm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Map;function Wn(t){er(t instanceof Function,"Expected a class definition");let e=O0.get(t);return e?(er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,O0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Wb.type="NONE";const M0=Wb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t,e,n){return`firebase:${t}:${e}:${n}`}class oa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Sl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Sl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oa(Wn(M0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Wn(M0);const o=Sl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){const g=qn._fromJSON(e,h);d!==i&&(c=g),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new oa(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new oa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jb(e))return"Blackberry";if(Xb(e))return"Webos";if(Gb(e))return"Safari";if((e.includes("chrome/")||Kb(e))&&!e.includes("edge/"))return"Chrome";if(Qb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Hb(t=_t()){return/firefox\//i.test(t)}function Gb(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kb(t=_t()){return/crios\//i.test(t)}function Yb(t=_t()){return/iemobile/i.test(t)}function Qb(t=_t()){return/android/i.test(t)}function Jb(t=_t()){return/blackberry/i.test(t)}function Xb(t=_t()){return/webos/i.test(t)}function tf(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Tk(t=_t()){var e;return tf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kk(){return zT()&&document.documentMode===10}function Zb(t=_t()){return tf(t)||Qb(t)||Xb(t)||Jb(t)||/windows phone/i.test(t)||Yb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t,e=[]){let n;switch(t){case"Browser":n=V0(_t());break;case"Worker":n=`${V0(_t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t,e={}){return On(t,"GET","/v2/passwordPolicy",ir(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=6;class Rk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Pk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F0(this),this.idTokenSubscription=new F0(this),this.beforeStateQueue=new Ak(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await oa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $b(this,{idToken:e}),r=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(In(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(Gn(this));const n=e?Ee(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(Gn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(Gn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ck(this),n=new Rk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new As("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ik(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await oa.create(this,[Wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ew(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ck(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kr(t){return Ee(t)}class F0{constructor(e){this.auth=e,this.observer=null,this.addObserver=YT(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lk(t){qc=t}function tw(t){return qc.loadJS(t)}function Ok(){return qc.recaptchaEnterpriseScript}function Mk(){return qc.gapiScript}function Vk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Fk="recaptcha-enterprise",Uk="NO_RECAPTCHA";class jk{constructor(e){this.type=Fk,this.auth=Kr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{vk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new yk(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;D0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Uk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&D0(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Ok();u.length!==0&&(u+=c),tw(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function U0(t,e,n,r=!1){const s=new jk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function cc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await U0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await U0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e){const n=Gr(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Qi(i,e??{}))return s;wn(s,"already-initialized")}return n.initialize({options:e})}function zk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $k(t,e,n){const r=Kr(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=nw(e),{host:o,port:c}=qk(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Wk()}function nw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qk(t){const e=nw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:j0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:j0(o)}}}function j0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Wk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $n("not implemented")}_getIdTokenResponse(e){return $n("not implemented")}_linkToIdToken(e,n){return $n("not implemented")}_getReauthenticationResolver(e){return $n("not implemented")}}async function Hk(t,e){return On(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(t,e){return fo(t,"POST","/v1/accounts:signInWithPassword",ir(t,e))}async function rw(t,e){return On(t,"POST","/v1/accounts:sendOobCode",ir(t,e))}async function Kk(t,e){return rw(t,e)}async function Yk(t,e){return rw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(t,e){return fo(t,"POST","/v1/accounts:signInWithEmailLink",ir(t,e))}async function Jk(t,e){return fo(t,"POST","/v1/accounts:signInWithEmailLink",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends nf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Xi(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xi(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cc(e,n,"signInWithPassword",Gk);case"emailLink":return Qk(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cc(e,r,"signUpPassword",Hk);case"emailLink":return Jk(e,{idToken:n,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(t,e){return fo(t,"POST","/v1/accounts:signInWithIdp",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="http://localhost";class Es extends nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Jh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Es(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return la(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,la(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,la(e,n)}buildRequest(){const e={requestUri:Xk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eA(t){const e=ci(ui(t)).link,n=e?ci(ui(e)).deep_link_id:null,r=ci(ui(t)).deep_link_id;return(r?ci(ui(r)).link:null)||r||n||e||t}class rf{constructor(e){var n,r,s,i,o,c;const u=ci(ui(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,g=Zk((s=u.mode)!==null&&s!==void 0?s:null);te(d&&h&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=eA(e);try{return new rf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.providerId=Pa.PROVIDER_ID}static credential(e,n){return Xi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=rf.parseLink(n);return te(r,"argument-error"),Xi._fromEmailAndCode(e,r.code,r.tenantId)}}Pa.PROVIDER_ID="password";Pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends sw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends po{constructor(){super("facebook.com")}static credential(e){return Es._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends po{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Es._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends po{constructor(){super("github.com")}static credential(e){return Es._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends po{constructor(){super("twitter.com")}static credential(e,n){return Es._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return br.credential(n,r)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(t,e){return fo(t,"POST","/v1/accounts:signUp",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await qn._fromIdTokenResponse(e,r,s),o=B0(r);return new bs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=B0(r);return new bs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function B0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends dn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,uc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new uc(e,n,r,s)}}function aw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?uc._fromErrorAndOperation(t,i,e,r):i})}async function nA(t,e,n=!1){const r=await ya(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(t,e,n=!1){const{auth:r}=t;if(In(r.app))return Promise.reject(Gn(r));const s="reauthenticate";try{const i=await ya(t,aw(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=ef(i.idToken);te(o,r,"internal-error");const{sub:c}=o;return te(t.uid===c,r,"user-mismatch"),bs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&wn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iw(t,e,n=!1){if(In(t.app))return Promise.reject(Gn(t));const r="signIn",s=await aw(t,r,e),i=await bs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function sA(t,e){return iw(Kr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ow(t){const e=Kr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aA(t,e,n){const r=Kr(t);await cc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Yk)}async function iA(t,e,n){if(In(t.app))return Promise.reject(Gn(t));const r=Kr(t),o=await cc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ow(t),u}),c=await bs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function oA(t,e,n){return In(t.app)?Promise.reject(Gn(t)):sA(Ee(t),Pa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ow(t),r})}async function lA(t,e){const n=Ee(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await Kk(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(t,e){return On(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ee(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ya(r,cA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function uA(t,e,n,r){return Ee(t).onIdTokenChanged(e,n,r)}function dA(t,e,n){return Ee(t).beforeAuthStateChanged(e,n)}function sf(t,e,n,r){return Ee(t).onAuthStateChanged(e,n,r)}function af(t){return Ee(t).signOut()}const dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=1e3,hA=10;class cw extends lw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);kk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,hA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cw.type="LOCAL";const fA=cw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw extends lw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uw.type="SESSION";const dw=uw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await pA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=of("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function yA(t){Pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function vA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function bA(){return mw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="firebaseLocalStorageDb",wA=1,mc="firebaseLocalStorage",fw="fbase_key";class go{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hc(t,e){return t.transaction([mc],e?"readwrite":"readonly").objectStore(mc)}function xA(){const t=indexedDB.deleteDatabase(hw);return new go(t).toPromise()}function Rm(){const t=indexedDB.open(hw,wA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mc,{keyPath:fw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mc)?e(r):(r.close(),await xA(),e(await Rm()))})})}async function z0(t,e,n){const r=Hc(t,!0).put({[fw]:e,value:n});return new go(r).toPromise()}async function _A(t,e){const n=Hc(t,!1).get(e),r=await new go(n).toPromise();return r===void 0?null:r.value}function $0(t,e){const n=Hc(t,!0).delete(e);return new go(n).toPromise()}const NA=800,SA=3;class pw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>SA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wc._getInstance(bA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await vA(),!this.activeServiceWorker)return;this.sender=new gA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rm();return await z0(e,dc,"1"),await $0(e,dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>z0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_A(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Hc(s,!1).getAll();return new go(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pw.type="LOCAL";const IA=pw;new ho(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t,e){return e?Wn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends nf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return la(e,this._buildIdpRequest())}_linkToIdToken(e,n){return la(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return la(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kA(t){return iw(t.auth,new lf(t),t.bypassAuthState)}function AA(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),rA(n,new lf(t),t.bypassAuthState)}async function CA(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),nA(n,new lf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kA;case"linkViaPopup":case"linkViaRedirect":return CA;case"reauthViaPopup":case"reauthViaRedirect":return AA;default:wn(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new ho(2e3,1e4);class Zs extends gw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zs.currentPopupAction&&Zs.currentPopupAction.cancel(),Zs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=of();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PA.get())};e()}}Zs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="pendingRedirect",Il=new Map;class DA extends gw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Il.get(this.auth._key());if(!e){try{const r=await LA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Il.set(this.auth._key(),e)}return this.bypassAuthState||Il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LA(t,e){const n=VA(e),r=MA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function OA(t,e){Il.set(t._key(),e)}function MA(t){return Wn(t._redirectPersistence)}function VA(t){return Sl(RA,t.config.apiKey,t.name)}async function FA(t,e,n=!1){if(In(t.app))return Promise.reject(Gn(t));const r=Kr(t),s=TA(r,e),o=await new DA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=10*60*1e3;class jA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UA&&this.cachedEventUids.clear(),this.cachedEventUids.has(q0(e))}saveEventToCache(e){this.cachedEventUids.add(q0(e)),this.lastProcessedEventTime=Date.now()}}function q0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(t,e={}){return On(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qA=/^https?/;async function WA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zA(t);for(const n of e)try{if(HA(n))return}catch{}wn(t,"unauthorized-domain")}function HA(t){const e=Am(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!qA.test(n))return!1;if($A.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new ho(3e4,6e4);function W0(){const t=Pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KA(t){return new Promise((e,n)=>{var r,s,i;function o(){W0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W0(),n(Cn(t,"network-request-failed"))},timeout:GA.get()})}if(!((s=(r=Pn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Pn().gapi)===null||i===void 0)&&i.load)o();else{const c=Vk("iframefcb");return Pn()[c]=()=>{gapi.load?o():n(Cn(t,"network-request-failed"))},tw(`${Mk()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Tl=null,e})}let Tl=null;function YA(t){return Tl=Tl||KA(t),Tl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new ho(5e3,15e3),JA="__/auth/iframe",XA="emulator/auth/iframe",ZA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t1(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zh(e,XA):`https://${t.config.authDomain}/${JA}`,r={apiKey:e.apiKey,appName:t.name,v:Cs},s=e1.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${mo(r).slice(1)}`}async function n1(t){const e=await YA(t),n=Pn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:t1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),c=Pn().setTimeout(()=>{i(o)},QA.get());function u(){Pn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s1=500,a1=600,i1="_blank",o1="http://localhost";class H0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l1(t,e,n,r=s1,s=a1){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},r1),{width:r.toString(),height:s.toString(),top:i,left:o}),d=_t().toLowerCase();n&&(c=Kb(d)?i1:n),Hb(d)&&(e=e||o1,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[b,k])=>`${p}${b}=${k},`,"");if(Tk(d)&&c!=="_self")return c1(e||"",c),new H0(null);const g=window.open(e||"",c,h);te(g,t,"popup-blocked");try{g.focus()}catch{}return new H0(g)}function c1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="__/auth/handler",d1="emulator/auth/handler",m1=encodeURIComponent("fac");async function G0(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Cs,eventId:s};if(e instanceof sw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",KT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof po){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${m1}=${encodeURIComponent(u)}`:"";return`${h1(t)}?${mo(c).slice(1)}${d}`}function h1({config:t}){return t.emulator?Zh(t,d1):`https://${t.authDomain}/${u1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="webStorageSupport";class f1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dw,this._completeRedirectFn=FA,this._overrideRedirectResult=OA}async _openPopup(e,n,r,s){var i;er((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await G0(e,n,r,Am(),s);return l1(e,o,of())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await G0(e,n,r,Am(),s);return yA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(er(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await n1(e),r=new jA(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vd,{type:vd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[vd];o!==void 0&&n(!!o),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Zb()||Gb()||tf()}}const p1=f1;var K0="@firebase/auth",Y0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v1(t){bn(new un("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ew(t)},d=new Dk(r,s,i,u);return zk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bn(new un("auth-internal",e=>{const n=Kr(e.getProvider("auth").getImmediate());return(r=>new g1(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ut(K0,Y0,y1(t)),Ut(K0,Y0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=5*60,b1=Ib("authIdTokenMaxAge")||E1;let Q0=null;const w1=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>b1)return;const s=n==null?void 0:n.token;Q0!==s&&(Q0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function x1(t=$c()){const e=Gr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Bk(t,{popupRedirectResolver:p1,persistence:[IA,fA,dw]}),r=Ib("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=w1(i.toString());dA(n,o,()=>o(n.currentUser)),uA(n,c=>o(c))}}const s=_b("auth");return s&&$k(n,`http://${s}`),n}function _1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Lk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",_1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v1("Browser");var N1="firebase",S1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut(N1,S1,"app");var J0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,vw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function E(){}E.prototype=y.prototype,_.D=y.prototype,_.prototype=new E,_.prototype.constructor=_,_.C=function(N,v,R){for(var S=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)S[ae-2]=arguments[ae];return y.prototype[v].apply(N,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,E){E||(E=0);var N=Array(16);if(typeof y=="string")for(var v=0;16>v;++v)N[v]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(v=0;16>v;++v)N[v]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=_.g[0],E=_.g[1],v=_.g[2];var R=_.g[3],S=y+(R^E&(v^R))+N[0]+3614090360&4294967295;y=E+(S<<7&4294967295|S>>>25),S=R+(v^y&(E^v))+N[1]+3905402710&4294967295,R=y+(S<<12&4294967295|S>>>20),S=v+(E^R&(y^E))+N[2]+606105819&4294967295,v=R+(S<<17&4294967295|S>>>15),S=E+(y^v&(R^y))+N[3]+3250441966&4294967295,E=v+(S<<22&4294967295|S>>>10),S=y+(R^E&(v^R))+N[4]+4118548399&4294967295,y=E+(S<<7&4294967295|S>>>25),S=R+(v^y&(E^v))+N[5]+1200080426&4294967295,R=y+(S<<12&4294967295|S>>>20),S=v+(E^R&(y^E))+N[6]+2821735955&4294967295,v=R+(S<<17&4294967295|S>>>15),S=E+(y^v&(R^y))+N[7]+4249261313&4294967295,E=v+(S<<22&4294967295|S>>>10),S=y+(R^E&(v^R))+N[8]+1770035416&4294967295,y=E+(S<<7&4294967295|S>>>25),S=R+(v^y&(E^v))+N[9]+2336552879&4294967295,R=y+(S<<12&4294967295|S>>>20),S=v+(E^R&(y^E))+N[10]+4294925233&4294967295,v=R+(S<<17&4294967295|S>>>15),S=E+(y^v&(R^y))+N[11]+2304563134&4294967295,E=v+(S<<22&4294967295|S>>>10),S=y+(R^E&(v^R))+N[12]+1804603682&4294967295,y=E+(S<<7&4294967295|S>>>25),S=R+(v^y&(E^v))+N[13]+4254626195&4294967295,R=y+(S<<12&4294967295|S>>>20),S=v+(E^R&(y^E))+N[14]+2792965006&4294967295,v=R+(S<<17&4294967295|S>>>15),S=E+(y^v&(R^y))+N[15]+1236535329&4294967295,E=v+(S<<22&4294967295|S>>>10),S=y+(v^R&(E^v))+N[1]+4129170786&4294967295,y=E+(S<<5&4294967295|S>>>27),S=R+(E^v&(y^E))+N[6]+3225465664&4294967295,R=y+(S<<9&4294967295|S>>>23),S=v+(y^E&(R^y))+N[11]+643717713&4294967295,v=R+(S<<14&4294967295|S>>>18),S=E+(R^y&(v^R))+N[0]+3921069994&4294967295,E=v+(S<<20&4294967295|S>>>12),S=y+(v^R&(E^v))+N[5]+3593408605&4294967295,y=E+(S<<5&4294967295|S>>>27),S=R+(E^v&(y^E))+N[10]+38016083&4294967295,R=y+(S<<9&4294967295|S>>>23),S=v+(y^E&(R^y))+N[15]+3634488961&4294967295,v=R+(S<<14&4294967295|S>>>18),S=E+(R^y&(v^R))+N[4]+3889429448&4294967295,E=v+(S<<20&4294967295|S>>>12),S=y+(v^R&(E^v))+N[9]+568446438&4294967295,y=E+(S<<5&4294967295|S>>>27),S=R+(E^v&(y^E))+N[14]+3275163606&4294967295,R=y+(S<<9&4294967295|S>>>23),S=v+(y^E&(R^y))+N[3]+4107603335&4294967295,v=R+(S<<14&4294967295|S>>>18),S=E+(R^y&(v^R))+N[8]+1163531501&4294967295,E=v+(S<<20&4294967295|S>>>12),S=y+(v^R&(E^v))+N[13]+2850285829&4294967295,y=E+(S<<5&4294967295|S>>>27),S=R+(E^v&(y^E))+N[2]+4243563512&4294967295,R=y+(S<<9&4294967295|S>>>23),S=v+(y^E&(R^y))+N[7]+1735328473&4294967295,v=R+(S<<14&4294967295|S>>>18),S=E+(R^y&(v^R))+N[12]+2368359562&4294967295,E=v+(S<<20&4294967295|S>>>12),S=y+(E^v^R)+N[5]+4294588738&4294967295,y=E+(S<<4&4294967295|S>>>28),S=R+(y^E^v)+N[8]+2272392833&4294967295,R=y+(S<<11&4294967295|S>>>21),S=v+(R^y^E)+N[11]+1839030562&4294967295,v=R+(S<<16&4294967295|S>>>16),S=E+(v^R^y)+N[14]+4259657740&4294967295,E=v+(S<<23&4294967295|S>>>9),S=y+(E^v^R)+N[1]+2763975236&4294967295,y=E+(S<<4&4294967295|S>>>28),S=R+(y^E^v)+N[4]+1272893353&4294967295,R=y+(S<<11&4294967295|S>>>21),S=v+(R^y^E)+N[7]+4139469664&4294967295,v=R+(S<<16&4294967295|S>>>16),S=E+(v^R^y)+N[10]+3200236656&4294967295,E=v+(S<<23&4294967295|S>>>9),S=y+(E^v^R)+N[13]+681279174&4294967295,y=E+(S<<4&4294967295|S>>>28),S=R+(y^E^v)+N[0]+3936430074&4294967295,R=y+(S<<11&4294967295|S>>>21),S=v+(R^y^E)+N[3]+3572445317&4294967295,v=R+(S<<16&4294967295|S>>>16),S=E+(v^R^y)+N[6]+76029189&4294967295,E=v+(S<<23&4294967295|S>>>9),S=y+(E^v^R)+N[9]+3654602809&4294967295,y=E+(S<<4&4294967295|S>>>28),S=R+(y^E^v)+N[12]+3873151461&4294967295,R=y+(S<<11&4294967295|S>>>21),S=v+(R^y^E)+N[15]+530742520&4294967295,v=R+(S<<16&4294967295|S>>>16),S=E+(v^R^y)+N[2]+3299628645&4294967295,E=v+(S<<23&4294967295|S>>>9),S=y+(v^(E|~R))+N[0]+4096336452&4294967295,y=E+(S<<6&4294967295|S>>>26),S=R+(E^(y|~v))+N[7]+1126891415&4294967295,R=y+(S<<10&4294967295|S>>>22),S=v+(y^(R|~E))+N[14]+2878612391&4294967295,v=R+(S<<15&4294967295|S>>>17),S=E+(R^(v|~y))+N[5]+4237533241&4294967295,E=v+(S<<21&4294967295|S>>>11),S=y+(v^(E|~R))+N[12]+1700485571&4294967295,y=E+(S<<6&4294967295|S>>>26),S=R+(E^(y|~v))+N[3]+2399980690&4294967295,R=y+(S<<10&4294967295|S>>>22),S=v+(y^(R|~E))+N[10]+4293915773&4294967295,v=R+(S<<15&4294967295|S>>>17),S=E+(R^(v|~y))+N[1]+2240044497&4294967295,E=v+(S<<21&4294967295|S>>>11),S=y+(v^(E|~R))+N[8]+1873313359&4294967295,y=E+(S<<6&4294967295|S>>>26),S=R+(E^(y|~v))+N[15]+4264355552&4294967295,R=y+(S<<10&4294967295|S>>>22),S=v+(y^(R|~E))+N[6]+2734768916&4294967295,v=R+(S<<15&4294967295|S>>>17),S=E+(R^(v|~y))+N[13]+1309151649&4294967295,E=v+(S<<21&4294967295|S>>>11),S=y+(v^(E|~R))+N[4]+4149444226&4294967295,y=E+(S<<6&4294967295|S>>>26),S=R+(E^(y|~v))+N[11]+3174756917&4294967295,R=y+(S<<10&4294967295|S>>>22),S=v+(y^(R|~E))+N[2]+718787259&4294967295,v=R+(S<<15&4294967295|S>>>17),S=E+(R^(v|~y))+N[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(v+(S<<21&4294967295|S>>>11))&4294967295,_.g[2]=_.g[2]+v&4294967295,_.g[3]=_.g[3]+R&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var E=y-this.blockSize,N=this.B,v=this.h,R=0;R<y;){if(v==0)for(;R<=E;)s(this,_,R),R+=this.blockSize;if(typeof _=="string"){for(;R<y;)if(N[v++]=_.charCodeAt(R++),v==this.blockSize){s(this,N),v=0;break}}else for(;R<y;)if(N[v++]=_[R++],v==this.blockSize){s(this,N),v=0;break}}this.h=v,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var E=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=E&255,E/=256;for(this.u(_),_=Array(16),y=E=0;4>y;++y)for(var N=0;32>N;N+=8)_[E++]=this.g[y]>>>N&255;return _};function i(_,y){var E=c;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=y(_)}function o(_,y){this.h=y;for(var E=[],N=!0,v=_.length-1;0<=v;v--){var R=_[v]|0;N&&R==y||(E[v]=R,N=!1)}this.g=E}var c={};function u(_){return-128<=_&&128>_?i(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return g;if(0>_)return D(d(-_));for(var y=[],E=1,N=0;_>=E;N++)y[N]=_/E|0,E*=4294967296;return new o(y,0)}function h(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return D(h(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(y,8)),N=g,v=0;v<_.length;v+=8){var R=Math.min(8,_.length-v),S=parseInt(_.substring(v,v+R),y);8>R?(R=d(Math.pow(y,R)),N=N.j(R).add(d(S))):(N=N.j(E),N=N.add(d(S)))}return N}var g=u(0),p=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-D(this).m();for(var _=0,y=1,E=0;E<this.g.length;E++){var N=this.i(E);_+=(0<=N?N:4294967296+N)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k(this))return"0";if(A(this))return"-"+D(this).toString(_);for(var y=d(Math.pow(_,6)),E=this,N="";;){var v=L(E,y).g;E=I(E,v.j(y));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(_);if(E=v,k(E))return R+N;for(;6>R.length;)R="0"+R;N=R+N}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function k(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function A(_){return _.h==-1}t.l=function(_){return _=I(this,_),A(_)?-1:k(_)?0:1};function D(_){for(var y=_.g.length,E=[],N=0;N<y;N++)E[N]=~_.g[N];return new o(E,~_.h).add(p)}t.abs=function(){return A(this)?D(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],N=0,v=0;v<=y;v++){var R=N+(this.i(v)&65535)+(_.i(v)&65535),S=(R>>>16)+(this.i(v)>>>16)+(_.i(v)>>>16);N=S>>>16,R&=65535,S&=65535,E[v]=S<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(_,y){return _.add(D(y))}t.j=function(_){if(k(this)||k(_))return g;if(A(this))return A(_)?D(this).j(D(_)):D(D(this).j(_));if(A(_))return D(this.j(D(_)));if(0>this.l(b)&&0>_.l(b))return d(this.m()*_.m());for(var y=this.g.length+_.g.length,E=[],N=0;N<2*y;N++)E[N]=0;for(N=0;N<this.g.length;N++)for(var v=0;v<_.g.length;v++){var R=this.i(N)>>>16,S=this.i(N)&65535,ae=_.i(v)>>>16,ee=_.i(v)&65535;E[2*N+2*v]+=S*ee,w(E,2*N+2*v),E[2*N+2*v+1]+=R*ee,w(E,2*N+2*v+1),E[2*N+2*v+1]+=S*ae,w(E,2*N+2*v+1),E[2*N+2*v+2]+=R*ae,w(E,2*N+2*v+2)}for(N=0;N<y;N++)E[N]=E[2*N+1]<<16|E[2*N];for(N=y;N<2*y;N++)E[N]=0;return new o(E,0)};function w(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function T(_,y){this.g=_,this.h=y}function L(_,y){if(k(y))throw Error("division by zero");if(k(_))return new T(g,g);if(A(_))return y=L(D(_),y),new T(D(y.g),D(y.h));if(A(y))return y=L(_,D(y)),new T(D(y.g),y.h);if(30<_.g.length){if(A(_)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var E=p,N=y;0>=N.l(_);)E=U(E),N=U(N);var v=O(E,1),R=O(N,1);for(N=O(N,2),E=O(E,2);!k(N);){var S=R.add(N);0>=S.l(_)&&(v=v.add(E),R=S),N=O(N,1),E=O(E,1)}return y=I(_,v.j(y)),new T(v,y)}for(v=g;0<=_.l(y);){for(E=Math.max(1,Math.floor(_.m()/y.m())),N=Math.ceil(Math.log(E)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),R=d(E),S=R.j(y);A(S)||0<S.l(_);)E-=N,R=d(E),S=R.j(y);k(R)&&(R=p),v=v.add(R),_=I(_,S)}return new T(v,_)}t.A=function(_){return L(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],N=0;N<y;N++)E[N]=this.i(N)&_.i(N);return new o(E,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],N=0;N<y;N++)E[N]=this.i(N)|_.i(N);return new o(E,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],N=0;N<y;N++)E[N]=this.i(N)^_.i(N);return new o(E,this.h^_.h)};function U(_){for(var y=_.g.length+1,E=[],N=0;N<y;N++)E[N]=_.i(N)<<1|_.i(N-1)>>>31;return new o(E,_.h)}function O(_,y){var E=y>>5;y%=32;for(var N=_.g.length-E,v=[],R=0;R<N;R++)v[R]=0<y?_.i(R+E)>>>y|_.i(R+E+1)<<32-y:_.i(R+E);return new o(v,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ds=o}).apply(typeof J0<"u"?J0:typeof self<"u"?self:typeof window<"u"?window:{});var il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ew,di,bw,kl,Dm,ww,xw,_w;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,f){return l==Array.prototype||l==Object.prototype||(l[m]=f.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof il=="object"&&il];for(var m=0;m<l.length;++m){var f=l[m];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(l,m){if(m)e:{var f=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var M=l[x];if(!(M in f))break e;f=f[M]}l=l[l.length-1],x=f[l],m=m(x),m!=x&&m!=null&&e(f,l,{configurable:!0,writable:!0,value:m})}}function i(l,m){l instanceof String&&(l+="");var f=0,x=!1,M={next:function(){if(!x&&f<l.length){var F=f++;return{value:m(F,l[F]),done:!1}}return x=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return i(this,function(m,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function d(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function h(l,m,f){return l.call.apply(l.bind,arguments)}function g(l,m,f){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,x),l.apply(m,M)}}return function(){return l.apply(m,arguments)}}function p(l,m,f){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,p.apply(null,arguments)}function b(l,m){var f=Array.prototype.slice.call(arguments,1);return function(){var x=f.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function k(l,m){function f(){}f.prototype=m.prototype,l.aa=m.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(x,M,F){for(var q=Array(arguments.length-2),be=2;be<arguments.length;be++)q[be-2]=arguments[be];return m.prototype[M].apply(x,q)}}function A(l){const m=l.length;if(0<m){const f=Array(m);for(let x=0;x<m;x++)f[x]=l[x];return f}return[]}function D(l,m){for(let f=1;f<arguments.length;f++){const x=arguments[f];if(u(x)){const M=l.length||0,F=x.length||0;l.length=M+F;for(let q=0;q<F;q++)l[M+q]=x[q]}else l.push(x)}}class I{constructor(m,f){this.i=m,this.j=f,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function w(l){return/^[\s\xa0]*$/.test(l)}function T(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function L(l){return L[" "](l),l}L[" "]=function(){};var U=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function O(l,m,f){for(const x in l)m.call(f,l[x],x,l)}function _(l,m){for(const f in l)m.call(void 0,l[f],f,l)}function y(l){const m={};for(const f in l)m[f]=l[f];return m}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(l,m){let f,x;for(let M=1;M<arguments.length;M++){x=arguments[M];for(f in x)l[f]=x[f];for(let F=0;F<E.length;F++)f=E[F],Object.prototype.hasOwnProperty.call(x,f)&&(l[f]=x[f])}}function v(l){var m=1;l=l.split(":");const f=[];for(;0<m&&l.length;)f.push(l.shift()),m--;return l.length&&f.push(l.join(":")),f}function R(l){c.setTimeout(()=>{throw l},0)}function S(){var l=P;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class ae{constructor(){this.h=this.g=null}add(m,f){const x=ee.get();x.set(m,f),this.h?this.h.next=x:this.g=x,this.h=x}}var ee=new I(()=>new H,l=>l.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,f){this.h=m,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,C=!1,P=new ae,B=()=>{const l=c.Promise.resolve(void 0);ve=()=>{l.then(J)}};var J=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(f){R(f)}var m=ee;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}C=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};c.addEventListener("test",f,m),c.removeEventListener("test",f,m)}catch{}return l}();function ut(l,m){if(we.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(U){e:{try{L(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else f=="mouseover"?m=l.fromElement:f=="mouseout"&&(m=l.toElement);this.relatedTarget=m,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:$t[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ut.aa.h.call(this)}}k(ut,we);var $t={2:"touch",3:"pen",4:"mouse"};ut.prototype.h=function(){ut.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),T_=0;function k_(l,m,f,x,M){this.listener=l,this.proxy=null,this.src=m,this.type=f,this.capture=!!x,this.ha=M,this.key=++T_,this.da=this.fa=!1}function No(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function So(l){this.src=l,this.g={},this.h=0}So.prototype.add=function(l,m,f,x,M){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var q=yu(l,m,x,M);return-1<q?(m=l[q],f||(m.fa=!1)):(m=new k_(m,this.src,F,!!x,M),m.fa=f,l.push(m)),m};function gu(l,m){var f=m.type;if(f in l.g){var x=l.g[f],M=Array.prototype.indexOf.call(x,m,void 0),F;(F=0<=M)&&Array.prototype.splice.call(x,M,1),F&&(No(m),l.g[f].length==0&&(delete l.g[f],l.h--))}}function yu(l,m,f,x){for(var M=0;M<l.length;++M){var F=l[M];if(!F.da&&F.listener==m&&F.capture==!!f&&F.ha==x)return M}return-1}var vu="closure_lm_"+(1e6*Math.random()|0),Eu={};function ap(l,m,f,x,M){if(Array.isArray(m)){for(var F=0;F<m.length;F++)ap(l,m[F],f,x,M);return null}return f=lp(f),l&&l[Ue]?l.K(m,f,d(x)?!!x.capture:!1,M):A_(l,m,f,!1,x,M)}function A_(l,m,f,x,M,F){if(!m)throw Error("Invalid event type");var q=d(M)?!!M.capture:!!M,be=wu(l);if(be||(l[vu]=be=new So(l)),f=be.add(m,f,x,q,F),f.proxy)return f;if(x=C_(),f.proxy=x,x.src=l,x.listener=f,l.addEventListener)ct||(M=q),M===void 0&&(M=!1),l.addEventListener(m.toString(),x,M);else if(l.attachEvent)l.attachEvent(op(m.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return f}function C_(){function l(f){return m.call(l.src,l.listener,f)}const m=P_;return l}function ip(l,m,f,x,M){if(Array.isArray(m))for(var F=0;F<m.length;F++)ip(l,m[F],f,x,M);else x=d(x)?!!x.capture:!!x,f=lp(f),l&&l[Ue]?(l=l.i,m=String(m).toString(),m in l.g&&(F=l.g[m],f=yu(F,f,x,M),-1<f&&(No(F[f]),Array.prototype.splice.call(F,f,1),F.length==0&&(delete l.g[m],l.h--)))):l&&(l=wu(l))&&(m=l.g[m.toString()],l=-1,m&&(l=yu(m,f,x,M)),(f=-1<l?m[l]:null)&&bu(f))}function bu(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[Ue])gu(m.i,l);else{var f=l.type,x=l.proxy;m.removeEventListener?m.removeEventListener(f,x,l.capture):m.detachEvent?m.detachEvent(op(f),x):m.addListener&&m.removeListener&&m.removeListener(x),(f=wu(m))?(gu(f,l),f.h==0&&(f.src=null,m[vu]=null)):No(l)}}}function op(l){return l in Eu?Eu[l]:Eu[l]="on"+l}function P_(l,m){if(l.da)l=!0;else{m=new ut(m,this);var f=l.listener,x=l.ha||l.src;l.fa&&bu(l),l=f.call(x,m)}return l}function wu(l){return l=l[vu],l instanceof So?l:null}var xu="__closure_events_fn_"+(1e9*Math.random()>>>0);function lp(l){return typeof l=="function"?l:(l[xu]||(l[xu]=function(m){return l.handleEvent(m)}),l[xu])}function dt(){Y.call(this),this.i=new So(this),this.M=this,this.F=null}k(dt,Y),dt.prototype[Ue]=!0,dt.prototype.removeEventListener=function(l,m,f,x){ip(this,l,m,f,x)};function Nt(l,m){var f,x=l.F;if(x)for(f=[];x;x=x.F)f.push(x);if(l=l.M,x=m.type||m,typeof m=="string")m=new we(m,l);else if(m instanceof we)m.target=m.target||l;else{var M=m;m=new we(x,l),N(m,M)}if(M=!0,f)for(var F=f.length-1;0<=F;F--){var q=m.g=f[F];M=Io(q,x,!0,m)&&M}if(q=m.g=l,M=Io(q,x,!0,m)&&M,M=Io(q,x,!1,m)&&M,f)for(F=0;F<f.length;F++)q=m.g=f[F],M=Io(q,x,!1,m)&&M}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var f=l.g[m],x=0;x<f.length;x++)No(f[x]);delete l.g[m],l.h--}}this.F=null},dt.prototype.K=function(l,m,f,x){return this.i.add(String(l),m,!1,f,x)},dt.prototype.L=function(l,m,f,x){return this.i.add(String(l),m,!0,f,x)};function Io(l,m,f,x){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,F=0;F<m.length;++F){var q=m[F];if(q&&!q.da&&q.capture==f){var be=q.listener,et=q.ha||q.src;q.fa&&gu(l.i,q),M=be.call(et,x)!==!1&&M}}return M&&!x.defaultPrevented}function cp(l,m,f){if(typeof l=="function")f&&(l=p(l,f));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:c.setTimeout(l,m||0)}function up(l){l.g=cp(()=>{l.g=null,l.i&&(l.i=!1,up(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class R_ extends Y{constructor(m,f){super(),this.m=m,this.l=f,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:up(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(l){Y.call(this),this.h=l,this.g={}}k(Ma,Y);var dp=[];function mp(l){O(l.g,function(m,f){this.g.hasOwnProperty(f)&&bu(m)},l),l.g={}}Ma.prototype.N=function(){Ma.aa.N.call(this),mp(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _u=c.JSON.stringify,D_=c.JSON.parse,L_=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Nu(){}Nu.prototype.h=null;function hp(l){return l.h||(l.h=l.i())}function fp(){}var Va={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Su(){we.call(this,"d")}k(Su,we);function Iu(){we.call(this,"c")}k(Iu,we);var Qr={},pp=null;function To(){return pp=pp||new dt}Qr.La="serverreachability";function gp(l){we.call(this,Qr.La,l)}k(gp,we);function Fa(l){const m=To();Nt(m,new gp(m))}Qr.STAT_EVENT="statevent";function yp(l,m){we.call(this,Qr.STAT_EVENT,l),this.stat=m}k(yp,we);function St(l){const m=To();Nt(m,new yp(m,l))}Qr.Ma="timingevent";function vp(l,m){we.call(this,Qr.Ma,l),this.size=m}k(vp,we);function Ua(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},m)}function ja(){this.g=!0}ja.prototype.xa=function(){this.g=!1};function O_(l,m,f,x,M,F){l.info(function(){if(l.g)if(F)for(var q="",be=F.split("&"),et=0;et<be.length;et++){var fe=be[et].split("=");if(1<fe.length){var mt=fe[0];fe=fe[1];var ht=mt.split("_");q=2<=ht.length&&ht[1]=="type"?q+(mt+"="+fe+"&"):q+(mt+"=redacted&")}}else q=null;else q=F;return"XMLHTTP REQ ("+x+") [attempt "+M+"]: "+m+`
`+f+`
`+q})}function M_(l,m,f,x,M,F,q){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+M+"]: "+m+`
`+f+`
`+F+" "+q})}function Ds(l,m,f,x){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+F_(l,f)+(x?" "+x:"")})}function V_(l,m){l.info(function(){return"TIMEOUT: "+m})}ja.prototype.info=function(){};function F_(l,m){if(!l.g)return m;if(!m)return null;try{var f=JSON.parse(m);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var x=f[l];if(!(2>x.length)){var M=x[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var q=1;q<M.length;q++)M[q]=""}}}}return _u(f)}catch{return m}}var ko={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ep={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tu;function Ao(){}k(Ao,Nu),Ao.prototype.g=function(){return new XMLHttpRequest},Ao.prototype.i=function(){return{}},Tu=new Ao;function lr(l,m,f,x){this.j=l,this.i=m,this.l=f,this.R=x||1,this.U=new Ma(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bp}function bp(){this.i=null,this.g="",this.h=!1}var wp={},ku={};function Au(l,m,f){l.L=1,l.v=Do(Mn(m)),l.m=f,l.P=!0,xp(l,null)}function xp(l,m){l.F=Date.now(),Co(l),l.A=Mn(l.v);var f=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),Mp(f.i,"t",x),l.C=0,f=l.j.J,l.h=new bp,l.g=eg(l.j,f?m:null,!l.m),0<l.O&&(l.M=new R_(p(l.Y,l,l.g),l.O)),m=l.U,f=l.g,x=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(dp[0]=M.toString()),M=dp);for(var F=0;F<M.length;F++){var q=ap(f,M[F],x||m.handleEvent,!1,m.h||m);if(!q)break;m.g[q.key]=q}m=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),Fa(),O_(l.i,l.u,l.A,l.l,l.R,l.m)}lr.prototype.ca=function(l){l=l.target;const m=this.M;m&&Vn(l)==3?m.j():this.Y(l)},lr.prototype.Y=function(l){try{if(l==this.g)e:{const ht=Vn(this.g);var m=this.g.Ba();const Ms=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||$p(this.g)))){this.J||ht!=4||m==7||(m==8||0>=Ms?Fa(3):Fa(2)),Cu(this);var f=this.g.Z();this.X=f;t:if(_p(this)){var x=$p(this.g);l="";var M=x.length,F=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),Ba(this);var q="";break t}this.h.i=new c.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,l+=this.h.i.decode(x[m],{stream:!(F&&m==M-1)});x.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,M_(this.i,this.u,this.A,this.l,this.R,ht,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,et=this.g;if((be=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(be)){var fe=be;break t}}fe=null}if(f=fe)Ds(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pu(this,f);else{this.o=!1,this.s=3,St(12),Jr(this),Ba(this);break e}}if(this.P){f=!0;let mn;for(;!this.J&&this.C<q.length;)if(mn=U_(this,q),mn==ku){ht==4&&(this.s=4,St(14),f=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==wp){this.s=4,St(15),Ds(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Ds(this.i,this.l,mn,null),Pu(this,mn);if(_p(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||q.length!=0||this.h.h||(this.s=1,St(16),f=!1),this.o=this.o&&f,!f)Ds(this.i,this.l,q,"[Invalid Chunked Response]"),Jr(this),Ba(this);else if(0<q.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Vu(mt),mt.M=!0,St(11))}}else Ds(this.i,this.l,q,null),Pu(this,q);ht==4&&Jr(this),this.o&&!this.J&&(ht==4?Qp(this.j,this):(this.o=!1,Co(this)))}else nN(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),Jr(this),Ba(this)}}}catch{}finally{}};function _p(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function U_(l,m){var f=l.C,x=m.indexOf(`
`,f);return x==-1?ku:(f=Number(m.substring(f,x)),isNaN(f)?wp:(x+=1,x+f>m.length?ku:(m=m.slice(x,x+f),l.C=x+f,m)))}lr.prototype.cancel=function(){this.J=!0,Jr(this)};function Co(l){l.S=Date.now()+l.I,Np(l,l.I)}function Np(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ua(p(l.ba,l),m)}function Cu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}lr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(V_(this.i,this.A),this.L!=2&&(Fa(),St(17)),Jr(this),this.s=2,Ba(this)):Np(this,this.S-l)};function Ba(l){l.j.G==0||l.J||Qp(l.j,l)}function Jr(l){Cu(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,mp(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function Pu(l,m){try{var f=l.j;if(f.G!=0&&(f.g==l||Ru(f.h,l))){if(!l.K&&Ru(f.h,l)&&f.G==3){try{var x=f.Da.g.parse(m)}catch{x=null}if(Array.isArray(x)&&x.length==3){var M=x;if(M[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)Uo(f),Vo(f);else break e;Mu(f),St(18)}}else f.za=M[1],0<f.za-f.T&&37500>M[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ua(p(f.Za,f),6e3));if(1>=Tp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Zr(f,11)}else if((l.K||f.g==l)&&Uo(f),!w(m))for(M=f.Da.g.parse(m),m=0;m<M.length;m++){let fe=M[m];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];const mt=fe[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));const ht=fe[4];ht!=null&&(f.Aa=ht,f.j.info("SVER="+f.Aa));const Ms=fe[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(x=1.5*Ms,f.L=x,f.j.info("backChannelRequestTimeoutMs_="+x)),x=f;const mn=l.g;if(mn){const Bo=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var F=x.h;F.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Du(F,F.h),F.h=null))}if(x.D){const Fu=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fu&&(x.ya=Fu,_e(x.I,x.D,Fu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),x=f;var q=l;if(x.qa=Zp(x,x.J?x.ia:null,x.W),q.K){kp(x.h,q);var be=q,et=x.L;et&&(be.I=et),be.B&&(Cu(be),Co(be)),x.g=q}else Kp(x);0<f.i.length&&Fo(f)}else fe[0]!="stop"&&fe[0]!="close"||Zr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Zr(f,7):Ou(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}Fa(4)}catch{}}var j_=class{constructor(l,m){this.g=l,this.map=m}};function Sp(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ip(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Tp(l){return l.h?1:l.g?l.g.size:0}function Ru(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function Du(l,m){l.g?l.g.add(m):l.h=m}function kp(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}Sp.prototype.cancel=function(){if(this.i=Ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ap(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const f of l.g.values())m=m.concat(f.D);return m}return A(l.i)}function B_(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var m=[],f=l.length,x=0;x<f;x++)m.push(l[x]);return m}m=[],f=0;for(x in l)m[f++]=l[x];return m}function z_(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var m=[];l=l.length;for(var f=0;f<l;f++)m.push(f);return m}m=[],f=0;for(const x in l)m[f++]=x;return m}}}function Cp(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var f=z_(l),x=B_(l),M=x.length,F=0;F<M;F++)m.call(void 0,x[F],f&&f[F],l)}var Pp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $_(l,m){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var x=l[f].indexOf("="),M=null;if(0<=x){var F=l[f].substring(0,x);M=l[f].substring(x+1)}else F=l[f];m(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Xr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Xr){this.h=l.h,Po(this,l.j),this.o=l.o,this.g=l.g,Ro(this,l.s),this.l=l.l;var m=l.i,f=new qa;f.i=m.i,m.g&&(f.g=new Map(m.g),f.h=m.h),Rp(this,f),this.m=l.m}else l&&(m=String(l).match(Pp))?(this.h=!1,Po(this,m[1]||"",!0),this.o=za(m[2]||""),this.g=za(m[3]||"",!0),Ro(this,m[4]),this.l=za(m[5]||"",!0),Rp(this,m[6]||"",!0),this.m=za(m[7]||"")):(this.h=!1,this.i=new qa(null,this.h))}Xr.prototype.toString=function(){var l=[],m=this.j;m&&l.push($a(m,Dp,!0),":");var f=this.g;return(f||m=="file")&&(l.push("//"),(m=this.o)&&l.push($a(m,Dp,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push($a(f,f.charAt(0)=="/"?H_:W_,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",$a(f,K_)),l.join("")};function Mn(l){return new Xr(l)}function Po(l,m,f){l.j=f?za(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Ro(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function Rp(l,m,f){m instanceof qa?(l.i=m,Y_(l.i,l.h)):(f||(m=$a(m,G_)),l.i=new qa(m,l.h))}function _e(l,m,f){l.i.set(m,f)}function Do(l){return _e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function za(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function $a(l,m,f){return typeof l=="string"?(l=encodeURI(l).replace(m,q_),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function q_(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Dp=/[#\/\?@]/g,W_=/[#\?:]/g,H_=/[#\?]/g,G_=/[#\?@]/g,K_=/#/g;function qa(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function cr(l){l.g||(l.g=new Map,l.h=0,l.i&&$_(l.i,function(m,f){l.add(decodeURIComponent(m.replace(/\+/g," ")),f)}))}t=qa.prototype,t.add=function(l,m){cr(this),this.i=null,l=Ls(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(m),this.h+=1,this};function Lp(l,m){cr(l),m=Ls(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function Op(l,m){return cr(l),m=Ls(l,m),l.g.has(m)}t.forEach=function(l,m){cr(this),this.g.forEach(function(f,x){f.forEach(function(M){l.call(m,M,x,this)},this)},this)},t.na=function(){cr(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),f=[];for(let x=0;x<m.length;x++){const M=l[x];for(let F=0;F<M.length;F++)f.push(m[x])}return f},t.V=function(l){cr(this);let m=[];if(typeof l=="string")Op(this,l)&&(m=m.concat(this.g.get(Ls(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)m=m.concat(l[f])}return m},t.set=function(l,m){return cr(this),this.i=null,l=Ls(this,l),Op(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},t.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function Mp(l,m,f){Lp(l,m),0<f.length&&(l.i=null,l.g.set(Ls(l,m),A(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var f=0;f<m.length;f++){var x=m[f];const F=encodeURIComponent(String(x)),q=this.V(x);for(x=0;x<q.length;x++){var M=F;q[x]!==""&&(M+="="+encodeURIComponent(String(q[x]))),l.push(M)}}return this.i=l.join("&")};function Ls(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function Y_(l,m){m&&!l.j&&(cr(l),l.i=null,l.g.forEach(function(f,x){var M=x.toLowerCase();x!=M&&(Lp(this,x),Mp(this,M,f))},l)),l.j=m}function Q_(l,m){const f=new ja;if(c.Image){const x=new Image;x.onload=b(ur,f,"TestLoadImage: loaded",!0,m,x),x.onerror=b(ur,f,"TestLoadImage: error",!1,m,x),x.onabort=b(ur,f,"TestLoadImage: abort",!1,m,x),x.ontimeout=b(ur,f,"TestLoadImage: timeout",!1,m,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else m(!1)}function J_(l,m){const f=new ja,x=new AbortController,M=setTimeout(()=>{x.abort(),ur(f,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:x.signal}).then(F=>{clearTimeout(M),F.ok?ur(f,"TestPingServer: ok",!0,m):ur(f,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),ur(f,"TestPingServer: error",!1,m)})}function ur(l,m,f,x,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),x(f)}catch{}}function X_(){this.g=new L_}function Z_(l,m,f){const x=f||"";try{Cp(l,function(M,F){let q=M;d(M)&&(q=_u(M)),m.push(x+F+"="+encodeURIComponent(q))})}catch(M){throw m.push(x+"type="+encodeURIComponent("_badmap")),M}}function Lo(l){this.l=l.Ub||null,this.j=l.eb||!1}k(Lo,Nu),Lo.prototype.g=function(){return new Oo(this.l,this.j)},Lo.prototype.i=function(l){return function(){return l}}({});function Oo(l,m){dt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Oo,dt),t=Oo.prototype,t.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,Ha(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||c).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?Wa(this):Ha(this),this.readyState==3&&Vp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Wa(this))},t.Qa=function(l){this.g&&(this.response=l,Wa(this))},t.ga=function(){this.g&&Wa(this)};function Wa(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ha(l)}t.setRequestHeader=function(l,m){this.u.append(l,m)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var f=m.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=m.next();return l.join(`\r
`)};function Ha(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Fp(l){let m="";return O(l,function(f,x){m+=x,m+=":",m+=f,m+=`\r
`}),m}function Lu(l,m,f){e:{for(x in f){var x=!1;break e}x=!0}x||(f=Fp(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):_e(l,m,f))}function Le(l){dt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Le,dt);var eN=/^https?$/i,tN=["POST","PUT"];t=Le.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,m,f,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tu.g(),this.v=this.o?hp(this.o):hp(Tu),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(F){Up(this,F);return}if(l=f||"",f=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var M in x)f.set(M,x[M]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const F of x.keys())f.set(F,x.get(F));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(f.keys()).find(F=>F.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(tN,m,void 0))||x||M||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,q]of f)this.g.setRequestHeader(F,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zp(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){Up(this,F)}};function Up(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,jp(l),Mo(l)}function jp(l){l.A||(l.A=!0,Nt(l,"complete"),Nt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Nt(this,"complete"),Nt(this,"abort"),Mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mo(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Bp(this):this.bb())},t.bb=function(){Bp(this)};function Bp(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Vn(l)!=4||l.Z()!=2)){if(l.u&&Vn(l)==4)cp(l.Ea,0,l);else if(Nt(l,"readystatechange"),Vn(l)==4){l.h=!1;try{const q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var f;if(!(f=m)){var x;if(x=q===0){var M=String(l.D).match(Pp)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),x=!eN.test(M?M.toLowerCase():"")}f=x}if(f)Nt(l,"complete"),Nt(l,"success");else{l.m=6;try{var F=2<Vn(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",jp(l)}}finally{Mo(l)}}}}function Mo(l,m){if(l.g){zp(l);const f=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||Nt(l,"ready");try{f.onreadystatechange=x}catch{}}}function zp(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Vn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),D_(m)}};function $p(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function nN(l){const m={};l=(l.g&&2<=Vn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(w(l[x]))continue;var f=v(l[x]);const M=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const F=m[M]||[];m[M]=F,F.push(f)}_(m,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(l,m,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||m}function qp(l){this.Aa=0,this.i=[],this.j=new ja,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,l),this.cb=Ga("retryDelaySeedMs",1e4,l),this.Wa=Ga("forwardChannelMaxRetries",2,l),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Sp(l&&l.concurrentRequestLimit),this.Da=new X_,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qp.prototype,t.la=8,t.G=1,t.connect=function(l,m,f,x){St(0),this.W=l,this.H=m||{},f&&x!==void 0&&(this.H.OSID=f,this.H.OAID=x),this.F=this.X,this.I=Zp(this,null,this.W),Fo(this)};function Ou(l){if(Wp(l),l.G==3){var m=l.U++,f=Mn(l.I);if(_e(f,"SID",l.K),_e(f,"RID",m),_e(f,"TYPE","terminate"),Ka(l,f),m=new lr(l,l.j,m),m.L=2,m.v=Do(Mn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(m.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=m.v,f=!0),f||(m.g=eg(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Co(m)}Xp(l)}function Vo(l){l.g&&(Vu(l),l.g.cancel(),l.g=null)}function Wp(l){Vo(l),l.u&&(c.clearTimeout(l.u),l.u=null),Uo(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Fo(l){if(!Ip(l.h)&&!l.s){l.s=!0;var m=l.Ga;ve||B(),C||(ve(),C=!0),P.add(m,l),l.B=0}}function rN(l,m){return Tp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ua(p(l.Ga,l,m),Jp(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new lr(this,this.j,l);let F=this.o;if(this.S&&(F?(F=y(F),N(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var m=0,f=0;f<this.i.length;f++){t:{var x=this.i[f];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(m+=x,4096<m){m=f;break e}if(m===4096||f===this.i.length-1){m=f+1;break e}}m=1e3}else m=1e3;m=Gp(this,M,m),f=Mn(this.I),_e(f,"RID",l),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),Ka(this,f),F&&(this.O?m="headers="+encodeURIComponent(String(Fp(F)))+"&"+m:this.m&&Lu(f,this.m,F)),Du(this.h,M),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",m),_e(f,"SID","null"),M.T=!0,Au(M,f,null)):Au(M,f,m),this.G=2}}else this.G==3&&(l?Hp(this,l):this.i.length==0||Ip(this.h)||Hp(this))};function Hp(l,m){var f;m?f=m.l:f=l.U++;const x=Mn(l.I);_e(x,"SID",l.K),_e(x,"RID",f),_e(x,"AID",l.T),Ka(l,x),l.m&&l.o&&Lu(x,l.m,l.o),f=new lr(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),m&&(l.i=m.D.concat(l.i)),m=Gp(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Du(l.h,f),Au(f,x,m)}function Ka(l,m){l.H&&O(l.H,function(f,x){_e(m,x,f)}),l.l&&Cp({},function(f,x){_e(m,x,f)})}function Gp(l,m,f){f=Math.min(l.i.length,f);var x=l.l?p(l.l.Na,l.l,l):null;e:{var M=l.i;let F=-1;for(;;){const q=["count="+f];F==-1?0<f?(F=M[0].g,q.push("ofs="+F)):F=0:q.push("ofs="+F);let be=!0;for(let et=0;et<f;et++){let fe=M[et].g;const mt=M[et].map;if(fe-=F,0>fe)F=Math.max(0,M[et].g-100),be=!1;else try{Z_(mt,q,"req"+fe+"_")}catch{x&&x(mt)}}if(be){x=q.join("&");break e}}}return l=l.i.splice(0,f),m.D=l,x}function Kp(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;ve||B(),C||(ve(),C=!0),P.add(m,l),l.v=0}}function Mu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ua(p(l.Fa,l),Jp(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Yp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ua(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Vo(this),Yp(this))};function Vu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Yp(l){l.g=new lr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=Mn(l.qa);_e(m,"RID","rpc"),_e(m,"SID",l.K),_e(m,"AID",l.T),_e(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&_e(m,"TO",l.ja),_e(m,"TYPE","xmlhttp"),Ka(l,m),l.m&&l.o&&Lu(m,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=Do(Mn(m)),f.m=null,f.P=!0,xp(f,l)}t.Za=function(){this.C!=null&&(this.C=null,Vo(this),Mu(this),St(19))};function Uo(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Qp(l,m){var f=null;if(l.g==m){Uo(l),Vu(l),l.g=null;var x=2}else if(Ru(l.h,m))f=m.D,kp(l.h,m),x=1;else return;if(l.G!=0){if(m.o)if(x==1){f=m.m?m.m.length:0,m=Date.now()-m.F;var M=l.B;x=To(),Nt(x,new vp(x,f)),Fo(l)}else Kp(l);else if(M=m.s,M==3||M==0&&0<m.X||!(x==1&&rN(l,m)||x==2&&Mu(l)))switch(f&&0<f.length&&(m=l.h,m.i=m.i.concat(f)),M){case 1:Zr(l,5);break;case 4:Zr(l,10);break;case 3:Zr(l,6);break;default:Zr(l,2)}}}function Jp(l,m){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*m}function Zr(l,m){if(l.j.info("Error code "+m),m==2){var f=p(l.fb,l),x=l.Xa;const M=!x;x=new Xr(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Po(x,"https"),Do(x),M?Q_(x.toString(),f):J_(x.toString(),f)}else St(2);l.G=0,l.l&&l.l.sa(m),Xp(l),Wp(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Xp(l){if(l.G=0,l.ka=[],l.l){const m=Ap(l.h);(m.length!=0||l.i.length!=0)&&(D(l.ka,m),D(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function Zp(l,m,f){var x=f instanceof Xr?Mn(f):new Xr(f);if(x.g!="")m&&(x.g=m+"."+x.g),Ro(x,x.s);else{var M=c.location;x=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var F=new Xr(null);x&&Po(F,x),m&&(F.g=m),M&&Ro(F,M),f&&(F.l=f),x=F}return f=l.D,m=l.ya,f&&m&&_e(x,f,m),_e(x,"VER",l.la),Ka(l,x),x}function eg(l,m,f){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new Le(new Lo({eb:f})):new Le(l.pa),m.Ha(l.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tg(){}t=tg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function jo(){}jo.prototype.g=function(l,m){return new qt(l,m)};function qt(l,m){dt.call(this),this.g=new qp(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!w(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new Os(this)}k(qt,dt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Ou(this.g)},qt.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=_u(l),l=f);m.i.push(new j_(m.Ya++,l)),m.G==3&&Fo(m)},qt.prototype.N=function(){this.g.l=null,delete this.j,Ou(this.g),delete this.g,qt.aa.N.call(this)};function ng(l){Su.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const f in m){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}k(ng,Su);function rg(){Iu.call(this),this.status=1}k(rg,Iu);function Os(l){this.g=l}k(Os,tg),Os.prototype.ua=function(){Nt(this.g,"a")},Os.prototype.ta=function(l){Nt(this.g,new ng(l))},Os.prototype.sa=function(l){Nt(this.g,new rg)},Os.prototype.ra=function(){Nt(this.g,"b")},jo.prototype.createWebChannel=jo.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,_w=function(){return new jo},xw=function(){return To()},ww=Qr,Dm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,kl=ko,Ep.COMPLETE="complete",bw=Ep,fp.EventType=Va,Va.OPEN="a",Va.CLOSE="b",Va.ERROR="c",Va.MESSAGE="d",dt.prototype.listen=dt.prototype.K,di=fp,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,Ew=Le}).apply(typeof il<"u"?il:typeof self<"u"?self:typeof window<"u"?window:{});const X0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new zc("@firebase/firestore");function ri(){return ws.logLevel}function K(t,...e){if(ws.logLevel<=ue.DEBUG){const n=e.map(cf);ws.debug(`Firestore (${Ra}): ${t}`,...n)}}function tr(t,...e){if(ws.logLevel<=ue.ERROR){const n=e.map(cf);ws.error(`Firestore (${Ra}): ${t}`,...n)}}function va(t,...e){if(ws.logLevel<=ue.WARN){const n=e.map(cf);ws.warn(`Firestore (${Ra}): ${t}`,...n)}}function cf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${Ra}) INTERNAL ASSERTION FAILED: `+t;throw tr(e),new Error(e)}function ye(t,e){t||ne()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class T1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class k1{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Kn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Kn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new Nw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new yt(e)}}class A1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new A1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class P1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new P1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=D1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Ea(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return le.fromMillis(Date.now())}static fromDate(e){return le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new le(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new le(0,0))}static max(){return new re(new le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Zi{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const L1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Zi{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return L1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new W(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new W(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Se.fromString(e))}static fromName(e){return new Q(Se.fromString(e).popFirst(5))}static empty(){return new Q(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Se(e.slice()))}}function O1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new le(n+1,0):new le(n,r));return new jr(s,Q.empty(),e)}function M1(t){return new jr(t.readTime,t.key,-1)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(re.min(),Q.empty(),-1)}static max(){return new jr(re.max(),Q.empty(),-1)}}function V1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==F1)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++c,c===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function j1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}uf.oe=-1;function Gc(t){return t==null}function hc(t){return t===0&&1/t==-1/0}function B1(t){return typeof t=="number"&&Number.isInteger(t)&&!hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ps(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Iw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rt.RED,this.left=s??rt.EMPTY,this.right=i??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,s,i){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ey(this.data.getIterator())}getIteratorFrom(e){return new ey(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class ey{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new it(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Tw("Invalid base64 string: "+i):i}}(e);return new lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const z1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(ye(!!t),typeof t=="string"){let e=0;const n=z1.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xs(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mf(t){const e=t.mapValue.fields.__previous_value__;return df(e)?mf(e):e}function eo(t){const e=Br(t.mapValue.fields.__local_write_time__.timestampValue);return new le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n,r,s,i,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class to{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new to("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof to&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll={mapValue:{}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?df(t)?4:W1(t)?9007199254740991:q1(t)?10:11:ne()}function Ln(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eo(t).isEqual(eo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Br(s.timestampValue),c=Br(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return xs(s.bytesValue).isEqual(xs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),c=je(i.doubleValue);return o===c?hc(o)===hc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Ea(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Z0(o)!==Z0(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ln(o[u],c[u])))return!1;return!0}(t,e);default:return ne()}}function no(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function ba(t,e){if(t===e)return 0;const n=_s(t),r=_s(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=je(i.integerValue||i.doubleValue),u=je(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return ty(t.timestampValue,e.timestampValue);case 4:return ty(eo(t),eo(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(i,o){const c=xs(i),u=xs(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=pe(c[d],u[d]);if(h!==0)return h}return pe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=pe(je(i.latitude),je(o.latitude));return c!==0?c:pe(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ny(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,h;const g=i.fields||{},p=o.fields||{},b=(c=g.value)===null||c===void 0?void 0:c.arrayValue,k=(u=p.value)===null||u===void 0?void 0:u.arrayValue,A=pe(((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0,((h=k==null?void 0:k.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:ny(b,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ll.mapValue&&o===ll.mapValue)return 0;if(i===ll.mapValue)return 1;if(o===ll.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const p=pe(u[g],h[g]);if(p!==0)return p;const b=ba(c[u[g]],d[h[g]]);if(b!==0)return b}return pe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ne()}}function ty(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=Br(t),r=Br(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function ny(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ba(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function wa(t){return Lm(t)}function Lm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Lm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Lm(n.fields[o])}`;return s+"}"}(t.mapValue):ne()}function ry(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Om(t){return!!t&&"integerValue"in t}function hf(t){return!!t&&"arrayValue"in t}function sy(t){return!!t&&"nullValue"in t}function ay(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Al(t){return!!t&&"mapValue"in t}function q1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Si(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ps(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Si(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Si(t.arrayValue.values[n]);return e}return Object.assign({},t)}function W1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Al(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Si(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Si(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Al(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Al(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ps(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Lt(Si(this.value))}}function kw(t){const e=[];return Ps(t.fields,(n,r)=>{const s=new st([n]);if(Al(r)){const i=kw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Et(e,0,re.min(),re.min(),re.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,s){return new Et(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new Et(e,2,n,re.min(),re.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,re.min(),re.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.position=e,this.inclusive=n}}function iy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=ba(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function oy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n="asc"){this.field=e,this.dir=n}}function H1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{}class Ge extends Aw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new K1(e,n,r):n==="array-contains"?new J1(e,r):n==="in"?new X1(e,r):n==="not-in"?new Z1(e,r):n==="array-contains-any"?new eC(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Y1(e,r):new Q1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ba(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(ba(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends Aw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new xn(e,n)}matches(e){return Cw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Cw(t){return t.op==="and"}function Pw(t){return G1(t)&&Cw(t)}function G1(t){for(const e of t.filters)if(e instanceof xn)return!1;return!0}function Mm(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+wa(t.value);if(Pw(t))return t.filters.map(e=>Mm(e)).join(",");{const e=t.filters.map(n=>Mm(n)).join(",");return`${t.op}(${e})`}}function Rw(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&Ln(r.value,s.value)}(t,e):t instanceof xn?function(r,s){return s instanceof xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&Rw(o,s.filters[c]),!0):!1}(t,e):void ne()}function Dw(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${wa(n.value)}`}(t):t instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(Dw).join(" ,")+"}"}(t):"Filter"}class K1 extends Ge{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y1 extends Ge{constructor(e,n){super(e,"in",n),this.keys=Lw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Q1 extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=Lw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Lw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class J1 extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hf(n)&&no(n.arrayValue,this.value)}}class X1 extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&no(this.value.arrayValue,n)}}class Z1 extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(no(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!no(this.value.arrayValue,n)}}class eC extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>no(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function ly(t,e=null,n=[],r=[],s=null,i=null,o=null){return new tC(t,e,n,r,s,i,o)}function ff(t){const e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wa(r)).join(",")),e.ue=n}return e.ue}function pf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!H1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Rw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oy(t.startAt,e.startAt)&&oy(t.endAt,e.endAt)}function Vm(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nC(t,e,n,r,s,i,o,c){return new Da(t,e,n,r,s,i,o,c)}function Kc(t){return new Da(t)}function cy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ow(t){return t.collectionGroup!==null}function Ii(t){const e=se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new it(st.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ro(i,r))}),n.has(st.keyField().canonicalString())||e.ce.push(new ro(st.keyField(),r))}return e.ce}function Rn(t){const e=se(t);return e.le||(e.le=rC(e,Ii(t))),e.le}function rC(t,e){if(t.limitType==="F")return ly(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ro(s.field,i)});const n=t.endAt?new fc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fc(t.startAt.position,t.startAt.inclusive):null;return ly(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fm(t,e){const n=t.filters.concat([e]);return new Da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pc(t,e,n){return new Da(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yc(t,e){return pf(Rn(t),Rn(e))&&t.limitType===e.limitType}function Mw(t){return`${ff(Rn(t))}|lt:${t.limitType}`}function Fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Dw(s)).join(", ")}]`),Gc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>wa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>wa(s)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function Qc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ii(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=iy(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Ii(r),s)||r.endAt&&!function(o,c,u){const d=iy(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Ii(r),s))}(t,e)}function sC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Vw(t){return(e,n)=>{let r=!1;for(const s of Ii(t)){const i=aC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function aC(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?ba(u,d):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Iw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new De(Q.comparator);function nr(){return iC}const Fw=new De(Q.comparator);function mi(...t){let e=Fw;for(const n of t)e=e.insert(n.key,n);return e}function Uw(t){let e=Fw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function os(){return Ti()}function jw(){return Ti()}function Ti(){return new La(t=>t.toString(),(t,e)=>t.isEqual(e))}const oC=new De(Q.comparator),lC=new it(Q.comparator);function ce(...t){let e=lC;for(const n of t)e=e.add(n);return e}const cC=new it(pe);function uC(){return cC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function Bw(t){return{integerValue:""+t}}function dC(t,e){return B1(e)?Bw(e):gf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this._=void 0}}function mC(t,e,n){return t instanceof gc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&df(i)&&(i=mf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof so?$w(t,e):t instanceof ao?qw(t,e):function(s,i){const o=zw(s,i),c=uy(o)+uy(s.Pe);return Om(o)&&Om(s.Pe)?Bw(c):gf(s.serializer,c)}(t,e)}function hC(t,e,n){return t instanceof so?$w(t,e):t instanceof ao?qw(t,e):n}function zw(t,e){return t instanceof yc?function(r){return Om(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class gc extends Jc{}class so extends Jc{constructor(e){super(),this.elements=e}}function $w(t,e){const n=Ww(e);for(const r of t.elements)n.some(s=>Ln(s,r))||n.push(r);return{arrayValue:{values:n}}}class ao extends Jc{constructor(e){super(),this.elements=e}}function qw(t,e){let n=Ww(e);for(const r of t.elements)n=n.filter(s=>!Ln(s,r));return{arrayValue:{values:n}}}class yc extends Jc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function uy(t){return je(t.integerValue||t.doubleValue)}function Ww(t){return hf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof so&&s instanceof so||r instanceof ao&&s instanceof ao?Ea(r.elements,s.elements,Ln):r instanceof yc&&s instanceof yc?Ln(r.Pe,s.Pe):r instanceof gc&&s instanceof gc}(t.transform,e.transform)}class pC{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xc{}function Hw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yf(t.key,on.none()):new Eo(t.key,t.data,on.none());{const n=t.data,r=Lt.empty();let s=new it(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Yr(t.key,r,new Yt(s.toArray()),on.none())}}function gC(t,e,n){t instanceof Eo?function(s,i,o){const c=s.value.clone(),u=my(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(s,i,o){if(!Cl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=my(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Gw(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ki(t,e,n,r){return t instanceof Eo?function(i,o,c,u){if(!Cl(i.precondition,o))return c;const d=i.value.clone(),h=hy(i.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yr?function(i,o,c,u){if(!Cl(i.precondition,o))return c;const d=hy(i.fieldTransforms,u,o),h=o.data;return h.setAll(Gw(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,c){return Cl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function yC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=zw(r.transform,s||null);i!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,i))}return n||null}function dy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ea(r,s,(i,o)=>fC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Eo extends Xc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends Xc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Gw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function my(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,hC(o,c,n[s]))}return r}function hy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,mC(i,o,e))}return r}class yf extends Xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vC extends Xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&gC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ki(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ki(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=Hw(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(n,r)=>dy(n,r))&&Ea(this.baseMutations,e.baseMutations,(n,r)=>dy(n,r))}}class vf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return oC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new vf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,de;function xC(t){switch(t){default:return ne();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function Kw(t){if(t===void 0)return tr("GRPC error has no .code"),j.UNKNOWN;switch(t){case We.OK:return j.OK;case We.CANCELLED:return j.CANCELLED;case We.UNKNOWN:return j.UNKNOWN;case We.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case We.INTERNAL:return j.INTERNAL;case We.UNAVAILABLE:return j.UNAVAILABLE;case We.UNAUTHENTICATED:return j.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case We.NOT_FOUND:return j.NOT_FOUND;case We.ALREADY_EXISTS:return j.ALREADY_EXISTS;case We.PERMISSION_DENIED:return j.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case We.ABORTED:return j.ABORTED;case We.OUT_OF_RANGE:return j.OUT_OF_RANGE;case We.UNIMPLEMENTED:return j.UNIMPLEMENTED;case We.DATA_LOSS:return j.DATA_LOSS;default:return ne()}}(de=We||(We={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new ds([4294967295,4294967295],0);function fy(t){const e=_C().encode(t),n=new vw;return n.update(e),new Uint8Array(n.digest())}function py(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ds([n,r],0),new ds([s,i],0)]}class Ef{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hi(`Invalid padding: ${n}`);if(r<0)throw new hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ds.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ds.fromNumber(r)));return s.compare(NC)===1&&(s=new ds([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fy(e),[r,s]=py(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ef(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=fy(e),[r,s]=py(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,bo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zc(re.min(),s,new De(pe),nr(),ce())}}class bo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bo(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Yw{constructor(e,n){this.targetId=e,this.me=n}}class Qw{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class gy{constructor(){this.fe=0,this.ge=vy(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne()}}),new bo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=vy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SC{constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=yy(),this.Qe=new De(pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Vm(i))if(r===0){const o=new Q(i.path);this.Ue(n,o,Et.newNoDocument(o,re.min()))}else ye(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=xs(r).toUint8Array()}catch(u){if(u instanceof Tw)return va("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ef(o,s,i)}catch(u){return va(u instanceof hi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Vm(c.target)){const u=new Q(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Et.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ce();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Zc(e,n,this.Qe,this.ke,r);return this.ke=nr(),this.qe=yy(),this.Qe=new De(pe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new gy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new it(pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function yy(){return new De(Q.comparator)}function vy(){return new De(Q.comparator)}const IC={asc:"ASCENDING",desc:"DESCENDING"},TC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kC={and:"AND",or:"OR"};class AC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Um(t,e){return t.useProto3Json||Gc(e)?e:{value:e}}function vc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CC(t,e){return vc(t,e.toTimestamp())}function Dn(t){return ye(!!t),re.fromTimestamp(function(n){const r=Br(n);return new le(r.seconds,r.nanos)}(t))}function bf(t,e){return jm(t,e).canonicalString()}function jm(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Xw(t){const e=Se.fromString(t);return ye(rx(e)),e}function Bm(t,e){return bf(t.databaseId,e.path)}function Ed(t,e){const n=Xw(e);if(n.get(1)!==t.databaseId.projectId)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(ex(n))}function Zw(t,e){return bf(t.databaseId,e)}function PC(t){const e=Xw(t);return e.length===4?Se.emptyPath():ex(e)}function zm(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ex(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ey(t,e,n){return{name:Bm(t,e),fields:n.value.mapValue.fields}}function RC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ye(h===void 0||typeof h=="string"),lt.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const h=d.code===void 0?j.UNKNOWN:Kw(d.code);return new W(h,d.message||"")}(o);n=new Qw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ed(t,r.document.name),i=Dn(r.document.updateTime),o=r.document.createTime?Dn(r.document.createTime):re.min(),c=new Lt({mapValue:{fields:r.document.fields}}),u=Et.newFoundDocument(s,i,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Pl(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ed(t,r.document),i=r.readTime?Dn(r.readTime):re.min(),o=Et.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Pl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ed(t,r.document),i=r.removedTargetIds||[];n=new Pl([],i,s,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new wC(s,i),c=r.targetId;n=new Yw(c,o)}}return n}function DC(t,e){let n;if(e instanceof Eo)n={update:Ey(t,e.key,e.value)};else if(e instanceof yf)n={delete:Bm(t,e.key)};else if(e instanceof Yr)n={update:Ey(t,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof vC))return ne();n={verify:Bm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof gc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof so)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ao)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof yc)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:CC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne()}(t,e.precondition)),n}function LC(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Dn(s.updateTime):Dn(i);return o.isEqual(re.min())&&(o=Dn(i)),new pC(o,s.transformResults||[])}(n,e))):[]}function OC(t,e){return{documents:[Zw(t,e.path)]}}function MC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Zw(t,s);const i=function(d){if(d.length!==0)return nx(xn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Us(p.field),direction:UC(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Um(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function VC(t){let e=PC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(g){const p=tx(g);return p instanceof xn&&Pw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(p=>function(k){return new ro(js(k.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(p))}(n.orderBy));let c=null;n.limit&&(c=function(g){let p;return p=typeof g=="object"?g.value:g,Gc(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(g){const p=!!g.before,b=g.values||[];return new fc(b,p)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const p=!g.before,b=g.values||[];return new fc(b,p)}(n.endAt)),nC(e,s,o,i,c,"F",u,d)}function FC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=js(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=js(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=js(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=js(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(js(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(r=>tx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function UC(t){return IC[t]}function jC(t){return TC[t]}function BC(t){return kC[t]}function Us(t){return{fieldPath:t.canonicalString()}}function js(t){return st.fromServerFormat(t.fieldPath)}function nx(t){return t instanceof Ge?function(n){if(n.op==="=="){if(ay(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if(sy(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ay(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if(sy(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:jC(n.op),value:n.value}}}(t):t instanceof xn?function(n){const r=n.getFilters().map(s=>nx(s));return r.length===1?r[0]:{compositeFilter:{op:BC(n.op),filters:r}}}(t):ne()}function zC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,s,i=re.min(),o=re.min(),c=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.ct=e}}function qC(t){const e=VC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.un=new HC}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(jr.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class HC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new it(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new it(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xa(0)}static kn(){return new xa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.changes=new La(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ki(r.mutation,s,Yt.empty(),le.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=mi();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=nr();const o=Ti(),c=function(){return Ti()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Yr)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),ki(h.mutation,d,h.mutation.getFieldMask(),le.now())):o.set(d.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var g;return c.set(d,new KC(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Ti();let s=new De((o,c)=>o-c),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Yt.empty();h=c.applyToLocalView(d,h),r.set(u,h);const g=(s.get(c.batchId)||ce()).add(u);s=s.insert(c.batchId,g)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,g=jw();h.forEach(p=>{if(!i.has(p)){const b=Hw(n.get(p),r.get(p));b!==null&&g.set(p,b),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ow(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(os());let c=-1,u=i;return o.next(d=>z.forEach(d,(h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),i.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ce())).next(h=>({batchId:c,changes:Uw(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=mi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=mi();return this.indexManager.getCollectionParents(e,i).next(c=>z.forEach(c,u=>{const d=function(g,p){return new Da(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((g,p)=>{o=o.insert(g,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Et.newInvalidDocument(h)))});let c=mi();return o.forEach((u,d)=>{const h=i.get(u);h!==void 0&&ki(h.mutation,d,Yt.empty(),le.now()),Qc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Dn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:qC(s.bundledQuery),readTime:Dn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.overlays=new De(Q.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=os();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=os(),i=n.length+1,o=new Q(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=os(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=os(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=s)););return z.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bC(n,r));let i=this.Ir.get(n);i===void 0&&(i=ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this.Tr=new it(Je.Er),this.dr=new it(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new Se([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new Se([])),r=new Je(n,e),s=new Je(n,e+1);let i=ce();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new it(Je.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new EC(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new Je(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(pe);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new Je(new Q(i),0);let c=new it(pe);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},o),z.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.Mr=e,this.docs=function(){return new De(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Et.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=nr();const o=n.path,c=new Q(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||V1(M1(h),r)<=0||(s.has(h.key)||Qc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tP(this)}getSize(e){return z.resolve(this.size)}}class tP extends GC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.persistence=e,this.Nr=new La(n=>ff(n),pf),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wf,this.targetCount=0,this.kr=xa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new uf(0),this.Kr=!1,this.Kr=!0,this.$r=new XC,this.referenceDelegate=e(this),this.Ur=new nP(this),this.indexManager=new WC,this.remoteDocumentCache=function(s){return new eP(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $C(n),this.Gr=new QC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ZC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new sP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class sP extends U1{constructor(e){super(),this.currentSequenceNumber=e}}class xf{constructor(e){this.persistence=e,this.Jr=new wf,this.Yr=null}static Zr(e){return new xf(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _f(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $T()?8:j1(_t())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new aP;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ri()<=ue.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(ri()<=ue.DEBUG&&K("QueryEngine","Query:",Fs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ri()<=ue.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):z.resolve())}Yi(e,n){if(cy(n))return z.resolve(null);let r=Rn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=pc(n,null,"F"),r=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,pc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return cy(n)||s.isEqual(re.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?z.resolve(null):(ri()<=ue.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fs(n)),this.rs(e,o,n,O1(s,-1)).next(c=>c))})}ts(e,n){let r=new it(Vw(e));return n.forEach((s,i)=>{Qc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ri()<=ue.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.Ji.getDocumentsMatchingQuery(e,n,jr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new De(pe),this._s=new La(i=>ff(i),pf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function lP(t,e,n,r){return new oP(t,e,n,r)}async function sx(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=ce();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function cP(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){const g=d.batch,p=g.keys();let b=z.resolve();return p.forEach(k=>{b=b.next(()=>h.getEntry(u,k)).next(A=>{const D=d.docVersions.get(k);ye(D!==null),A.version.compareTo(D)<0&&(g.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),h.addEntry(A)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ce();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ax(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function uP(t,e){const n=se(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((h,g)=>{const p=s.get(g);if(!p)return;c.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,g)));let b=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(lt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),s=s.insert(g,b),function(A,D,I){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,b,h)&&c.push(n.Ur.updateTargetData(i,b))});let u=nr(),d=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),c.push(dP(i,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!r.isEqual(re.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(h)}return z.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function dP(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=nr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):K("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function mP(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hP(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function $m(t,e,n){const r=se(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!vo(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function by(t,e,n){const r=se(t);let s=re.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const g=se(u),p=g._s.get(h);return p!==void 0?z.resolve(g.os.get(p)):g.Ur.getTargetData(d,h)}(r,o,Rn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:ce())).next(c=>(fP(r,sC(e),c),{documents:c,Ts:i})))}function fP(t,e,n){let r=t.us.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class wy{constructor(){this.activeTargetIds=uC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pP{constructor(){this.so=new wy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl=null;function bd(){return cl===null?cl=function(){return 268435456+Math.round(2147483648*Math.random())}():cl++,"0x"+cl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class EP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=bd(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(h=>(K("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw va("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ra}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=yP[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=bd();return new Promise((o,c)=>{const u=new Ew;u.setWithCredentials(!0),u.listenOnce(bw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case kl.NO_ERROR:const h=u.getResponseJson();K(gt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case kl.TIMEOUT:K(gt,`RPC '${e}' ${i} timed out`),c(new W(j.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:const g=u.getStatus();if(K(gt,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const b=p==null?void 0:p.error;if(b&&b.status&&b.message){const k=function(D){const I=D.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(I)>=0?I:j.UNKNOWN}(b.status);c(new W(k,b.message))}else c(new W(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new W(j.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{K(gt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);K(gt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=bd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_w(),c=xw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");K(gt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const g=o.createWebChannel(h,u);let p=!1,b=!1;const k=new vP({Io:D=>{b?K(gt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(p||(K(gt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),p=!0),K(gt,`RPC '${e}' stream ${s} sending:`,D),g.send(D))},To:()=>g.close()}),A=(D,I,w)=>{D.listen(I,T=>{try{w(T)}catch(L){setTimeout(()=>{throw L},0)}})};return A(g,di.EventType.OPEN,()=>{b||(K(gt,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),A(g,di.EventType.CLOSE,()=>{b||(b=!0,K(gt,`RPC '${e}' stream ${s} transport closed`),k.So())}),A(g,di.EventType.ERROR,D=>{b||(b=!0,va(gt,`RPC '${e}' stream ${s} transport errored:`,D),k.So(new W(j.UNAVAILABLE,"The operation could not be completed")))}),A(g,di.EventType.MESSAGE,D=>{var I;if(!b){const w=D.data[0];ye(!!w);const T=w,L=T.error||((I=T[0])===null||I===void 0?void 0:I.error);if(L){K(gt,`RPC '${e}' stream ${s} received error:`,L);const U=L.status;let O=function(E){const N=We[E];if(N!==void 0)return Kw(N)}(U),_=L.message;O===void 0&&(O=j.INTERNAL,_="Unknown error status: "+U+" with message "+L.message),b=!0,k.So(new W(O,_)),g.close()}else K(gt,`RPC '${e}' stream ${s} received:`,w),k.bo(w)}}),A(c,ww.STAT_EVENT,D=>{D.stat===Dm.PROXY?K(gt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===Dm.NOPROXY&&K(gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){return new AC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r,s,i,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ix(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bP extends ox{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=RC(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Dn(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=zm(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Vm(u)?{documents:OC(i,u)}:{query:MC(i,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Jw(i,o.resumeToken);const d=Um(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){c.readTime=vc(i,o.snapshotVersion.toTimestamp());const d=Um(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=FC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=zm(this.serializer),n.removeTarget=e,this.a_(n)}}class wP extends ox{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=LC(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=zm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>DC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,jm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(j.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,jm(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class _P{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(tr(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Rs(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=se(u);d.L_.add(4),await wo(d),d.q_.set("Unknown"),d.L_.delete(4),await tu(d)}(this))})}),this.q_=new _P(r,s)}}async function tu(t){if(Rs(t))for(const e of t.B_)await e(!0)}async function wo(t){for(const e of t.B_)await e(!1)}function lx(t,e){const n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Tf(n)?If(n):Oa(n).r_()&&Sf(n,e))}function Nf(t,e){const n=se(t),r=Oa(n);n.N_.delete(e),r.r_()&&cx(n,e),n.N_.size===0&&(r.r_()?r.o_():Rs(n)&&n.q_.set("Unknown"))}function Sf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oa(t).A_(e)}function cx(t,e){t.Q_.xe(e),Oa(t).R_(e)}function If(t){t.Q_=new SC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oa(t).start(),t.q_.v_()}function Tf(t){return Rs(t)&&!Oa(t).n_()&&t.N_.size>0}function Rs(t){return se(t).L_.size===0}function ux(t){t.Q_=void 0}async function SP(t){t.q_.set("Online")}async function IP(t){t.N_.forEach((e,n)=>{Sf(t,e)})}async function TP(t,e){ux(t),Tf(t)?(t.q_.M_(e),If(t)):t.q_.set("Unknown")}async function kP(t,e,n){if(t.q_.set("Online"),e instanceof Qw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ec(t,r)}else if(e instanceof Pl?t.Q_.Ke(e):e instanceof Yw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await ax(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(d);h&&i.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),cx(i,u);const g=new Sr(h.target,u,d,h.sequenceNumber);Sf(i,g)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await Ec(t,r)}}async function Ec(t,e,n){if(!vo(e))throw e;t.L_.add(1),await wo(t),t.q_.set("Offline"),n||(n=()=>ax(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await tu(t)})}function dx(t,e){return e().catch(n=>Ec(t,n,e))}async function nu(t){const e=se(t),n=zr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;AP(e);)try{const s=await mP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,CP(e,s)}catch(s){await Ec(e,s)}mx(e)&&hx(e)}function AP(t){return Rs(t)&&t.O_.length<10}function CP(t,e){t.O_.push(e);const n=zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mx(t){return Rs(t)&&!zr(t).n_()&&t.O_.length>0}function hx(t){zr(t).start()}async function PP(t){zr(t).p_()}async function RP(t){const e=zr(t);for(const n of t.O_)e.m_(n.mutations)}async function DP(t,e,n){const r=t.O_.shift(),s=vf.from(r,e,n);await dx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await nu(t)}async function LP(t,e){e&&zr(t).V_&&await async function(r,s){if(function(o){return xC(o)&&o!==j.ABORTED}(s.code)){const i=r.O_.shift();zr(r).s_(),await dx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await nu(r)}}(t,e),mx(t)&&hx(t)}async function _y(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=Rs(n);n.L_.add(3),await wo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await tu(n)}async function OP(t,e){const n=se(t);e?(n.L_.delete(2),await tu(n)):e||(n.L_.add(2),await wo(n),n.q_.set("Unknown"))}function Oa(t){return t.K_||(t.K_=function(n,r,s){const i=se(n);return i.w_(),new bP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:SP.bind(null,t),Ro:IP.bind(null,t),mo:TP.bind(null,t),d_:kP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Tf(t)?If(t):t.q_.set("Unknown")):(await t.K_.stop(),ux(t))})),t.K_}function zr(t){return t.U_||(t.U_=function(n,r,s){const i=se(n);return i.w_(),new wP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PP.bind(null,t),mo:LP.bind(null,t),f_:RP.bind(null,t),g_:DP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await nu(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new kf(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Af(t,e){if(tr("AsyncQueue",`${e}: ${t}`),vo(t))return new W(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=mi(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new ca(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ca)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ca;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.W_=new De(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _a{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new _a(e,n,ca.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class VP{constructor(){this.queries=Sy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=se(n),i=s.queries;s.queries=Sy(),i.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new W(j.ABORTED,"Firestore shutting down"))}}function Sy(){return new La(t=>Mw(t),Yc)}async function Cf(t,e){const n=se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new MP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Af(o,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Rf(n)}async function Pf(t,e){const n=se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function FP(t,e){const n=se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&Rf(n)}function UP(t,e,n){const r=se(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Rf(t){t.Y_.forEach(e=>{e.next()})}var qm,Iy;(Iy=qm||(qm={})).ea="default",Iy.Cache="cache";class Df{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.key=e}}class px{constructor(e){this.key=e}}class jP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=Vw(e),this.Ra=new ca(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Ny,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,g)=>{const p=s.get(h),b=Qc(this.query,g)?g:null,k=!!p&&this.mutatedKeys.has(p.key),A=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let D=!1;p&&b?p.data.isEqual(b.data)?k!==A&&(r.track({type:3,doc:b}),D=!0):this.ga(p,b)||(r.track({type:2,doc:b}),D=!0,(u&&this.Aa(b,u)>0||d&&this.Aa(b,d)<0)&&(c=!0)):!p&&b?(r.track({type:0,doc:b}),D=!0):p&&!b&&(r.track({type:1,doc:p}),D=!0,(u||d)&&(c=!0)),D&&(b?(o=o.add(b),i=A?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,g)=>function(b,k){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return A(b)-A(k)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new _a(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ny,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new px(r))}),this.da.forEach(r=>{e.has(r)||n.push(new fx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _a.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class BP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zP{constructor(e){this.key=e,this.va=!1}}class $P{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new La(c=>Mw(c),Yc),this.Ma=new Map,this.xa=new Set,this.Oa=new De(Q.comparator),this.Na=new Map,this.La=new wf,this.Ba={},this.ka=new Map,this.qa=xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function qP(t,e,n=!0){const r=wx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await gx(r,e,n,!0),s}async function WP(t,e){const n=wx(t);await gx(n,e,!0,!1)}async function gx(t,e,n,r){const s=await hP(t.localStore,Rn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await HP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&lx(t.remoteStore,s),c}async function HP(t,e,n,r,s){t.Ka=(g,p,b)=>async function(A,D,I,w){let T=D.view.ma(I);T.ns&&(T=await by(A.localStore,D.query,!1).then(({documents:_})=>D.view.ma(_,T)));const L=w&&w.targetChanges.get(D.targetId),U=w&&w.targetMismatches.get(D.targetId)!=null,O=D.view.applyChanges(T,A.isPrimaryClient,L,U);return ky(A,D.targetId,O.wa),O.snapshot}(t,g,p,b);const i=await by(t.localStore,e,!0),o=new jP(e,i.Ts),c=o.ma(i.documents),u=bo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);ky(t,n,d.wa);const h=new BP(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function GP(t,e,n){const r=se(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Yc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $m(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Nf(r.remoteStore,s.targetId),Wm(r,s.targetId)}).catch(yo)):(Wm(r,s.targetId),await $m(r.localStore,s.targetId,!0))}async function KP(t,e){const n=se(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Nf(n.remoteStore,r.targetId))}async function YP(t,e,n){const r=nR(t);try{const s=await function(o,c){const u=se(o),d=le.now(),h=c.reduce((b,k)=>b.add(k.key),ce());let g,p;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=nr(),A=ce();return u.cs.getEntries(b,h).next(D=>{k=D,k.forEach((I,w)=>{w.isValidDocument()||(A=A.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,k)).next(D=>{g=D;const I=[];for(const w of c){const T=yC(w,g.get(w.key).overlayedDocument);T!=null&&I.push(new Yr(w.key,T,kw(T.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,I,c)}).next(D=>{p=D;const I=D.applyToLocalDocumentSet(g,A);return u.documentOverlayCache.saveOverlays(b,D.batchId,I)})}).then(()=>({batchId:p.batchId,changes:Uw(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new De(pe)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await xo(r,s.changes),await nu(r.remoteStore)}catch(s){const i=Af(s,"Failed to persist write");n.reject(i)}}async function yx(t,e){const n=se(t);try{const r=await uP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ye(o.va):s.removedDocuments.size>0&&(ye(o.va),o.va=!1))}),await xo(n,r,e)}catch(r){await yo(r)}}function Ty(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=se(o);u.onlineState=c;let d=!1;u.queries.forEach((h,g)=>{for(const p of g.j_)p.Z_(c)&&(d=!0)}),d&&Rf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QP(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new De(Q.comparator);o=o.insert(i,Et.newNoDocument(i,re.min()));const c=ce().add(i),u=new Zc(re.min(),new Map,new De(pe),o,c);await yx(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Lf(r)}else await $m(r.localStore,e,!1).then(()=>Wm(r,e,n)).catch(yo)}async function JP(t,e){const n=se(t),r=e.batch.batchId;try{const s=await cP(n.localStore,e);Ex(n,r,null),vx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xo(n,s)}catch(s){await yo(s)}}async function XP(t,e,n){const r=se(t);try{const s=await function(o,c){const u=se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(ye(g!==null),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);Ex(r,e,n),vx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xo(r,s)}catch(s){await yo(s)}}function vx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ex(t,e,n){const r=se(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Wm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||bx(t,r)})}function bx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Nf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Lf(t))}function ky(t,e,n){for(const r of n)r instanceof fx?(t.La.addReference(r.key,e),ZP(t,r)):r instanceof px?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||bx(t,r.key)):ne()}function ZP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),Lf(t))}function Lf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new zP(n)),t.Oa=t.Oa.insert(n,r),lx(t.remoteStore,new Sr(Rn(Kc(n.path)),r,"TargetPurposeLimboResolution",uf.oe))}}async function xo(t,e,n){const r=se(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){s.push(d);const g=_f.Wi(u.targetId,d);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const h=se(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>z.forEach(d,p=>z.forEach(p.$i,b=>h.persistence.referenceDelegate.addReference(g,p.targetId,b)).next(()=>z.forEach(p.Ui,b=>h.persistence.referenceDelegate.removeReference(g,p.targetId,b)))))}catch(g){if(!vo(g))throw g;K("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const p=g.targetId;if(!g.fromCache){const b=h.os.get(p),k=b.snapshotVersion,A=b.withLastLimboFreeSnapshotVersion(k);h.os=h.os.insert(p,A)}}}(r.localStore,i))}async function eR(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await sx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new W(j.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xo(n,r.hs)}}function tR(t,e){const n=se(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let s=ce();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function wx(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QP.bind(null,e),e.Ca.d_=FP.bind(null,e.eventManager),e.Ca.$a=UP.bind(null,e.eventManager),e}function nR(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XP.bind(null,e),e}class bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return lP(this.persistence,new iP,e.initialUser,this.serializer)}Ga(e){return new rP(xf.Zr,this.serializer)}Wa(e){return new pP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bc.provider={build:()=>new bc};class Hm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ty(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eR.bind(null,this.syncEngine),await OP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VP}()}createDatastore(e){const n=eu(e.databaseInfo.databaseId),r=function(i){return new EP(i)}(e.databaseInfo);return function(i,o,c,u){return new xP(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new NP(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Ty(this.syncEngine,n,0),function(){return xy.D()?new xy:new gP}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,h){const g=new $P(s,i,o,c,u,d);return h&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=se(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await wo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hm.provider={build:()=>new Hm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=Sw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Af(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xd(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await sx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ay(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sR(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_y(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>_y(e.remoteStore,s)),t._onlineComponents=e}async function sR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await xd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;va("Error using user provided cache. Falling back to memory cache: "+n),await xd(t,new bc)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await xd(t,new bc);return t._offlineComponents}async function xx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Ay(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Ay(t,new Hm))),t._onlineComponents}function aR(t){return xx(t).then(e=>e.syncEngine)}async function wc(t){const e=await xx(t),n=e.eventManager;return n.onListen=qP.bind(null,e.syncEngine),n.onUnlisten=GP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KP.bind(null,e.syncEngine),n}function iR(t,e,n={}){const r=new Kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const h=new Of({next:p=>{h.Za(),o.enqueueAndForget(()=>Pf(i,g));const b=p.docs.has(c);!b&&p.fromCache?d.reject(new W(j.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&p.fromCache&&u&&u.source==="server"?d.reject(new W(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new Df(Kc(c.path),h,{includeMetadataChanges:!0,_a:!0});return Cf(i,g)}(await wc(t),t.asyncQueue,e,n,r)),r.promise}function oR(t,e,n={}){const r=new Kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const h=new Of({next:p=>{h.Za(),o.enqueueAndForget(()=>Pf(i,g)),p.fromCache&&u.source==="server"?d.reject(new W(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new Df(c,h,{includeMetadataChanges:!0,_a:!0});return Cf(i,g)}(await wc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t,e,n){if(!n)throw new W(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lR(t,e,n,r){if(e===!0&&r===!0)throw new W(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Py(t){if(!Q.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ry(t){if(Q.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ru(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function jt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ru(t);throw new W(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function cR(t,e){if(e<=0)throw new W(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_x((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class su{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new I1;switch(r.type){case"firstParty":return new C1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Cy.get(n);r&&(K("ComponentProvider","Removing Datastore"),Cy.delete(n),r.terminate())}(this),Promise.resolve()}}function uR(t,e,n,r={}){var s;const i=(t=jt(t,su))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=yt.MOCK_USER;else{c=Tb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new W(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yt(d)}t._authCredentials=new T1(new Nw(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new or(this.firestore,e,this._query)}}class wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}}class Vr extends or{constructor(e,n,r){super(e,n,Kc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new Q(e))}withConverter(e){return new Vr(this.firestore,e,this._path)}}function Z(t,e,...n){if(t=Ee(t),Nx("collection","path",e),t instanceof su){const r=Se.fromString(e,...n);return Ry(r),new Vr(t,null,r)}{if(!(t instanceof wt||t instanceof Vr))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Ry(r),new Vr(t.firestore,null,r)}}function Te(t,e,...n){if(t=Ee(t),arguments.length===1&&(e=Sw.newId()),Nx("doc","path",e),t instanceof su){const r=Se.fromString(e,...n);return Py(r),new wt(t,null,new Q(r))}{if(!(t instanceof wt||t instanceof Vr))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Py(r),new wt(t.firestore,t instanceof Vr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ix(this,"async_queue_retry"),this.Vu=()=>{const r=wd();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vo(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw tr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=kf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Oy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class rr extends su{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ly,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ly(e),this._firestoreClient=void 0,await e}}}function dR(t,e){const n=typeof t=="object"?t:$c(),r=typeof t=="string"?t:"(default)",s=Gr(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Nb("firestore");i&&uR(s,...i)}return s}function au(t){if(t._terminated)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mR(t),t._firestoreClient}function mR(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,h){return new $1(c,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_x(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new rR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Na(lt.fromBase64String(e))}catch(n){throw new W(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Na(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=/^__.*__$/;class fR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eo(e,this.data,n,this.fieldTransforms)}}class Sx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ix(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Uf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Uf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ix(this.Cu)&&hR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class pR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||eu(e)}Qu(e,n,r,s=!1){return new Uf({Cu:e,methodName:n,qu:r,path:st.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ou(t){const e=t._freezeSettings(),n=eu(t._databaseId);return new pR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tx(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);jf("Data must be an object, but it was:",o,r);const c=kx(r,o);let u,d;if(i.merge)u=new Yt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const g of i.mergeFields){const p=Gm(e,g,n);if(!o.contains(p))throw new W(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Cx(h,p)||h.push(p)}u=new Yt(h),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new fR(new Lt(c),u,d)}class lu extends Mf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lu}}function gR(t,e,n,r){const s=t.Qu(1,e,n);jf("Data must be an object, but it was:",s,r);const i=[],o=Lt.empty();Ps(r,(u,d)=>{const h=Bf(e,u,n);d=Ee(d);const g=s.Nu(h);if(d instanceof lu)i.push(h);else{const p=_o(d,g);p!=null&&(i.push(h),o.set(h,p))}});const c=new Yt(i);return new Sx(o,c,s.fieldTransforms)}function yR(t,e,n,r,s,i){const o=t.Qu(1,e,n),c=[Gm(e,r,n)],u=[s];if(i.length%2!=0)throw new W(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)c.push(Gm(e,i[p])),u.push(i[p+1]);const d=[],h=Lt.empty();for(let p=c.length-1;p>=0;--p)if(!Cx(d,c[p])){const b=c[p];let k=u[p];k=Ee(k);const A=o.Nu(b);if(k instanceof lu)d.push(b);else{const D=_o(k,A);D!=null&&(d.push(b),h.set(b,D))}}const g=new Yt(d);return new Sx(h,g,o.fieldTransforms)}function vR(t,e,n,r=!1){return _o(n,t.Qu(r?4:3,e))}function _o(t,e){if(Ax(t=Ee(t)))return jf("Unsupported field value:",e,t),kx(t,e);if(t instanceof Mf)return function(r,s){if(!Ix(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=_o(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ee(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=le.fromDate(r);return{timestampValue:vc(s.serializer,i)}}if(r instanceof le){const i=new le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vc(s.serializer,i)}}if(r instanceof Vf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Na)return{bytesValue:Jw(s.serializer,r._byteString)};if(r instanceof wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ff)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return gf(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${ru(r)}`)}(t,e)}function kx(t,e){const n={};return Iw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(t,(r,s)=>{const i=_o(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Ax(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof le||t instanceof Vf||t instanceof Na||t instanceof wt||t instanceof Mf||t instanceof Ff)}function jf(t,e,n){if(!Ax(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ru(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Gm(t,e,n){if((e=Ee(e))instanceof iu)return e._internalPath;if(typeof e=="string")return Bf(t,e);throw xc("Field path arguments must be of type string or ",t,!1,void 0,n)}const ER=new RegExp("[~\\*/\\[\\]]");function Bf(t,e,n){if(e.search(ER)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new iu(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(j.INVALID_ARGUMENT,c+t+u)}function Cx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bR extends Px{data(){return super.data()}}function cu(t,e){return typeof e=="string"?Bf(t,e):e instanceof iu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zf{}class $f extends zf{}function ie(t,e,...n){let r=[];e instanceof zf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof qf).length,c=i.filter(u=>u instanceof uu).length;if(o>1||o>0&&c>0)throw new W(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uu extends $f{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uu(e,n,r)}_apply(e){const n=this._parse(e);return Dx(e._query,n),new or(e.firestore,e.converter,Fm(e._query,n))}_parse(e){const n=ou(e.firestore);return function(i,o,c,u,d,h,g){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Vy(g,h);const b=[];for(const k of g)b.push(My(u,i,k));p={arrayValue:{values:b}}}else p=My(u,i,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Vy(g,h),p=vR(c,o,g,h==="in"||h==="not-in");return Ge.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Oe(t,e,n){const r=e,s=cu("where",t);return uu._create(s,r,n)}class qf extends zf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)Dx(o,u),o=Fm(o,u)}(e._query,n),new or(e.firestore,e.converter,Fm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wf extends $f{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ro(i,o)}(e._query,this._field,this._direction);return new or(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Da(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ae(t,e="asc"){const n=e,r=cu("orderBy",t);return Wf._create(r,n)}class Hf extends $f{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Hf(e,n,r)}_apply(e){return new or(e.firestore,e.converter,pc(e._query,this._limit,this._limitType))}}function rs(t){return cR("limit",t),Hf._create("limit",t,"F")}function My(t,e,n){if(typeof(n=Ee(n))=="string"){if(n==="")throw new W(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ow(e)&&n.indexOf("/")!==-1)throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!Q.isDocumentKey(r))throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ry(t,new Q(r))}if(n instanceof wt)return ry(t,n._key);throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ru(n)}.`)}function Vy(t,e){if(!Array.isArray(t)||t.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dx(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wR{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ps(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new Ff(i)}convertGeoPoint(e){return new Vf(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(eo(e));default:return null}}convertTimestamp(e){const n=Br(e);return new le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);ye(rx(r));const s=new to(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||tr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ox extends Px{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rl extends Ox{data(e={}){return super.data(e)}}class Mx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rl(this._firestore,this._userDataWriter,r.key,r,new fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Rl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new fi(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Rl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new fi(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:xR(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){t=jt(t,wt);const e=jt(t.firestore,rr);return iR(au(e),t._key).then(n=>Fx(e,t,n))}class Gf extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function me(t){t=jt(t,or);const e=jt(t.firestore,rr),n=au(e),r=new Gf(e);return Rx(t._query),oR(n,t._query).then(s=>new Mx(e,r,t,s))}function Vx(t,e,n){t=jt(t,wt);const r=jt(t.firestore,rr),s=Lx(t.converter,e);return du(r,[Tx(ou(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,on.none())])}function Gt(t,e,n,...r){t=jt(t,wt);const s=jt(t.firestore,rr),i=ou(s);let o;return o=typeof(e=Ee(e))=="string"||e instanceof iu?yR(i,"updateDoc",t._key,e,n,r):gR(i,"updateDoc",t._key,e),du(s,[o.toMutation(t._key,on.exists(!0))])}function ms(t){return du(jt(t.firestore,rr),[new yf(t._key,on.none())])}function bt(t,e){const n=jt(t.firestore,rr),r=Te(t),s=Lx(t.converter,e);return du(n,[Tx(ou(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function _R(t,...e){var n,r,s;t=Ee(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Oy(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Oy(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,d,h;if(t instanceof wt)d=jt(t.firestore,rr),h=Kc(t._key.path),u={next:g=>{e[o]&&e[o](Fx(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=jt(t,or);d=jt(g.firestore,rr),h=g._query;const p=new Gf(d);u={next:b=>{e[o]&&e[o](new Mx(d,p,g,b))},error:e[o+1],complete:e[o+2]},Rx(t._query)}return function(p,b,k,A){const D=new Of(A),I=new Df(b,D,k);return p.asyncQueue.enqueueAndForget(async()=>Cf(await wc(p),I)),()=>{D.Za(),p.asyncQueue.enqueueAndForget(async()=>Pf(await wc(p),I))}}(au(d),h,c,u)}function du(t,e){return function(r,s){const i=new Kn;return r.asyncQueue.enqueueAndForget(async()=>YP(await aR(r),s,i)),i.promise}(au(t),e)}function Fx(t,e,n){const r=n.docs.get(e._key),s=new Gf(t);return new Ox(t,s,e._key,r,new fi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ra=s})(Cs),bn(new un("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new rr(new k1(r.getProvider("auth-internal")),new R1(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new to(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Ut(X0,"4.7.3",e),Ut(X0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebasestorage.googleapis.com",jx="storageBucket",NR=2*60*1e3,SR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe extends dn{constructor(e,n,r=0){super(_d(e),`Firebase Storage: ${n} (${_d(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _d(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ve;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ve||(Ve={}));function _d(t){return"storage/"+t}function Kf(){const t="An unknown error occurred, please check the error payload for server response.";return new Fe(Ve.UNKNOWN,t)}function IR(t){return new Fe(Ve.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function TR(t){return new Fe(Ve.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kR(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Fe(Ve.UNAUTHENTICATED,t)}function AR(){return new Fe(Ve.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CR(t){return new Fe(Ve.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function PR(){return new Fe(Ve.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RR(){return new Fe(Ve.CANCELED,"User canceled the upload/download.")}function DR(t){return new Fe(Ve.INVALID_URL,"Invalid URL '"+t+"'.")}function LR(t){return new Fe(Ve.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OR(){return new Fe(Ve.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jx+"' property when initializing the app?")}function MR(){return new Fe(Ve.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function VR(){return new Fe(Ve.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function FR(t){return new Fe(Ve.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ym(t){return new Fe(Ve.INVALID_ARGUMENT,t)}function Bx(){return new Fe(Ve.APP_DELETED,"The Firebase app was deleted.")}function UR(t){return new Fe(Ve.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ai(t,e){return new Fe(Ve.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function si(t){throw new Fe(Ve.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Qt.makeFromUrl(e,n)}catch{return new Qt(e,"")}if(r.path==="")return r;throw LR(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(L){L.path_=decodeURIComponent(L.path)}const h="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${h}/b/${s}/o${p}`,"i"),k={bucket:1,path:3},A=n===Ux?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",I=new RegExp(`^https?://${A}/${s}/${D}`,"i"),T=[{regex:c,indices:u,postModify:i},{regex:b,indices:k,postModify:d},{regex:I,indices:{bucket:1,path:2},postModify:d}];for(let L=0;L<T.length;L++){const U=T[L],O=U.regex.exec(e);if(O){const _=O[U.indices.bucket];let y=O[U.indices.path];y||(y=""),r=new Qt(_,y),U.postModify(r);break}}if(r==null)throw DR(e);return r}}class jR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function u(){return c===2}let d=!1;function h(...D){d||(d=!0,e.apply(null,D))}function g(D){s=setTimeout(()=>{s=null,t(b,u())},D)}function p(){i&&clearTimeout(i)}function b(D,...I){if(d){p();return}if(D){p(),h.call(null,D,...I);return}if(u()||o){p(),h.call(null,D,...I);return}r<64&&(r*=2);let T;c===1?(c=2,T=0):T=(r+Math.random())*1e3,g(T)}let k=!1;function A(D){k||(k=!0,p(),!d&&(s!==null?(D||(c=2),clearTimeout(s),g(0)):D||(c=1)))}return g(0),i=setTimeout(()=>{o=!0,A(!0)},n),A}function zR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){return t!==void 0}function qR(t){return typeof t=="object"&&!Array.isArray(t)}function Yf(t){return typeof t=="string"||t instanceof String}function Fy(t){return Qf()&&t instanceof Blob}function Qf(){return typeof Blob<"u"}function Uy(t,e,n,r){if(r<e)throw Ym(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ym(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function zx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var hs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hs||(hs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,r,s,i,o,c,u,d,h,g,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=g,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,k)=>{this.resolve_=b,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ul(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===hs.NO_ERROR,u=i.getStatus();if(!c||WR(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===hs.ABORT;r(!1,new ul(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new ul(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());$R(u)?i(u):i()}catch(u){o(u)}else if(c!==null){const u=Kf();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?Bx():RR();o(u)}else{const u=PR();o(u)}};this.canceled_?n(!1,new ul(!1,null,!0)):this.backoffId_=BR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ul{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function GR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function KR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function QR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JR(t,e,n,r,s,i,o=!0){const c=zx(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return YR(d,e),GR(d,n),KR(d,i),QR(d,r),new HR(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ZR(...t){const e=XR();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qf())return new Blob(t);throw new Fe(Ve.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function e4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){if(typeof atob>"u")throw FR("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Nd{constructor(e,n){this.data=e,this.contentType=n||null}}function n4(t,e){switch(t){case Tn.RAW:return new Nd($x(e));case Tn.BASE64:case Tn.BASE64URL:return new Nd(qx(t,e));case Tn.DATA_URL:return new Nd(s4(e),a4(e))}throw Kf()}function $x(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function r4(t){let e;try{e=decodeURIComponent(t)}catch{throw Ai(Tn.DATA_URL,"Malformed data URL.")}return $x(e)}function qx(t,e){switch(t){case Tn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ai(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Tn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ai(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=t4(e)}catch(s){throw s.message.includes("polyfill")?s:Ai(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Wx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ai(Tn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=i4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function s4(t){const e=new Wx(t);return e.base64?qx(Tn.BASE64,e.rest):r4(e.rest)}function a4(t){return new Wx(t).contentType}function i4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){let r=0,s="";Fy(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Fy(this.data_)){const r=this.data_,s=e4(r,e,n);return s===null?null:new wr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new wr(r,!0)}}static getBlob(...e){if(Qf()){const n=e.map(r=>r instanceof wr?r.data_:r);return new wr(ZR.apply(null,n))}else{const n=e.map(o=>Yf(o)?n4(Tn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new wr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){let e;try{e=JSON.parse(t)}catch{return null}return qR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function l4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Gx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t,e){return e}class It{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||c4}}let dl=null;function u4(t){return!Yf(t)||t.length<2?t:Gx(t)}function Kx(){if(dl)return dl;const t=[];t.push(new It("bucket")),t.push(new It("generation")),t.push(new It("metageneration")),t.push(new It("name","fullPath",!0));function e(i,o){return u4(o)}const n=new It("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new It("size");return s.xform=r,t.push(s),t.push(new It("timeCreated")),t.push(new It("updated")),t.push(new It("md5Hash",null,!0)),t.push(new It("cacheControl",null,!0)),t.push(new It("contentDisposition",null,!0)),t.push(new It("contentEncoding",null,!0)),t.push(new It("contentLanguage",null,!0)),t.push(new It("contentType",null,!0)),t.push(new It("metadata","customMetadata",!0)),dl=t,dl}function d4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Qt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function m4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return d4(r,t),r}function Yx(t,e,n){const r=Hx(e);return r===null?null:m4(t,r,n)}function h4(t,e,n,r){const s=Hx(e);if(s===null||!Yf(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,g=t.fullPath,p="/b/"+o(h)+"/o/"+o(g),b=mu(p,n,r),k=zx({alt:"media",token:d});return b+k})[0]}function f4(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Jf{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t){if(!t)throw Kf()}function p4(t,e){function n(r,s){const i=Yx(t,s,e);return Qx(i!==null),i}return n}function g4(t,e){function n(r,s){const i=Yx(t,s,e);return Qx(i!==null),h4(i,s,t.host,t._protocol)}return n}function Jx(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=AR():s=kR():n.getStatus()===402?s=TR(t.bucket):n.getStatus()===403?s=CR(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Xx(t){const e=Jx(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=IR(t.path)),i.serverResponse=s.serverResponse,i}return n}function y4(t,e,n){const r=e.fullServerUrl(),s=mu(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new Jf(s,i,g4(t,n),o);return c.errorHandler=Xx(e),c}function v4(t,e){const n=e.fullServerUrl(),r=mu(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const c=new Jf(r,s,o,i);return c.successCodes=[200,204],c.errorHandler=Xx(e),c}function E4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function b4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=E4(null,e)),r}function w4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let T="";for(let L=0;L<2;L++)T=T+Math.random().toString().slice(2);return T}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=b4(e,r,s),h=f4(d,n),g="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",b=wr.getBlob(g,r,p);if(b===null)throw MR();const k={name:d.fullPath},A=mu(i,t.host,t._protocol),D="POST",I=t.maxUploadRetryTime,w=new Jf(A,D,p4(t,n),I);return w.urlParams=k,w.headers=o,w.body=b.uploadData(),w.errorHandler=Jx(e),w}class x4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw si("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw si("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw si("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw si("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw si("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _4 extends x4{initXhr(){this.xhr_.responseType="text"}}function Xf(){return new _4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this._service=e,n instanceof Qt?this._location=n:this._location=Qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ns(e,n)}get root(){const e=new Qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gx(this._location.path)}get storage(){return this._service}get parent(){const e=o4(this._location.path);if(e===null)return null;const n=new Qt(this._location.bucket,e);return new Ns(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UR(e)}}function N4(t,e,n){t._throwIfRoot("uploadBytes");const r=w4(t.storage,t._location,Kx(),new wr(e,!0),n);return t.storage.makeRequestWithTokens(r,Xf).then(s=>({metadata:s,ref:t}))}function S4(t){t._throwIfRoot("getDownloadURL");const e=y4(t.storage,t._location,Kx());return t.storage.makeRequestWithTokens(e,Xf).then(n=>{if(n===null)throw VR();return n})}function I4(t){t._throwIfRoot("deleteObject");const e=v4(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Xf)}function T4(t,e){const n=l4(t._location.path,e),r=new Qt(t._location.bucket,n);return new Ns(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){return/^[A-Za-z]+:\/\//.test(t)}function A4(t,e){return new Ns(t,e)}function Zx(t,e){if(t instanceof Zf){const n=t;if(n._bucket==null)throw OR();const r=new Ns(n,n._bucket);return e!=null?Zx(r,e):r}else return e!==void 0?T4(t,e):t}function C4(t,e){if(e&&k4(e)){if(t instanceof Zf)return A4(t,e);throw Ym("To use ref(service, url), the first argument must be a Storage instance.")}else return Zx(t,e)}function jy(t,e){const n=e==null?void 0:e[jx];return n==null?null:Qt.makeFromBucketSpec(n,t)}function P4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Tb(s,t.app.options.projectId))}class Zf{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Ux,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NR,this._maxUploadRetryTime=SR,this._requests=new Set,s!=null?this._bucket=Qt.makeFromBucketSpec(s,this._host):this._bucket=jy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qt.makeFromBucketSpec(this._url,e):this._bucket=jy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Uy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Uy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ns(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new jR(Bx());{const o=JR(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const By="@firebase/storage",zy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="storage";function t_(t,e,n){return t=Ee(t),N4(t,e,n)}function n_(t){return t=Ee(t),S4(t)}function R4(t){return t=Ee(t),I4(t)}function Qm(t,e){return t=Ee(t),C4(t,e)}function D4(t=$c(),e){t=Ee(t);const r=Gr(t,e_).getImmediate({identifier:e}),s=Nb("storage");return s&&L4(r,...s),r}function L4(t,e,n,r={}){P4(t,e,n,r)}function O4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Zf(n,r,s,e,Cs)}function M4(){bn(new un(e_,O4,"PUBLIC").setMultipleInstances(!0)),Ut(By,zy,""),Ut(By,zy,"esm2017")}M4();const r_="@firebase/installations",ep="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=1e4,a_=`w:${ep}`,i_="FIS_v2",V4="https://firebaseinstallations.googleapis.com/v1",F4=60*60*1e3,U4="installations",j4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ss=new As(U4,j4,B4);function o_(t){return t instanceof dn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_({projectId:t}){return`${V4}/projects/${t}/installations`}function c_(t){return{token:t.token,requestStatus:2,expiresIn:$4(t.expiresIn),creationTime:Date.now()}}async function u_(t,e){const r=(await e.json()).error;return Ss.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function d_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function z4(t,{refreshToken:e}){const n=d_(t);return n.append("Authorization",q4(e)),n}async function m_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $4(t){return Number(t.replace("s","000"))}function q4(t){return`${i_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=l_(t),s=d_(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:i_,appId:t.appId,sdkVersion:a_},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await m_(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:c_(d.authToken)}}else throw await u_("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=/^[cdef][\w-]{21}$/,Jm="";function K4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Y4(t);return G4.test(n)?n:Jm}catch{return Jm}}function Y4(t){return H4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=new Map;function p_(t,e){const n=hu(t);g_(n,e),Q4(n,e)}function g_(t,e){const n=f_.get(t);if(n)for(const r of n)r(e)}function Q4(t,e){const n=J4();n&&n.postMessage({key:t,fid:e}),X4()}let ls=null;function J4(){return!ls&&"BroadcastChannel"in self&&(ls=new BroadcastChannel("[Firebase] FID Change"),ls.onmessage=t=>{g_(t.data.key,t.data.fid)}),ls}function X4(){f_.size===0&&ls&&(ls.close(),ls=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="firebase-installations-database",eD=1,Is="firebase-installations-store";let Sd=null;function tp(){return Sd||(Sd=Db(Z4,eD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Is)}}})),Sd}async function _c(t,e){const n=hu(t),s=(await tp()).transaction(Is,"readwrite"),i=s.objectStore(Is),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&p_(t,e.fid),e}async function y_(t){const e=hu(t),r=(await tp()).transaction(Is,"readwrite");await r.objectStore(Is).delete(e),await r.done}async function fu(t,e){const n=hu(t),s=(await tp()).transaction(Is,"readwrite"),i=s.objectStore(Is),o=await i.get(n),c=e(o);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!o||o.fid!==c.fid)&&p_(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function np(t){let e;const n=await fu(t.appConfig,r=>{const s=tD(r),i=nD(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Jm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function tD(t){const e=t||{fid:K4(),registrationStatus:0};return v_(e)}function nD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ss.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=rD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sD(t)}:{installationEntry:e}}async function rD(t,e){try{const n=await W4(t,e);return _c(t.appConfig,n)}catch(n){throw o_(n)&&n.customData.serverCode===409?await y_(t.appConfig):await _c(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function sD(t){let e=await $y(t.appConfig);for(;e.registrationStatus===1;)await h_(100),e=await $y(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await np(t);return r||n}return e}function $y(t){return fu(t,e=>{if(!e)throw Ss.create("installation-not-found");return v_(e)})}function v_(t){return aD(t)?{fid:t.fid,registrationStatus:0}:t}function aD(t){return t.registrationStatus===1&&t.registrationTime+s_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD({appConfig:t,heartbeatServiceProvider:e},n){const r=oD(t,n),s=z4(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:a_,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await m_(()=>fetch(r,c));if(u.ok){const d=await u.json();return c_(d)}else throw await u_("Generate Auth Token",u)}function oD(t,{fid:e}){return`${l_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rp(t,e=!1){let n;const r=await fu(t.appConfig,i=>{if(!E_(i))throw Ss.create("not-registered");const o=i.authToken;if(!e&&uD(o))return i;if(o.requestStatus===1)return n=lD(t,e),i;{if(!navigator.onLine)throw Ss.create("app-offline");const c=mD(i);return n=cD(t,c),c}});return n?await n:r.authToken}async function lD(t,e){let n=await qy(t.appConfig);for(;n.authToken.requestStatus===1;)await h_(100),n=await qy(t.appConfig);const r=n.authToken;return r.requestStatus===0?rp(t,e):r}function qy(t){return fu(t,e=>{if(!E_(e))throw Ss.create("not-registered");const n=e.authToken;return hD(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function cD(t,e){try{const n=await iD(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await _c(t.appConfig,r),n}catch(n){if(o_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await y_(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await _c(t.appConfig,r)}throw n}}function E_(t){return t!==void 0&&t.registrationStatus===2}function uD(t){return t.requestStatus===2&&!dD(t)}function dD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+F4}function mD(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function hD(t){return t.requestStatus===1&&t.requestTime+s_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(t){const e=t,{installationEntry:n,registrationPromise:r}=await np(e);return r?r.catch(console.error):rp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(t,e=!1){const n=t;return await gD(n),(await rp(n,e)).token}async function gD(t){const{registrationPromise:e}=await np(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t){if(!t||!t.options)throw Id("App Configuration");if(!t.name)throw Id("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Id(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Id(t){return Ss.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="installations",vD="installations-internal",ED=t=>{const e=t.getProvider("app").getImmediate(),n=yD(e),r=Gr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},bD=t=>{const e=t.getProvider("app").getImmediate(),n=Gr(e,b_).getImmediate();return{getId:()=>fD(n),getToken:s=>pD(n,s)}};function wD(){bn(new un(b_,ED,"PUBLIC")),bn(new un(vD,bD,"PRIVATE"))}wD();Ut(r_,ep);Ut(r_,ep,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="analytics",xD="firebase_id",_D="origin",ND=60*1e3,SD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt=new zc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xt=new As("analytics","Analytics",ID);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){if(!t.startsWith(sp)){const e=Xt.create("invalid-gtag-resource",{gtagURL:t});return Bt.warn(e.message),""}return t}function w_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function kD(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function AD(t,e){const n=kD("firebase-js-sdk-policy",{createScriptURL:TD}),r=document.createElement("script"),s=`${sp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function CD(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function PD(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await w_(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){Bt.error(c)}t("config",s,i)}async function RD(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const c=await w_(n);for(const u of o){const d=c.find(g=>g.measurementId===u),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Bt.error(i)}}function DD(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[c,u]=o;await RD(t,e,n,c,u)}else if(i==="config"){const[c,u]=o;await PD(t,e,n,r,c,u)}else if(i==="consent"){const[c,u]=o;t("consent",c,u)}else if(i==="get"){const[c,u,d]=o;t("get",c,u,d)}else if(i==="set"){const[c]=o;t("set",c)}else t(i,...o)}catch(c){Bt.error(c)}}return s}function LD(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=DD(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function OD(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(sp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=30,VD=1e3;class FD{constructor(e={},n=VD){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const x_=new FD;function UD(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function jD(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:UD(r)},i=SD.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let c="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Xt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function BD(t,e=x_,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Xt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Xt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new qD;return setTimeout(async()=>{c.abort()},ND),__({appId:r,apiKey:s,measurementId:i},o,c,e)}async function __(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=x_){var i;const{appId:o,measurementId:c}=t;try{await zD(r,e)}catch(u){if(c)return Bt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:c};throw u}try{const u=await jD(t);return s.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!$D(d)){if(s.deleteThrottleMetadata(o),c)return Bt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:c};throw u}const h=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?_0(n,s.intervalMillis,MD):_0(n,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,g),Bt.debug(`Calling attemptFetch again in ${h} millis`),__(t,g,r,s)}}function zD(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Xt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $D(t){if(!(t instanceof dn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class qD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function WD(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(){if(Ab())try{await Cb()}catch(t){return Bt.warn(Xt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Bt.warn(Xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function GD(t,e,n,r,s,i,o){var c;const u=BD(t);u.then(b=>{n[b.measurementId]=b.appId,t.options.measurementId&&b.measurementId!==t.options.measurementId&&Bt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>Bt.error(b)),e.push(u);const d=HD().then(b=>{if(b)return r.getId()}),[h,g]=await Promise.all([u,d]);OD(i)||AD(i,h.measurementId),s("js",new Date);const p=(c=o==null?void 0:o.config)!==null&&c!==void 0?c:{};return p[_D]="firebase",p.update=!0,g!=null&&(p[xD]=g),s("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.app=e}_delete(){return delete Ci[this.app.options.appId],Promise.resolve()}}let Ci={},Wy=[];const Hy={};let Td="dataLayer",YD="gtag",Gy,N_,Ky=!1;function QD(){const t=[];if(kb()&&t.push("This is a browser extension environment."),qT()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Xt.create("invalid-analytics-context",{errorInfo:e});Bt.warn(n.message)}}function JD(t,e,n){QD();const r=t.options.appId;if(!r)throw Xt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Bt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xt.create("no-api-key");if(Ci[r]!=null)throw Xt.create("already-exists",{id:r});if(!Ky){CD(Td);const{wrappedGtag:i,gtagCore:o}=LD(Ci,Wy,Hy,Td,YD);N_=i,Gy=o,Ky=!0}return Ci[r]=GD(t,Wy,Hy,e,Gy,Td,n),new KD(t)}function XD(t=$c()){t=Ee(t);const e=Gr(t,Nc);return e.isInitialized()?e.getImmediate():ZD(t)}function ZD(t,e={}){const n=Gr(t,Nc);if(n.isInitialized()){const s=n.getImmediate();if(Qi(e,n.getOptions()))return s;throw Xt.create("already-initialized")}return n.initialize({options:e})}function e3(t,e,n,r){t=Ee(t),WD(N_,Ci[t.app.options.appId],e,n,r).catch(s=>Bt.error(s))}const Yy="@firebase/analytics",Qy="0.10.8";function t3(){bn(new un(Nc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return JD(r,s,n)},"PUBLIC")),bn(new un("analytics-internal",t,"PRIVATE")),Ut(Yy,Qy),Ut(Yy,Qy,"esm2017");function t(e){try{const n=e.getProvider(Nc).getImmediate();return{logEvent:(r,s,i)=>e3(n,r,s,i)}}catch(n){throw Xt.create("interop-component-reg-failed",{reason:n})}}}t3();const n3={apiKey:"AIzaSyCrJ12QLlmQ0QMaE9XDfOK0d4SHJkJ8kaY",authDomain:"lstu-student-portal.firebaseapp.com",projectId:"lstu-student-portal",storageBucket:"lstu-student-portal.firebasestorage.app",messagingSenderId:"213785339707",appId:"1:213785339707:web:9a98d88ae593f014dcb91e",measurementId:"G-E16S2FJ6PD"},pu=Lb(n3),zt=x1(pu),X=dR(pu),S_=D4(pu);XD(pu);function r3(){const[t,e]=a.useState(""),[n,r]=a.useState(""),[s,i]=a.useState(!1),[o,c]=a.useState(""),u=Qe();a.useEffect(()=>{const g=localStorage.getItem("rememberMe")==="true";i(g)},[]);const d=async()=>{if(!t){c("Please enter your email address first.");return}try{await aA(zt,t),alert("Password reset link sent to your email!")}catch(g){c(g.message)}};async function h(g){g.preventDefault(),c("");try{const p=await oA(zt,t,n);if(s?localStorage.setItem("rememberMe","true"):(localStorage.removeItem("rememberMe"),localStorage.removeItem("rememberedEmail"),localStorage.removeItem("rememberedPassword")),!p.user.emailVerified){c("Please verify your email before logging in. Check your email for the verification link.");return}u("/")}catch{c("Invalid credentials or not allowed.")}}return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},a.createElement("div",{className:"absolute inset-0"},a.createElement("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),a.createElement("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000"}),a.createElement("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500"})),a.createElement("div",{className:"max-w-lg w-full space-y-8 animate-fade-in relative z-10 mx-4"},a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl shadow-2xl p-8 border-4 border-white/20 relative overflow-hidden"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl"}),a.createElement("div",{className:"text-center mb-8 relative z-10"},a.createElement("div",{className:"flex justify-center mb-6"},a.createElement("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center shadow-lg border border-white/30"},a.createElement("img",{src:"/assets/images/logo.png",alt:"LTSU",className:"w-12 h-12 rounded-full"}))),a.createElement("h2",{className:"text-3xl font-bold text-white mb-2 animate-slide-up"},"Welcome Back"),a.createElement("p",{className:"text-white/90 text-lg"},"Sign in to LTSU Student Portal"),a.createElement("div",{className:"flex items-center justify-center gap-2 mt-3"},a.createElement("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),a.createElement("span",{className:"text-white/70 text-sm font-medium"},"Learn  Share  Grow"),a.createElement("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}))),a.createElement("form",{onSubmit:h,className:"space-y-6 relative z-10"},o&&a.createElement("div",{className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4 text-center"},a.createElement("p",{className:"text-red-200 text-sm font-medium"},o)),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Email Address"),a.createElement("input",{required:!0,type:"email",placeholder:"Enter your email",value:t,onChange:g=>e(g.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Password"),a.createElement("input",{required:!0,type:"password",placeholder:"Enter your password",value:n,onChange:g=>r(g.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"}))),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("label",{className:"flex items-center group cursor-pointer"},a.createElement("input",{type:"checkbox",checked:s,onChange:g=>i(g.target.checked),className:"mr-2 accent-blue-400"}),a.createElement("span",{className:"text-sm text-white/80 font-medium group-hover:text-white transition-colors"},"Remember me")),a.createElement("button",{onClick:d,className:"text-sm text-blue-400 hover:text-blue-300 font-semibold underline underline-offset-2 transition-all duration-200 hover:scale-105"},"Forgot password?")),a.createElement("button",{className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-white transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},"Sign In"),a.createElement("div",{className:"text-center"},a.createElement(sc,{to:"/signup",className:"text-white/80 hover:text-white text-sm font-medium transition-colors duration-200"},"Don't have an account? ",a.createElement("span",{className:"text-blue-400 hover:text-blue-300 font-semibold"},"Create one")))),a.createElement("div",{className:"absolute top-4 left-4 w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),a.createElement("div",{className:"absolute top-6 right-6 w-1 h-1 bg-purple-400 rounded-full animate-pulse"}),a.createElement("div",{className:"absolute bottom-4 left-6 w-1.5 h-1.5 bg-pink-400 rounded-full animate-pulse"}),a.createElement("div",{className:"absolute bottom-6 right-4 w-1 h-1 bg-cyan-400 rounded-full animate-pulse"}))))}function s3(){const[t,e]=a.useState({fullName:"",phone:"",email:"",password:"",confirm:"",gender:"",branch:"",specialization:"",rollNo:"",countryCode:"+91"}),[n,r]=a.useState(!1),[s,i]=a.useState(""),[o,c]=a.useState(!1),[u,d]=a.useState(!1);Qe();const h=()=>t.branch==="BTech CSE IBM"?["AI & ML","Data Science","IOT","Cyber Security"]:t.branch==="BTech Core"?["ME","EC","EE","Computer Science (Core)"]:[],g=b=>{const A=/[A-Z]/.test(b),D=/[a-z]/.test(b),I=/\d/.test(b),w=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(b);return b.length<8?"Password must be at least 8 characters long":A?D?I?w?null:"Password must contain at least one special character":"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter"};async function p(b){b.preventDefault(),i("");const k=g(t.password);if(k){i(k);return}if(t.password!==t.confirm){i("Passwords do not match");return}if(t.countryCode==="+91"&&t.phone.length!==10){i("Please enter a valid 10-digit Indian phone number");return}const A=t.fullName.trim().split(" "),D=A[0]||"",I=A.slice(1).join(" ")||"";try{const w=await iA(zt,t.email,t.password);await Pm(w.user,{displayName:t.fullName}),await lA(w.user),r(!0);const T={uid:w.user.uid,firstName:D,lastName:I,fullName:t.fullName,phoneNumber:t.countryCode+t.phone,email:t.email,studentId:t.rollNo,gender:t.gender,department:t.branch,specialization:t.specialization,currentYear:null,currentSemester:null,enrollmentYear:null,status:"pending_verification",createdAt:new Date,updatedAt:new Date,address:{street:"",city:"",state:"",pincode:"",country:""},academicRecords:{gpa:null,totalCredits:0,completedSubjects:[]}};await Vx(Te(X,"users",w.user.uid),T),console.log("User account created successfully:",T),alert("Verification email sent! Please check your email and click the verification link to activate your account. (Check in spam/junk folder if not found)")}catch(w){console.error("Signup error:",w),console.error("Error code:",w.code),console.error("Error message:",w.message),w.code==="permission-denied"?i("Account created but profile setup failed. Please contact admin or try logging in. Error: Permission denied."):w.code==="unavailable"?i("Service temporarily unavailable. Please try again later."):i(w.message||"Failed to create account. Please try again.")}}return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},a.createElement("div",{className:"absolute inset-0"},a.createElement("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),a.createElement("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000"}),a.createElement("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500"})),a.createElement("div",{className:"max-w-2xl w-full space-y-8 animate-fade-in relative z-10 mx-8"},a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl shadow-2xl p-8 border-4 border-white/20 relative overflow-hidden"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl"}),a.createElement("div",{className:"text-center mb-8 relative z-10"},a.createElement("div",{className:"flex justify-center mb-6"},a.createElement("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg"},a.createElement("img",{src:"/assets/images/logo.png",alt:"LTSU",className:"w-12 h-12 rounded-full"}))),a.createElement("h2",{className:"text-3xl font-bold text-white mb-2 animate-slide-up"},"Join LTSU Portal"),a.createElement("p",{className:"text-white/90 text-lg"},"Create Your Student Account"),a.createElement("div",{className:"flex items-center justify-center gap-2 mt-3"},a.createElement("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),a.createElement("span",{className:"text-white/70 text-sm font-medium"},"Learn  Share  Grow"),a.createElement("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}))),a.createElement("form",{onSubmit:p,className:"space-y-6 relative z-10"},s&&a.createElement("div",{className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4 text-center"},a.createElement("p",{className:"text-red-200 text-sm font-medium"},s)),a.createElement("div",{className:"grid grid-cols-1 gap-4"},a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Full Name"),a.createElement("input",{required:!0,placeholder:"Enter your full name",value:t.fullName,onChange:b=>e({...t,fullName:b.target.value}),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"})),a.createElement("div",{className:"relative"},a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Phone Number"),a.createElement("div",{className:"flex"},a.createElement("button",{type:"button",onClick:()=>c(!o),className:"px-3 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-l-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 min-w-[120px] text-left"},t.countryCode==="+91"?" +91":t.countryCode==="+1"?" +1":t.countryCode==="+44"?" +44":t.countryCode==="+61"?" +61":t.countryCode==="+81"?" +81":"Select Country"),a.createElement("input",{required:!0,type:"tel",placeholder:"Enter 10-digit phone number",value:t.phone,onChange:b=>{const k=b.target.value.replace(/\D/g,"");k.length<=10&&e({...t,phone:k})},maxLength:"10",pattern:"[0-9]{10}",className:"flex-1 px-4 py-3 bg-white/10 backdrop-blur-sm border-l-0 border border-white/20 rounded-r-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"})),o&&a.createElement("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 bg-black/90 backdrop-blur-2xl rounded-2xl shadow-2xl p-3 border border-white/20 w-64 max-h-80 overflow-hidden"},a.createElement("div",{className:"flex justify-between items-center mb-2"},a.createElement("h3",{className:"text-base font-bold text-white"},"Select Country"),a.createElement("button",{onClick:()=>c(!1),className:"text-white/70 hover:text-white text-lg"},"")),a.createElement("div",{className:"space-y-1"},a.createElement("div",{className:"max-h-64 overflow-y-auto space-y-1"},a.createElement("div",{onClick:()=>{e({...t,countryCode:"+91"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"IN +91")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+1"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"US +1")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+44"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"UK +44")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+61"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"AU +61")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+81"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"JP +81")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+86"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"CN +86")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+49"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"DE +49")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+33"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"FR +33")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+39"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"IT +39")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+7"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"RU +7")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+55"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"BR +55")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+52"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"MX +52")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+27"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"ZA +27")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+82"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"KR +82")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+65"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"SG +65")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+60"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"MY +60")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+63"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"PH +63")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+66"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"TH +66")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+84"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"VN +84")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+62"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"ID +62")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+20"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"EG +20")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+234"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"NG +234")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+254"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"KE +254")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+971"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"AE +971")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+966"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"SA +966")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+90"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"TR +90")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+48"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"PL +48")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+31"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"NL +31")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+46"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"SE +46")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+47"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"NO +47")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+45"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"DK +45")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+41"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"CH +41")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+43"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"AT +43")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+32"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"BE +32")),a.createElement("div",{onClick:()=>{e({...t,countryCode:"+34"}),c(!1)},className:"flex items-center p-2 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200"},a.createElement("span",{className:"text-lg mr-2"},""),a.createElement("span",{className:"text-white text-sm font-medium"},"ES +34")))))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Email Address"),a.createElement("input",{required:!0,type:"email",placeholder:"Enter your email",value:t.email,onChange:b=>e({...t,email:b.target.value}),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"}),a.createElement("div",{className:"mt-2 text-xs text-white/70"},"A verification link will be sent to this email after signup")),n&&a.createElement("div",{className:"bg-blue-500/20 backdrop-blur-sm border border-blue-400/30 rounded-xl p-4"},a.createElement("div",{className:"flex items-center gap-2 text-blue-200 text-sm font-medium"},a.createElement("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center"},a.createElement("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},a.createElement("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),a.createElement("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"}))),"Verification email sent! Please check your email and click the verification link to activate your account. (Check in spam/junk folder if not found)")),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Roll Number"),a.createElement("input",{required:!0,placeholder:"Enter your roll number",value:t.rollNo,onChange:b=>e({...t,rollNo:b.target.value}),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"}))),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Gender"),a.createElement("select",{required:!0,value:t.gender,onChange:b=>e({...t,gender:b.target.value}),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"},a.createElement("option",{value:"",className:"bg-gray-800"},"Select gender"),a.createElement("option",{value:"Male",className:"bg-gray-800"},"Male"),a.createElement("option",{value:"Female",className:"bg-gray-800"},"Female"),a.createElement("option",{value:"Other",className:"bg-gray-800"},"Other"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Branch"),a.createElement("select",{required:!0,value:t.branch,onChange:b=>e({...t,branch:b.target.value,specialization:""}),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"},a.createElement("option",{value:"",className:"bg-gray-800"},"Select branch"),a.createElement("option",{value:"BTech CSE IBM",className:"bg-gray-800"},"BTech CSE IBM"),a.createElement("option",{value:"BTech Core",className:"bg-gray-800"},"BTech Core"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Specialization"),a.createElement("select",{required:!0,value:t.specialization,onChange:b=>e({...t,specialization:b.target.value}),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"},a.createElement("option",{value:"",className:"bg-gray-800"},"Select specialization"),h().map(b=>a.createElement("option",{key:b,value:b,className:"bg-gray-800"},b)))),a.createElement("div",{className:"grid grid-cols-1 gap-3"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Password"),a.createElement("input",{required:!0,type:"password",placeholder:"Create strong password (min 8 chars)",value:t.password,onChange:b=>e({...t,password:b.target.value}),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"}),a.createElement("div",{className:"mt-2 text-xs text-white/70"},"Must include: uppercase, lowercase, number, special character, minimum 8 characters")),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-semibold text-white mb-2"},"Confirm Password"),a.createElement("input",{required:!0,type:"password",placeholder:"Confirm password",value:t.confirm,onChange:b=>e({...t,confirm:b.target.value}),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200"}))))),a.createElement("button",{type:"submit",disabled:n,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-white transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},n?"Verification Email Sent":"Create Account"),a.createElement("div",{className:"text-center"},a.createElement(sc,{to:"/login",className:"text-white/80 hover:text-white text-sm font-medium transition-colors duration-200"},"Already have an account? ",a.createElement("span",{className:"text-blue-400 hover:text-blue-300 font-semibold"},"Sign in")))),a.createElement("div",{className:"absolute top-4 left-4 w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),a.createElement("div",{className:"absolute top-6 right-6 w-1 h-1 bg-purple-400 rounded-full animate-pulse"}),a.createElement("div",{className:"absolute bottom-4 left-6 w-1.5 h-1.5 bg-pink-400 rounded-full animate-pulse"}),a.createElement("div",{className:"absolute bottom-6 right-4 w-1 h-1 bg-cyan-400 rounded-full animate-pulse"}))))}function I_({user:t,onClose:e}){const[n,r]=V.useState("monthly"),[s,i]=V.useState(!1),[o,c]=V.useState("card"),[u,d]=V.useState({number:"",expiry:"",cvv:"",name:""}),[h,g]=V.useState(""),p={monthly:{name:"Monthly Plan",price:499,originalPrice:499,period:"month",features:["Placement Preparation Kit","Internships and Job Openings","ATS Resume Building","Project Ideas (Industry Level)","Alumni Support","Mock Interviews","Certification Courses","Freelancing Work (Earn While Learning)","Emerging Tech Trends","Basic Courses for Students","Top Performers Winner"]},annual:{name:"Annual Plan",price:4999,originalPrice:5988,period:"year",savings:"Save 30%",features:["Everything in Monthly Plan","Advanced AI Tutoring Sessions","Premium Course Library (React, Node.js, ML, Cloud)","Unlimited 1-on-1 Mentorship","Unlimited Resume Reviews","Job Placement Assistance","Advanced Analytics Dashboard","VIP Community Access","Priority Support 24/7","Exclusive Webinars & Workshops"]}},b=async()=>{if(o==="card"){if(!u.number||!u.expiry||!u.cvv||!u.name){alert(" Please fill in all card details.");return}}else if(o==="upi"&&!h){alert(" Please enter your UPI ID.");return}i(!0);try{if(await new Promise(w=>setTimeout(w,3e3)),!(Math.random()>.1))throw new Error("Payment failed");const A=Te(X,"users",t.uid);await Gt(A,{isPremium:!0,premiumPlan:n,premiumStartDate:new Date,premiumExpiryDate:n==="monthly"?new Date(Date.now()+30*24*60*60*1e3):new Date(Date.now()+365*24*60*60*1e3),paymentMethod:o,paymentDate:new Date}),alert(` Payment Successful!

Welcome to LTSU Premium!

Plan: ${n==="monthly"?"Monthly Plan":"Annual Plan"}
Amount: ${n==="monthly"?"499":"4,999"}
Payment Method: ${o.toUpperCase()}

Your premium features are now unlocked. Enjoy your enhanced learning experience!`),e(),window.location.reload()}catch(k){console.error("Error upgrading to premium:",k),alert(" Payment failed. Please check your payment details and try again, or contact support at info.studentportalofficial@gmail.com")}finally{i(!1)}};return a.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50"},a.createElement("div",{className:"bg-white/95 backdrop-blur-2xl p-8 rounded-3xl shadow-2xl max-w-4xl w-full mx-4 border border-white/30"},a.createElement("div",{className:"text-center mb-8"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h2",{className:"text-3xl font-bold text-gray-800 mb-2"},"Upgrade to LTSU Premium"),a.createElement("p",{className:"text-gray-600 text-lg"},"Unlock your full potential with advanced learning tools")),a.createElement("div",{className:"grid md:grid-cols-2 gap-6 mb-8"},Object.entries(p).map(([k,A])=>a.createElement("div",{key:k,className:`p-6 rounded-2xl border-2 transition-all cursor-pointer ${n===k?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300"}`,onClick:()=>r(k)},a.createElement("div",{className:"text-center mb-4"},a.createElement("h3",{className:"text-xl font-bold text-gray-800"},A.name),A.savings&&a.createElement("span",{className:"inline-block bg-green-500 text-white px-2 py-1 rounded-full text-sm font-semibold mt-2"},A.savings)),a.createElement("div",{className:"text-center mb-4"},a.createElement("div",{className:"flex items-center justify-center gap-2"},a.createElement("span",{className:"text-3xl font-bold text-gray-800"},"",A.price.toLocaleString()),a.createElement("span",{className:"text-gray-500"},"/",A.period)),A.originalPrice!==A.price&&a.createElement("div",{className:"text-sm text-gray-500 line-through"},"",A.originalPrice.toLocaleString())),a.createElement("ul",{className:"space-y-2"},A.features.map((D,I)=>a.createElement("li",{key:I,className:"flex items-center gap-2 text-sm text-gray-700"},a.createElement("span",{className:"text-green-500"},""),D)))))),a.createElement("div",{className:"mb-8"},a.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-4"}," Choose Payment Method"),a.createElement("div",{className:"grid grid-cols-3 gap-4 mb-6"},a.createElement("button",{onClick:()=>c("card"),className:`flex items-center justify-center gap-2 p-4 rounded-lg border-2 transition-all ${o==="card"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`},a.createElement("span",{className:"text-2xl"},""),a.createElement("span",{className:"text-sm font-medium"},"Credit/Debit Card")),a.createElement("button",{onClick:()=>c("upi"),className:`flex items-center justify-center gap-2 p-4 rounded-lg border-2 transition-all ${o==="upi"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`},a.createElement("span",{className:"text-2xl"},""),a.createElement("span",{className:"text-sm font-medium"},"UPI")),a.createElement("button",{onClick:()=>c("netbanking"),className:`flex items-center justify-center gap-2 p-4 rounded-lg border-2 transition-all ${o==="netbanking"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`},a.createElement("span",{className:"text-2xl"},""),a.createElement("span",{className:"text-sm font-medium"},"Net Banking"))),o==="card"&&a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Card Number"),a.createElement("input",{type:"text",placeholder:"1234 5678 9012 3456",value:u.number,onChange:k=>d({...u,number:k.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Expiry Date"),a.createElement("input",{type:"text",placeholder:"MM/YY",value:u.expiry,onChange:k=>d({...u,expiry:k.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"CVV"),a.createElement("input",{type:"text",placeholder:"123",value:u.cvv,onChange:k=>d({...u,cvv:k.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Cardholder Name"),a.createElement("input",{type:"text",placeholder:"John Doe",value:u.name,onChange:k=>d({...u,name:k.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}))),o==="upi"&&a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"UPI ID"),a.createElement("input",{type:"text",placeholder:"yourname@upi",value:h,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})),a.createElement("div",{className:"bg-blue-50 p-4 rounded-lg"},a.createElement("p",{className:"text-sm text-blue-800"}," Popular UPI apps: Google Pay, PhonePe, Paytm, Amazon Pay"))),o==="netbanking"&&a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"bg-green-50 p-4 rounded-lg"},a.createElement("p",{className:"text-sm text-green-800"}," You will be redirected to your bank's secure login page to complete the payment.")),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("select",{className:"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},a.createElement("option",null,"Select Bank"),a.createElement("option",null,"SBI"),a.createElement("option",null,"HDFC"),a.createElement("option",null,"ICICI"),a.createElement("option",null,"Axis Bank"),a.createElement("option",null,"Other Banks")),a.createElement("div",{className:"flex items-center text-sm text-gray-600"}," 256-bit SSL encryption")))),a.createElement("div",{className:"flex gap-4 justify-center"},a.createElement("button",{onClick:e,className:"px-6 py-3 bg-gray-200 text-gray-800 rounded-lg font-semibold hover:bg-gray-300 transition-colors"},"Maybe Later"),a.createElement("button",{onClick:b,disabled:s,className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},s?a.createElement(a.Fragment,null,a.createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."):a.createElement(a.Fragment,null," Upgrade Now"))),a.createElement("div",{className:"text-center mt-6 text-sm text-gray-500"}," Secure payment  30-day money-back guarantee  Cancel anytime")))}function Pt({user:t}){var L,U,O;const e=Qe(),[n,r]=a.useState(!1),[s,i]=a.useState(!1),[o,c]=a.useState(!1),[u,d]=a.useState(!1),[h,g]=a.useState(!1),[p,b]=a.useState("light"),[k,A]=a.useState(!1),[D,I]=a.useState("English"),w=a.useRef(null),T=a.useRef(null);return a.useEffect(()=>{const _=y=>{w.current&&!w.current.contains(y.target)&&r(!1)};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[]),a.useEffect(()=>{p==="dark"?document.body.classList.add("dark"):document.body.classList.remove("dark")},[p]),a.createElement("header",{className:"bg-white/10 backdrop-blur-2xl shadow-2xl p-4 flex items-center border-b border-white/20 relative z-20"},a.createElement("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("/")},a.createElement("img",{src:"/assets/images/logo.png",alt:"LTSU",className:"w-12 h-12 rounded-full hover:scale-110 transition-transform duration-200"}),a.createElement("div",null,a.createElement("div",{className:"font-bold text-white hover:text-blue-400 transition-colors duration-200"},"LTSU Student Portal"),a.createElement("div",{className:"text-xs text-white/70"},"Learn  Share  Grow"))),a.createElement("div",{className:"ml-auto flex items-center gap-6"},a.createElement("nav",{className:"hidden md:flex space-x-6 text-sm"},a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("dashboard"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100)},className:"text-white hover:text-blue-400 transition-colors duration-200"},"Dashboard"),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("services"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100)},className:"text-white hover:text-blue-400 transition-colors duration-200"},"Student Services"),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("courses"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100)},className:"text-white hover:text-blue-400 transition-colors duration-200"},"Courses"),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("about"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100)},className:"text-white hover:text-blue-400 transition-colors duration-200"},"About"),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("events"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100)},className:"text-white hover:text-blue-400 transition-colors duration-200"},"Events"),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("hackathons"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100)},className:"text-white hover:text-blue-400 transition-colors duration-200"},"Hackathons")),a.createElement("div",{ref:T,className:"relative z-30"},a.createElement("button",{onClick:()=>i(!0),className:"md:hidden text-white hover:text-blue-400 transition-colors duration-200 p-2 rounded-md hover:bg-white/10"},a.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})))),a.createElement("div",{ref:w,className:"relative"},a.createElement("button",{onClick:()=>r(!n),className:"px-3 py-1 bg-white/20 backdrop-blur-sm text-white rounded-md border border-white/30 hover:bg-white/30 transition-all duration-200"},"Profile"),n&&a.createElement("div",{className:"absolute right-0 mt-2 w-64 bg-white/95 backdrop-blur-2xl border border-white/30 rounded-xl shadow-2xl z-50 animate-fade-in"},a.createElement("div",{className:"p-4 border-b border-gray-200"},a.createElement("div",{className:"flex items-center gap-3"},a.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold"},((L=t==null?void 0:t.displayName)==null?void 0:L.charAt(0))||((U=t==null?void 0:t.email)==null?void 0:U.charAt(0))||""),a.createElement("div",null,a.createElement("div",{className:"font-semibold text-gray-800"},(t==null?void 0:t.displayName)||"User"),a.createElement("div",{className:"text-sm text-gray-500"},t==null?void 0:t.email)))),a.createElement("div",{className:"py-2"},a.createElement(sc,{to:"/profile",className:"block px-4 py-3 hover:bg-blue-50 text-gray-700 hover:text-blue-600 transition-colors duration-200",onClick:()=>r(!1)}," View Profile"),((O=t==null?void 0:t.email)==null?void 0:O.includes("admin"))&&a.createElement(sc,{to:"/admin",className:"block px-4 py-3 hover:bg-blue-50 text-blue-600 font-semibold transition-colors duration-200",onClick:()=>r(!1)}," Admin Dashboard"),a.createElement("button",{onClick:()=>{c(!0),r(!1)},className:"block w-full text-left px-4 py-3 hover:bg-gray-50 text-gray-700 transition-colors duration-200"}," Help"),a.createElement("button",{onClick:()=>{d(!0),r(!1)},className:"block w-full text-left px-4 py-3 hover:bg-gray-50 text-gray-700 transition-colors duration-200"}," Settings"),a.createElement("div",{className:"border-t border-gray-200 mt-2"},a.createElement("button",{onClick:()=>{af(zt),e("/login"),r(!1)},className:"block w-full text-left px-4 py-3 hover:bg-red-50 text-red-600 transition-colors duration-200"}," Logout")))))),s&&a.createElement(a.Fragment,null,a.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>i(!1)}),a.createElement("div",{className:"absolute top-full left-0 right-0 bg-gradient-to-b from-gray-900/95 via-gray-800/95 to-black/95 backdrop-blur-2xl border-t border-white/20 shadow-2xl z-50 md:hidden animate-fade-in",style:{animation:"none"}},a.createElement("div",{className:"py-2"},a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("dashboard"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100),i(!1)},className:"flex items-center gap-3 w-full text-left px-4 py-3 hover:bg-white/10 text-white hover:text-blue-400 transition-all duration-200 border-b border-white/10 last:border-b-0"},a.createElement("span",{className:"text-lg"},""),a.createElement("span",{className:"font-medium"},"Dashboard")),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("services"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100),i(!1)},className:"flex items-center gap-3 w-full text-left px-4 py-3 hover:bg-white/10 text-white hover:text-blue-400 transition-all duration-200 border-b border-white/10 last:border-b-0"},a.createElement("span",{className:"text-lg"},""),a.createElement("span",{className:"font-medium"},"Student Services")),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("courses"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100),i(!1)},className:"flex items-center gap-3 w-full text-left px-4 py-3 hover:bg-white/10 text-white hover:text-blue-400 transition-all duration-200 border-b border-white/10 last:border-b-0"},a.createElement("span",{className:"text-lg"},""),a.createElement("span",{className:"font-medium"},"Courses")),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("about"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100),i(!1)},className:"flex items-center gap-3 w-full text-left px-4 py-3 hover:bg-white/10 text-white hover:text-blue-400 transition-all duration-200 border-b border-white/10 last:border-b-0"},a.createElement("span",{className:"text-lg"},""),a.createElement("span",{className:"font-medium"},"About")),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("events"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100),i(!1)},className:"flex items-center gap-3 w-full text-left px-4 py-3 hover:bg-white/10 text-white hover:text-blue-400 transition-all duration-200 border-b border-white/10 last:border-b-0"},a.createElement("span",{className:"text-lg"},""),a.createElement("span",{className:"font-medium"},"Events")),a.createElement("button",{onClick:()=>{e("/"),setTimeout(()=>{var _;return(_=document.getElementById("hackathons"))==null?void 0:_.scrollIntoView({behavior:"smooth"})},100),i(!1)},className:"flex items-center gap-3 w-full text-left px-4 py-3 hover:bg-white/10 text-white hover:text-blue-400 transition-all duration-200"},a.createElement("span",{className:"text-lg"},""),a.createElement("span",{className:"font-medium"},"Hackathons"))))),o&&a.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50"},a.createElement("div",{className:"bg-white/95 backdrop-blur-2xl p-6 rounded-2xl shadow-2xl max-w-md w-full mx-4 border border-white/30"},a.createElement("h3",{className:"text-xl font-bold mb-4 text-gray-800"},"Help & Support"),a.createElement("div",{className:"space-y-3 text-sm text-gray-700"},a.createElement("p",null,a.createElement("strong",null,"Dashboard:")," View your academic progress and quick actions."),a.createElement("p",null,a.createElement("strong",null,"Student Services:")," Access attendance, timetable, grades, and advisor contact."),a.createElement("p",null,a.createElement("strong",null,"Courses:")," External learning resources and tutorials."),a.createElement("p",null,a.createElement("strong",null,"Profile:")," Update your information and avatar."),a.createElement("p",null,a.createElement("strong",null,"Contact:")," Send queries to the portal administrators.")),a.createElement("button",{onClick:()=>c(!1),className:"mt-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200"},"Close"))),u&&a.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50"},a.createElement("div",{className:"bg-white/95 backdrop-blur-2xl p-6 rounded-2xl shadow-2xl max-w-md w-full mx-4 border border-white/30"},a.createElement("h3",{className:"text-xl font-bold mb-4 text-gray-800"},"Settings"),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2 text-gray-700"},"Theme"),a.createElement("select",{value:p,onChange:_=>b(_.target.value),className:"w-full p-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200"},a.createElement("option",{value:"light"},"Light"),a.createElement("option",{value:"dark"},"Dark"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2 text-gray-700"},"Notifications"),a.createElement("div",{className:"flex items-center"},a.createElement("input",{type:"checkbox",checked:k,onChange:_=>A(_.target.checked),className:"mr-3 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),a.createElement("span",{className:"text-gray-700"},"Email notifications"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2 text-gray-700"},"Language"),a.createElement("select",{value:D,onChange:_=>I(_.target.value),className:"w-full p-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200"},a.createElement("option",{value:"English"},"English"),a.createElement("option",{value:"Hindi"},"Hindi")))),a.createElement("button",{onClick:()=>{d(!1),alert("Settings saved!")},className:"mt-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 w-full"},"Save & Close"))),h&&a.createElement(I_,{user:t,onClose:()=>g(!1)}))}function Rt(){return a.createElement("footer",{className:"mt-8 bg-gradient-to-r from-slate-900 via-gray-900 to-slate-900 text-white py-8 rounded-xl"},a.createElement("div",{className:"container mx-auto px-6"},a.createElement("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6"},a.createElement("div",{className:"flex items-center gap-4 mb-4 md:mb-0"},a.createElement("img",{src:"/assets/images/logo.png",alt:"LTSU",className:"w-10 h-10 rounded-full"}),a.createElement("div",null,a.createElement("h2",{className:"text-xl font-bold"},"LTSU Student Portal"),a.createElement("p",{className:"text-sm text-gray-400"},"Learn  Share  Grow"))),a.createElement("div",{className:"flex items-center gap-6 text-sm text-gray-300"},a.createElement("div",null,a.createElement("span",{className:"font-semibold text-white"},"Email:")," info.studentportalofficial@gmail.com"),a.createElement("div",null,a.createElement("span",{className:"font-semibold text-white"},"Phone:")," +91 9391485316"))),a.createElement("div",{className:"flex flex-col md:flex-row items-center justify-between"},a.createElement("div",{className:"flex items-center gap-4 mb-4 md:mb-0"},a.createElement("span",{className:"text-sm font-semibold text-white"},"Connect:"),a.createElement("div",{className:"flex gap-3"},a.createElement("a",{href:"mailto:info.studentportalofficial@gmail.com",className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center hover:bg-red-700 transition transform hover:scale-110","aria-label":"Email"},a.createElement("img",{src:"/assets/images/gmail.png",alt:"Gmail",className:"w-5 h-5 rounded-full"})),a.createElement("a",{href:"https://github.com/ltsu-student-portal",target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition transform hover:scale-110","aria-label":"GitHub"},a.createElement("img",{src:"/assets/images/github.png",alt:"GitHub",className:"w-5 h-5 rounded-full"})),a.createElement("a",{href:"https://www.linkedin.com/company/ltsu-student-portal",target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-blue-700 rounded-full flex items-center justify-center hover:bg-blue-600 transition transform hover:scale-110","aria-label":"LinkedIn"},a.createElement("img",{src:"/assets/images/linkedin.png",alt:"LinkedIn",className:"w-5 h-5 rounded-full"})))),a.createElement("div",{className:"flex items-center gap-4 text-sm"},a.createElement("span",{className:"font-semibold text-white"},"Developed by:"),a.createElement("span",{className:"text-gray-300"},"Vairagade Pavan Kalyan (AI & ML) & Satish (Data Science)"))),a.createElement("div",{className:"border-t border-gray-700 mt-6 pt-4 text-center"},a.createElement("p",{className:"text-gray-400 text-xs"}," 2025 LTSU Student Portal. All rights reserved."))))}const a3=[{id:1,name:"First Year",semesters:["1st Semester","2nd Semester"]},{id:2,name:"Second Year",semesters:["3rd Semester","4th Semester"]},{id:3,name:"Third Year",semesters:["5th Semester","6th Semester"]},{id:4,name:"Fourth Year",semesters:["7th Semester","8th Semester"]}];function i3({user:t}){const e=Qe(),[n,r]=a.useState(null),[s,i]=a.useState(null),[o,c]=a.useState(null),[u,d]=a.useState(null),[h,g]=a.useState(!1),[p,b]=a.useState([]),[k,A]=a.useState([]),[D,I]=a.useState([]),[w,T]=a.useState(!0),[L,U]=a.useState(0),O=3;a.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{const R=await Km(Te(X,"users",t.uid));R.exists()&&d(R.data())}catch(R){console.error("Error fetching user data:",R)}})()},[t]),a.useEffect(()=>{(async()=>{try{T(!0),console.log(" Loading dynamic content from Firebase..."),console.log(" Loading events...");try{console.log(" Creating events query...");const C=ie(Z(X,"events"),Ae("createdAt","desc"));console.log(" Executing query...");const P=await me(C);console.log(" Got snapshot with",P.size,"documents");const B=P.docs.map(J=>{const Y=J.data();return console.log(" Document:",J.id,Y),{id:J.id,...Y}});if(console.log(" Events loaded:",B.length,"events"),console.log(" Final events data:",B),B.length>0)console.log(" Setting Firebase events in state - SUCCESS!"),b(B),console.log(" Events state should now be:",B);else throw console.log(" No events found in Firebase, using fallback"),new Error("No events in Firebase")}catch(C){throw console.error(" Events query failed:",C),console.error(" Error details:",C.message),console.error(" Error stack:",C.stack),C}console.log(" Loading announcements...");const R=ie(Z(X,"announcements"),Ae("createdAt","desc"),rs(3)),ae=(await me(R)).docs.map(C=>({id:C.id,...C.data()}));console.log(" Announcements loaded:",ae.length,"announcements"),A(ae),console.log(" Loading deadlines...");const ee=ie(Z(X,"deadlines"),Ae("dueDate","asc"),rs(2)),ve=(await me(ee)).docs.map(C=>({id:C.id,...C.data()}));console.log(" Deadlines loaded:",ve.length,"deadlines"),I(ve),console.log(" All Firebase data loaded successfully!")}catch(R){console.error(" Error loading dynamic content:",R),console.log(" Falling back to default data..."),b([{title:"Tech Talk: AI in Education",description:"Explore how artificial intelligence is transforming educational methodologies",date:"2024-03-15",type:"academic"},{title:"Career Fair",description:"Connect with top companies and discover exciting career opportunities",date:"2024-04-05",type:"academic"},{title:"Cultural Fest",description:"Celebrate diversity through music, dance, and cultural performances",date:"2024-04-20",type:"cultural"}]),A([{title:"Mid-term Exam Schedule",content:"Available now - Check your email",type:"academic",priority:"high"},{title:"New Course Registration",content:"Opens next week",type:"academic",priority:"medium"},{title:"Scholarship Applications",content:"Deadline: March 30",type:"general",priority:"high"}]),I([{title:"Data Structures Assignment",description:"Submit your data structures assignment",dueDate:"2024-03-20",priority:"high"},{title:"AI Project Proposal",description:"Submit your AI project proposal",dueDate:"2024-03-25",priority:"medium"}])}finally{T(!1)}})()},[]);const _=v=>{switch(v){case"Male":return"";case"Female":return"";default:return""}},y=()=>{U(v=>v+O>=p.length?0:v+O)},E=()=>{U(v=>v===0?Math.max(0,p.length-O):Math.max(0,v-O))},N=p.slice(L,L+O);return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden"},a.createElement("div",{className:"absolute inset-0"},a.createElement("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),a.createElement("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000"}),a.createElement("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500"})),a.createElement(Pt,{user:t}),a.createElement("div",{className:"container mx-auto p-6"},a.createElement("main",null,a.createElement("section",{id:"dashboard",className:"mb-8"},a.createElement("div",{className:"mb-8 p-8 bg-white/10 backdrop-blur-2xl rounded-3xl shadow-2xl text-center border border-white/20 animate-fade-in relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl"}),a.createElement("div",{className:"relative z-10"},a.createElement("div",{className:"text-6xl mb-4 text-white animate-pulse"},u!=null&&u.gender?_(u.gender):""),a.createElement("h1",{className:"text-3xl md:text-4xl font-bold mb-2 text-white"},"Welcome back, ",a.createElement("span",{className:"bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent"},(t==null?void 0:t.displayName)||(t==null?void 0:t.email)),"!"),a.createElement("p",{className:"text-lg text-white/90 font-medium"}," Ready to excel in your academic journey?"))),a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-2xl text-white rounded-2xl shadow-xl mb-6 animate-slide-up border border-white/20 relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-2xl"}),a.createElement("div",{className:"relative z-10"},a.createElement("h2",{className:"text-3xl font-bold mb-2 text-center"},"Academic Progress"),a.createElement("p",{className:"text-white/90 text-center"},"Navigate through your educational journey with interactive exploration"))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},a3.map((v,R)=>{const S=["","","",""];return a.createElement("div",{key:v.id,className:"p-6 bg-white rounded-lg shadow-lg transform hover:-translate-y-1 transition"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-4xl mb-4"},S[R]),a.createElement("h3",{className:"text-2xl font-bold text-gray-800 mb-2"},v.name),a.createElement("p",{className:"text-gray-600 text-sm mb-4"},"Track your progress through semesters and specializations in ",v.name.toLowerCase(),"."),a.createElement("button",{onClick:()=>e(`/year/${v.id}`),className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition shadow-lg"},"Explore Journey ")))})),a.createElement("div",{className:"mt-8 p-6 bg-white/10 backdrop-blur-2xl rounded-lg shadow-lg border border-white/20 relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-lg"}),a.createElement("div",{className:"relative z-10"},a.createElement("h3",{className:"text-xl font-bold mb-4 text-white"},"Recent Announcements"),w?a.createElement("div",{className:"space-y-3"},[1,2,3].map(v=>a.createElement("div",{key:v,className:"p-3 bg-gray-50 rounded animate-pulse"},a.createElement("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a.createElement("div",{className:"h-3 bg-gray-200 rounded w-3/4"})))):k.length>0?a.createElement("ul",{className:"space-y-3"},k.map(v=>a.createElement("li",{key:v.id,className:`p-3 border-l-4 rounded backdrop-blur-sm ${v.priority==="high"?"bg-yellow-500/20 border-yellow-400 text-white":v.priority==="medium"?"bg-blue-500/20 border-blue-400 text-white":"bg-green-500/20 border-green-400 text-white"}`},a.createElement("div",{className:"font-semibold text-sm"},v.title),a.createElement("div",{className:"text-xs text-white/80"},v.content)))):a.createElement("div",{className:"text-center py-4 text-white/70"},a.createElement("div",{className:"text-2xl mb-2"},""),a.createElement("p",null,"No announcements available")))),a.createElement("div",{className:"mt-8 p-6 bg-white/10 backdrop-blur-2xl rounded-lg shadow-lg border border-white/20 relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-lg"}),a.createElement("div",{className:"relative z-10"},a.createElement("h3",{className:"text-xl font-bold mb-4 text-white"},"Upcoming Deadlines"),w?a.createElement("div",{className:"space-y-3"},[1,2].map(v=>a.createElement("div",{key:v,className:"p-3 border rounded animate-pulse"},a.createElement("div",{className:"flex justify-between items-center"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"})),a.createElement("div",{className:"h-6 bg-gray-200 rounded w-16"}))))):D.length>0?a.createElement("ul",{className:"space-y-3"},D.map(v=>a.createElement("li",{key:v.id,className:"flex justify-between items-center p-3 border border-white/20 rounded backdrop-blur-sm bg-white/10"},a.createElement("div",null,a.createElement("div",{className:"font-semibold text-sm text-white"},v.title),a.createElement("div",{className:"text-xs text-white/80"},"Due: ",new Date(v.dueDate).toLocaleDateString())),a.createElement("span",{className:`text-xs px-2 py-1 rounded ${v.priority==="high"?"bg-red-500/20 text-red-200 border border-red-400/30":v.priority==="medium"?"bg-yellow-500/20 text-yellow-200 border border-yellow-400/30":"bg-green-500/20 text-green-200 border border-green-400/30"}`},v.priority)))):a.createElement("div",{className:"text-center py-4 text-white/70"},a.createElement("div",{className:"text-2xl mb-2"},""),a.createElement("p",null,"No upcoming deadlines"))))),a.createElement("section",{id:"services",className:"mb-8"},a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-2xl text-white rounded-2xl shadow-xl mb-6 animate-slide-up border border-white/20 relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-2xl"}),a.createElement("div",{className:"relative z-10"},a.createElement("h3",{className:"text-3xl font-bold mb-2 text-center"}," Student Services"),a.createElement("p",{className:"text-white/90 text-center"},"Access essential academic and administrative services"))),a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl shadow-xl p-8 border border-white/20 animate-fade-in relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl"}),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10"},a.createElement("div",{className:"p-4 bg-white/10 backdrop-blur-sm rounded-lg text-center hover:shadow-lg transition border border-white/20"},a.createElement("div",{className:"text-3xl mb-2 text-white"},""),a.createElement("h4",{className:"font-semibold mb-2 text-white"},"View Attendance"),a.createElement("button",{onClick:()=>alert("Attendance: 92%"),className:"px-4 py-2 bg-blue-500/20 text-white rounded hover:bg-blue-600/30 border border-blue-400/30 backdrop-blur-sm"},"Check")),a.createElement("div",{className:"p-4 bg-white/10 backdrop-blur-sm rounded-lg text-center hover:shadow-lg transition border border-white/20"},a.createElement("div",{className:"text-3xl mb-2 text-white"},""),a.createElement("h4",{className:"font-semibold mb-2 text-white"},"Timetable"),a.createElement("button",{onClick:()=>e("/timetable"),className:"px-4 py-2 bg-green-500/20 text-white rounded hover:bg-green-600/30 border border-green-400/30 backdrop-blur-sm"},"View")),a.createElement("div",{className:"p-4 bg-white/10 backdrop-blur-sm rounded-lg text-center hover:shadow-lg transition border border-white/20"},a.createElement("div",{className:"text-3xl mb-2 text-white"},""),a.createElement("h4",{className:"font-semibold mb-2 text-white"},"Grades"),a.createElement("button",{onClick:()=>alert("Current GPA: 8.5"),className:"px-4 py-2 bg-purple-500/20 text-white rounded hover:bg-purple-600/30 border border-purple-400/30 backdrop-blur-sm"},"View")),a.createElement("div",{className:"p-4 bg-white/10 backdrop-blur-sm rounded-lg text-center hover:shadow-lg transition border border-white/20"},a.createElement("div",{className:"text-3xl mb-2 text-white"},""),a.createElement("h4",{className:"font-semibold mb-2 text-white"},"Contact Advisor"),a.createElement("button",{onClick:()=>alert("Advisor contact: info.studentportalofficial@gmail.com"),className:"px-4 py-2 bg-orange-500/20 text-white rounded hover:bg-orange-600/30 border border-orange-400/30 backdrop-blur-sm"},"Contact"))))),a.createElement("section",{id:"courses",className:"mb-8"},a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-2xl text-white rounded-2xl shadow-xl mb-6 animate-slide-up border border-white/20 relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-2xl"}),a.createElement("div",{className:"relative z-10"},a.createElement("h3",{className:"text-3xl font-bold mb-2 text-center"}," Courses & Tutorials"),a.createElement("p",{className:"text-white/90 text-center"},"Enhance your skills with comprehensive learning resources"))),a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl shadow-xl p-8 border border-white/20 animate-fade-in relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl"}),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10"},a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-sm rounded-xl shadow-lg text-center transform hover:scale-105 transition border border-white/20"},a.createElement("div",{className:"text-4xl mb-4 text-white"},""),a.createElement("h4",{className:"font-bold text-xl text-white mb-3"},"Python Full Course"),a.createElement("p",{className:"text-white/80 text-sm mb-4"},"Master Python programming from basics to advanced concepts"),a.createElement("button",{onClick:()=>e("/python-courses"),className:"inline-block px-6 py-3 bg-blue-500/20 text-white rounded-lg font-semibold hover:bg-blue-600/30 border border-blue-400/30 backdrop-blur-sm transition"},"Explore Courses")),a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-sm rounded-xl shadow-lg text-center transform hover:scale-105 transition border border-white/20"},a.createElement("div",{className:"text-4xl mb-4 text-white"},""),a.createElement("h4",{className:"font-bold text-xl text-white mb-3"},"Full Stack Development"),a.createElement("p",{className:"text-white/80 text-sm mb-4"},"Build complete web applications with modern technologies"),a.createElement("button",{onClick:()=>e("/fullstack-courses"),className:"inline-block px-6 py-3 bg-purple-500/20 text-white rounded-lg font-semibold hover:bg-purple-600/30 border border-purple-400/30 backdrop-blur-sm transition"},"Explore Courses")),a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-sm rounded-xl shadow-lg text-center transform hover:scale-105 transition border border-white/20"},a.createElement("div",{className:"text-4xl mb-4 text-white"},""),a.createElement("h4",{className:"font-bold text-xl text-white mb-3"},"DSA Crash Course"),a.createElement("p",{className:"text-white/80 text-sm mb-4"},"Master Data Structures and Algorithms for technical interviews"),a.createElement("button",{onClick:()=>e("/dsa-courses"),className:"inline-block px-6 py-3 bg-green-500/20 text-white rounded-lg font-semibold hover:bg-green-600/30 border border-green-400/30 backdrop-blur-sm transition"},"Explore Courses"))),a.createElement("div",{className:"mt-8 p-8 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 backdrop-blur-2xl rounded-3xl shadow-2xl border border-yellow-400/30 text-center"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-3xl font-bold text-white mb-4"},"Unlock Premium Features"),a.createElement("p",{className:"text-white/90 text-lg mb-6"},"Get access to advanced courses, career services, mentorship, and exclusive opportunities"),a.createElement("button",{onClick:()=>e("/premium-benefits"),className:"px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-xl font-bold hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"}," Upgrade Now")))),a.createElement("section",{id:"events",className:"mb-8"},a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-2xl text-white rounded-2xl shadow-xl mb-6 animate-slide-up border border-white/20 relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-2xl"}),a.createElement("div",{className:"relative z-10"},a.createElement("h4",{className:"text-3xl font-bold mb-2 text-center"}," Upcoming Events of LTSU"),a.createElement("p",{className:"text-white/90 text-center"},"Join exciting events and expand your horizons"))),a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl shadow-xl p-8 border border-white/20 animate-fade-in relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl"}),w?a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},[1,2,3].map(v=>a.createElement("div",{key:v,className:"p-6 bg-white rounded-xl shadow-lg text-center animate-pulse"},a.createElement("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"}),a.createElement("div",{className:"h-6 bg-gray-200 rounded mb-3"}),a.createElement("div",{className:"h-4 bg-gray-200 rounded mb-4"}),a.createElement("div",{className:"h-8 bg-gray-200 rounded"})))):p.length>0?a.createElement("div",{className:"relative"},p.length>O&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:E,className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 z-10 bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-all duration-300 text-blue-600 hover:text-blue-800","aria-label":"Previous events"},a.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"}))),a.createElement("button",{onClick:y,className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 z-10 bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-all duration-300 text-blue-600 hover:text-blue-800","aria-label":"Next events"},a.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 px-12"},N.map(v=>a.createElement("div",{key:v.id||v.title,className:"p-6 bg-white rounded-xl shadow-lg text-center transform hover:scale-105 transition"},a.createElement("div",{className:"text-4xl mb-4"},v.type==="academic"?"":v.type==="cultural"?"":v.type==="sports"?"":""),a.createElement("h4",{className:"font-bold text-xl text-gray-800 mb-3"},v.title),a.createElement("p",{className:"text-gray-600 text-sm mb-4"},v.description),a.createElement("span",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium ${v.type==="academic"?"bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800":v.type==="cultural"?"bg-gradient-to-r from-purple-100 to-purple-200 text-purple-800":v.type==="sports"?"bg-gradient-to-r from-green-100 to-green-200 text-green-800":"bg-gradient-to-r from-orange-100 to-orange-200 text-orange-800"}`},new Date(v.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}))))),p.length>O&&a.createElement("div",{className:"flex justify-center mt-6 space-x-2"},Array.from({length:Math.ceil(p.length/O)},(v,R)=>a.createElement("button",{key:R,onClick:()=>U(R*O),className:`w-3 h-3 rounded-full transition-all duration-300 ${Math.floor(L/O)===R?"bg-blue-600":"bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to events page ${R+1}`})))):a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold mb-2"},"No Upcoming Events"),a.createElement("p",{className:"text-gray-600"},"Check back later for exciting events and activities!")))),a.createElement("section",{id:"hackathons",className:"mb-8"},a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-2xl text-white rounded-2xl shadow-xl mb-6 animate-slide-up border border-white/20 relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-2xl"}),a.createElement("div",{className:"relative z-10"},a.createElement("h3",{className:"text-3xl font-bold mb-2 text-center"}," Hackathons & Competitions"),a.createElement("p",{className:"text-white/90 text-center"},"Discover exciting hackathons and coding competitions from top platforms"))),a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl shadow-xl p-8 border border-white/20 animate-fade-in relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl"}),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 relative z-10"},a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-sm rounded-xl shadow-xl hover:shadow-2xl transition transform hover:scale-105 border border-white/20"},a.createElement("div",{className:"text-center mb-4"},a.createElement("img",{src:"/assets/images/Devnovate.jpg",alt:"Devnovate",className:"w-16 h-16 mx-auto mb-3 object-contain"}),a.createElement("h4",{className:"font-bold text-lg text-white mb-2"},"Devnovate"),a.createElement("p",{className:"text-white/80 text-sm mb-4"},"Innovation and entrepreneurship focused competitions"),a.createElement("a",{href:"https://devnovate.co/",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-green-500/20 text-white rounded-lg font-semibold hover:bg-green-600/30 border border-green-400/30 backdrop-blur-sm transition"},"Visit Platform"))),a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-sm rounded-xl shadow-xl hover:shadow-2xl transition transform hover:scale-105 border border-white/20"},a.createElement("div",{className:"text-center mb-4"},a.createElement("img",{src:"/assets/images/Devpost.jpg",alt:"Devpost",className:"w-16 h-16 mx-auto mb-3 object-contain"}),a.createElement("h4",{className:"font-bold text-lg text-white mb-2"},"Devpost"),a.createElement("p",{className:"text-white/80 text-sm mb-4"},"Global hackathon platform with diverse challenges"),a.createElement("a",{href:"https://devpost.com/",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-blue-500/20 text-white rounded-lg font-semibold hover:bg-blue-600/30 border border-blue-400/30 backdrop-blur-sm transition"},"Visit Platform"))),a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-sm rounded-xl shadow-xl hover:shadow-2xl transition transform hover:scale-105 border border-white/20"},a.createElement("div",{className:"text-center mb-4"},a.createElement("img",{src:"/assets/images/SIH2.png",alt:"Smart India Hackathon",className:"w-16 h-16 mx-auto mb-3 object-contain"}),a.createElement("h4",{className:"font-bold text-lg text-white mb-2"},"Smart India Hackathon"),a.createElement("p",{className:"text-white/80 text-sm mb-4"},"Government-backed innovation challenge for students"),a.createElement("a",{href:"https://www.sih.gov.in/",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-orange-500/20 text-white rounded-lg font-semibold hover:bg-orange-600/30 border border-orange-400/30 backdrop-blur-sm transition"},"Visit Platform"))),a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-sm rounded-xl shadow-xl hover:shadow-2xl transition transform hover:scale-105 border border-white/20"},a.createElement("div",{className:"text-center mb-4"},a.createElement("img",{src:"/assets/images/Unstop.jpg",alt:"Unstop",className:"w-16 h-16 mx-auto mb-3 object-contain"}),a.createElement("h4",{className:"font-bold text-lg text-white mb-2"},"Unstop"),a.createElement("p",{className:"text-white/80 text-sm mb-4"},"Comprehensive platform for hackathons and competitions"),a.createElement("a",{href:"https://unstop.com/",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-purple-500/20 text-white rounded-lg font-semibold hover:bg-purple-600/30 border border-purple-400/30 backdrop-blur-sm transition"},"Visit Platform")))))),a.createElement("section",{id:"about",className:"mb-8"},a.createElement("div",{className:"p-8 bg-white/10 backdrop-blur-2xl rounded-3xl shadow-xl border border-white/20 animate-fade-in relative z-10"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl"}),a.createElement("div",{className:"relative z-10"},a.createElement("div",{className:"text-center mb-8"},a.createElement("h3",{className:"text-4xl font-bold text-white mb-4"},"About LTSU Student Portal"),a.createElement("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-400 to-purple-400 mx-auto mb-6"})),a.createElement("div",{className:"max-w-4xl mx-auto text-center mb-8"},a.createElement("p",{className:"text-white/90 text-xl leading-relaxed mb-6"},"LTSU Student Portal is your comprehensive digital companion for academic excellence. Created by dedicated 3rd-year students ",a.createElement("strong",{className:"text-blue-400"},"Vairagade Pavan Kalyan (AI & ML)")," and ",a.createElement("strong",{className:"text-purple-400"},"Satish (Data Science)"),", this platform empowers students with seamless access to resources, fosters collaborative learning, and builds a vibrant educational community."),a.createElement("div",{className:"p-6 bg-white/10 backdrop-blur-sm rounded-lg border border-white/20"},a.createElement("p",{className:"text-white/90 text-lg italic font-medium"},'"Learning is not just about acquiring knowledge, but about transforming lives. Together, we create opportunities for growth, innovation, and success."')))))),a.createElement(Rt,null))))}const $e={USERS:"users",ADMIN_USERS:"adminUsers",GRADES:"grades",ATTENDANCE:"attendance",ASSIGNMENTS:"assignments",COURSES:"courses",SUBJECTS:"subjects",TIMETABLES:"timetables",EVENTS:"events",ANNOUNCEMENTS:"announcements",DEADLINES:"deadlines",RESOURCES:"resources",NOTIFICATIONS:"notifications",MESSAGES:"messages",ANALYTICS:"analytics",SYSTEM_LOGS:"systemLogs",BACKUPS:"backups"};class o3{constructor(){this.db=X,this.storage=S_}async getUserProfile(e){try{const n=await Km(Te(this.db,$e.USERS,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){throw console.error("Error getting user profile:",n),n}}async updateUserProfile(e,n){try{const r=Te(this.db,$e.USERS,e);return await Gt(r,{...n,updatedAt:le.now()}),!0}catch(r){throw console.error("Error updating user profile:",r),r}}async createUserProfile(e,n){try{const r=Te(this.db,$e.USERS,e);return await Gt(r,{...n,createdAt:le.now(),updatedAt:le.now()}),!0}catch(r){throw console.error("Error creating user profile:",r),r}}async getStudentGrades(e,n=null,r=null){try{let s=ie(Z(this.db,$e.GRADES),Oe("studentId","==",e),Ae("semester","desc"),Ae("year","desc"));return n&&(s=ie(s,Oe("semester","==",n))),r&&(s=ie(s,Oe("year","==",r))),(await me(s)).docs.map(o=>({id:o.id,...o.data()}))}catch(s){throw console.error("Error getting student grades:",s),s}}async addStudentGrade(e){try{return(await bt(Z(this.db,$e.GRADES),{...e,createdAt:le.now(),updatedAt:le.now()})).id}catch(n){throw console.error("Error adding student grade:",n),n}}async getStudentAttendance(e,n=null){try{let r=ie(Z(this.db,$e.ATTENDANCE),Oe("studentId","==",e),Ae("semester","desc"));return n&&(r=ie(r,Oe("subjectId","==",n))),(await me(r)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){throw console.error("Error getting student attendance:",r),r}}async updateAttendance(e,n){try{const r=Te(this.db,$e.ATTENDANCE,e);return await Gt(r,{...n,lastUpdated:le.now()}),!0}catch(r){throw console.error("Error updating attendance:",r),r}}async getAssignments(e=null,n=null){try{let r=ie(Z(this.db,$e.ASSIGNMENTS),Ae("dueDate","asc"));e&&(r=ie(r,Oe("subjectId","==",e)));let i=(await me(r)).docs.map(o=>({id:o.id,...o.data()}));return n&&(i=i.map(o=>{var c;return{...o,studentSubmission:(c=o.submissions)==null?void 0:c.find(u=>u.studentId===n)}})),i}catch(r){throw console.error("Error getting assignments:",r),r}}async submitAssignment(e,n,r){try{const s=Te(this.db,$e.ASSIGNMENTS,e),i=await Km(s);if(!i.exists())throw new Error("Assignment not found");const u=(i.data().submissions||[]).filter(h=>h.studentId!==n),d={studentId:n,submittedAt:le.now(),...r};return await Gt(s,{submissions:[...u,d],updatedAt:le.now()}),!0}catch(s){throw console.error("Error submitting assignment:",s),s}}async getEvents(e=null){try{let n=ie(Z(this.db,$e.EVENTS),Ae("createdAt","desc"));return e&&(n=ie(n,rs(e))),(await me(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){throw console.error("Error getting events:",n),n}}async addEvent(e){try{return(await bt(Z(this.db,$e.EVENTS),{...e,createdAt:le.now(),updatedAt:le.now()})).id}catch(n){throw console.error("Error adding event:",n),n}}async getAnnouncements(e=10){try{const n=ie(Z(this.db,$e.ANNOUNCEMENTS),Ae("createdAt","desc"),rs(e));return(await me(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){throw console.error("Error getting announcements:",n),n}}async getDeadlines(e=5){try{const n=ie(Z(this.db,$e.DEADLINES),Ae("dueDate","asc"),rs(e));return(await me(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){throw console.error("Error getting deadlines:",n),n}}async getUserNotifications(e,n=20){try{const r=ie(Z(this.db,$e.NOTIFICATIONS),Oe("userId","in",[e,"all"]),Ae("createdAt","desc"),rs(n));return(await me(r)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){throw console.error("Error getting notifications:",r),r}}async markNotificationAsRead(e){try{const n=Te(this.db,$e.NOTIFICATIONS,e);return await Gt(n,{isRead:!0,readAt:le.now()}),!0}catch(n){throw console.error("Error marking notification as read:",n),n}}async sendNotification(e,n){try{return(await bt(Z(this.db,$e.NOTIFICATIONS),{userId:e,...n,isRead:!1,createdAt:le.now()})).id}catch(r){throw console.error("Error sending notification:",r),r}}async sendBroadcastNotification(e){try{return(await bt(Z(this.db,$e.NOTIFICATIONS),{userId:"all",...e,isRead:!1,createdAt:le.now()})).id}catch(n){throw console.error("Error sending broadcast notification:",n),n}}async uploadFile(e,n,r={}){try{const s=Qm(this.storage,n),i=await t_(s,e,r);return{url:await n_(i.ref),path:i.ref.fullPath,size:e.size,type:e.type,name:e.name}}catch(s){throw console.error("Error uploading file:",s),s}}async deleteFile(e){try{const n=Qm(this.storage,e);return await R4(n),!0}catch(n){throw console.error("Error deleting file:",n),n}}async logUserActivity(e,n){try{return await bt(Z(this.db,$e.ANALYTICS),{type:"user_activity",userId:e,...n,createdAt:le.now()}),!0}catch(r){return console.error("Error logging user activity:",r),!1}}async logSystemEvent(e,n,r,s={}){try{return await bt(Z(this.db,$e.SYSTEM_LOGS),{level:e,category:n,message:r,details:s,timestamp:le.now()}),!0}catch(i){return console.error("Error logging system event:",i),!1}}async getAnalytics(e,n=null){try{let r=ie(Z(this.db,$e.ANALYTICS),Oe("type","==",e),Ae("createdAt","desc"));return n&&(r=ie(r,Oe("createdAt",">=",n.start)),n.end&&(r=ie(r,Oe("createdAt","<=",n.end)))),(await me(r)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){throw console.error("Error getting analytics:",r),r}}subscribeToCollection(e,n,r={}){try{let s=Z(this.db,e);return Object.keys(r).forEach(i=>{s=ie(s,Oe(i,"==",r[i]))}),s=ie(s,Ae("createdAt","desc")),_R(s,i=>{const o=i.docs.map(c=>({id:c.id,...c.data()}));n(o)})}catch(s){throw console.error("Error subscribing to collection:",s),s}}async batchUpdate(e){try{const n=[];for(const r of e){const{collection:s,id:i,data:o}=r,c=Te(this.db,s,i);await Gt(c,{...o,updatedAt:le.now()})}return!0}catch(n){throw console.error("Error in batch update:",n),n}}async search(e,n,r,s=10){try{const i=ie(Z(this.db,e),Ae(n),rs(s*2));return(await me(i)).docs.map(u=>({id:u.id,...u.data()})).filter(u=>{var d;return(d=u[n])==null?void 0:d.toLowerCase().includes(r.toLowerCase())}).slice(0,s)}catch(i){throw console.error("Error searching:",i),i}}}const Wt=new o3;function l3(){const t=Qe(),[e,n]=V.useState(null),[r,s]=V.useState(null),[i,o]=V.useState(!0),[c,u]=V.useState(!1),[d,h]=V.useState("personal"),[g,p]=V.useState({firstName:"",lastName:"",dateOfBirth:"",gender:"",phoneNumber:"",address:{street:"",city:"",state:"",pincode:"",country:""}}),[b,k]=V.useState({studentId:"",enrollmentYear:"",currentYear:"",currentSemester:"",specialization:"",department:""}),[A,D]=V.useState([]),[I,w]=V.useState([]),[T,L]=V.useState([]),[U,O]=V.useState([]);V.useEffect(()=>{const C=zt.onAuthStateChanged(async P=>{P?(n(P),await _(P.uid)):t("/auth/login")});return()=>C()},[t]);const _=async C=>{var P,B,J;try{o(!0);const Y=await Wt.getUserProfile(C);Y&&(s(Y),p({firstName:Y.firstName||"",lastName:Y.lastName||"",dateOfBirth:((J=(B=(P=Y.dateOfBirth)==null?void 0:P.toDate)==null?void 0:B.call(P))==null?void 0:J.toISOString().split("T")[0])||"",gender:Y.gender||"",phoneNumber:Y.phoneNumber||"",address:Y.address||{street:"",city:"",state:"",pincode:"",country:""}}),k({studentId:Y.studentId||"",enrollmentYear:Y.enrollmentYear||"",currentYear:Y.currentYear||"",currentSemester:Y.currentSemester||"",specialization:Y.specialization||"",department:Y.department||""})),await Promise.all([y(C),E(C),N(C),v(C)])}catch(Y){console.error("Error loading user data:",Y)}finally{o(!1)}},y=async C=>{try{const P=await Wt.getStudentGrades(C);D(P)}catch(P){console.error("Error loading grades:",P)}},E=async C=>{try{const P=await Wt.getStudentAttendance(C);w(P)}catch(P){console.error("Error loading attendance:",P)}},N=async C=>{try{const P=await Wt.getAssignments(null,C);L(P)}catch(P){console.error("Error loading assignments:",P)}},v=async C=>{try{const P=await Wt.getUserNotifications(C);O(P)}catch(P){console.error("Error loading notifications:",P)}},R=async C=>{if(C.preventDefault(),!!e)try{u(!0),await Wt.updateUserProfile(e.uid,{...g,displayName:`${g.firstName} ${g.lastName}`.trim()}),await Pm(e,{displayName:`${g.firstName} ${g.lastName}`.trim()}),alert("Personal information updated successfully!"),await _(e.uid)}catch(P){console.error("Error updating personal info:",P),alert("Error updating personal information. Please try again.")}finally{u(!1)}},S=async C=>{if(C.preventDefault(),!!e)try{u(!0),await Wt.updateUserProfile(e.uid,b),alert("Academic information updated successfully!"),await _(e.uid)}catch(P){console.error("Error updating academic info:",P),alert("Error updating academic information. Please try again.")}finally{u(!1)}},ae=async C=>{const P=C.target.files[0];if(!(!P||!e)){if(P.size>200*1024){ee("File size must be less than 200KB","error");return}if(!P.type.startsWith("image/")){ee("Please select a valid image file","error");return}try{u(!0);const B=document.querySelector('img[alt="Profile"]');if(B){const ut=new FileReader;ut.onload=$t=>{B.src=$t.target.result},ut.readAsDataURL(P)}const J=Qm(S_,`profile-photos/${e.uid}/${Date.now()}`),Y=t_(J,P,{contentType:P.type}),[we]=await Promise.all([Y]),ct=await n_(we.ref);await Promise.all([Wt.updateUserProfile(e.uid,{photoURL:ct}),Pm(e,{photoURL:ct})]),B&&(B.src=ct),ee(" Done!","success")}catch(B){console.error("Upload error:",B),ee(" Failed","error");const J=document.querySelector('img[alt="Profile"]');J&&(J.src=(e==null?void 0:e.photoURL)||(r==null?void 0:r.photoURL)||"/default-avatar.png")}finally{u(!1)}}},ee=(C,P="success")=>{const B=document.createElement("div");B.className=`fixed top-4 right-4 ${P==="success"?"bg-green-500":"bg-red-500"} text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-fade-in font-medium`,B.textContent=C,document.body.appendChild(B),setTimeout(()=>{document.body.contains(B)&&document.body.removeChild(B)},2e3)},H=async C=>{try{await Wt.markNotificationAsRead(C),await v(e==null?void 0:e.uid)}catch(P){console.error("Error marking notification as read:",P)}},ve=()=>{if(A.length===0)return 0;const C=A.reduce((B,J)=>B+(J.credits||0),0),P=A.reduce((B,J)=>B+J.gradePoint*J.credits,0);return C>0?(P/C).toFixed(2):0};return i?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center overflow-hidden"},a.createElement("div",{className:"text-center animate-fade-in"},a.createElement("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),a.createElement("h2",{className:"text-2xl font-bold text-gray-800 mb-2"},"Loading Profile..."),a.createElement("p",{className:"text-gray-600"},"Please wait while we load your information"))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden overflow-x-hidden"},a.createElement("div",{className:"absolute inset-0"},a.createElement("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),a.createElement("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000"}),a.createElement("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500"})),a.createElement(Pt,{user:e}),a.createElement("div",{className:"container mx-auto px-6 py-8 max-w-7xl relative z-10"},a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl shadow-2xl p-8 mb-8 animate-fade-in border border-white/20"},a.createElement("div",{className:"flex items-center space-x-6"},a.createElement("div",{className:"relative group"},a.createElement("img",{src:(e==null?void 0:e.photoURL)||(r==null?void 0:r.photoURL)||"/default-avatar.png",alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white/30 shadow-xl group-hover:border-blue-400 transition-all duration-300"}),a.createElement("label",{className:"absolute bottom-2 right-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full p-3 cursor-pointer hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-110 shadow-lg"},a.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})),a.createElement("input",{type:"file",accept:"image/*",onChange:ae,className:"hidden",disabled:c,multiple:!1})),c&&a.createElement("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center"},a.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}))),a.createElement("div",null,a.createElement("h1",{className:"text-3xl font-bold text-white"},r!=null&&r.firstName&&(r!=null&&r.lastName)?`${r.firstName} ${r.lastName}`:(e==null?void 0:e.displayName)||(e==null?void 0:e.email)),a.createElement("p",{className:"text-white/80"},(r==null?void 0:r.studentId)||"Student"),a.createElement("div",{className:"flex items-center space-x-4 mt-4"},a.createElement("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-full text-sm font-semibold border border-white/30"}," Year ",(r==null?void 0:r.currentYear)||"N/A"),a.createElement("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-full text-sm font-semibold border border-white/30"}," ",(r==null?void 0:r.specialization)||"Specialization"),a.createElement("button",{onClick:()=>t("/premium-benefits"),className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-full text-sm font-bold hover:from-yellow-600 hover:to-orange-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 border border-yellow-400"}," Upgrade Now"))))),a.createElement("div",{className:"mb-8"},a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl p-4 shadow-2xl border border-white/20"},a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3"},[{id:"personal",label:" Personal Info",desc:"Update your details"},{id:"academic",label:" Academic Info",desc:"Education details"},{id:"grades",label:" Grades",desc:"Academic performance"},{id:"attendance",label:" Attendance",desc:"Class attendance"},{id:"assignments",label:" Assignments",desc:"Tasks & submissions"},{id:"notifications",label:" Notifications",desc:"Important updates"}].map(C=>a.createElement("button",{key:C.id,onClick:()=>h(C.id),className:`p-4 rounded-2xl font-bold transition-all duration-300 transform hover:scale-105 ${d===C.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-xl animate-pulse border border-blue-400":"bg-white/10 backdrop-blur-sm text-white border border-white/20 hover:bg-white/20 hover:shadow-lg"}`},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-2xl mb-2"},C.label.split(" ")[0]),a.createElement("div",{className:"text-sm font-semibold"},C.label.split(" ").slice(1).join(" ")),a.createElement("div",{className:`text-xs mt-1 ${d===C.id?"text-blue-100":"text-white/70"}`},C.desc))))))),a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl shadow-2xl p-8 animate-slide-up border border-white/20"},d==="personal"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-white"}," Personal Information"),a.createElement("form",{onSubmit:R,className:"space-y-6"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"First Name"),a.createElement("input",{type:"text",value:g.firstName,onChange:C=>p({...g,firstName:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none",required:!0})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Last Name"),a.createElement("input",{type:"text",value:g.lastName,onChange:C=>p({...g,lastName:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none",required:!0})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Date of Birth"),a.createElement("input",{type:"date",value:g.dateOfBirth,onChange:C=>p({...g,dateOfBirth:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white focus:border-blue-400 focus:outline-none"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Gender"),a.createElement("select",{value:g.gender,onChange:C=>p({...g,gender:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white focus:border-blue-400 focus:outline-none"},a.createElement("option",{value:"",className:"bg-gray-800"},"Select Gender"),a.createElement("option",{value:"Male",className:"bg-gray-800"},"Male"),a.createElement("option",{value:"Female",className:"bg-gray-800"},"Female"),a.createElement("option",{value:"Other",className:"bg-gray-800"},"Other"))),a.createElement("div",{className:"md:col-span-2"},a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Phone Number"),a.createElement("input",{type:"tel",value:g.phoneNumber,onChange:C=>p({...g,phoneNumber:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none",placeholder:"+91 9876543210"}))),a.createElement("div",{className:"border-t border-white/20 pt-6"},a.createElement("h3",{className:"text-xl font-bold mb-4 text-white"},"Address Information"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},a.createElement("div",{className:"md:col-span-2"},a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Street Address"),a.createElement("input",{type:"text",value:g.address.street,onChange:C=>p({...g,address:{...g.address,street:C.target.value}}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"City"),a.createElement("input",{type:"text",value:g.address.city,onChange:C=>p({...g,address:{...g.address,city:C.target.value}}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"State"),a.createElement("input",{type:"text",value:g.address.state,onChange:C=>p({...g,address:{...g.address,state:C.target.value}}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Pincode"),a.createElement("input",{type:"text",value:g.address.pincode,onChange:C=>p({...g,address:{...g.address,pincode:C.target.value}}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Country"),a.createElement("input",{type:"text",value:g.address.country,onChange:C=>p({...g,address:{...g.address,country:C.target.value}}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none",defaultValue:"India"})))),a.createElement("div",{className:"flex justify-end"},a.createElement("button",{type:"submit",disabled:c,className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 border border-blue-400"},c?"Saving...":" Save Changes")))),d==="academic"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-white"}," Academic Information"),a.createElement("form",{onSubmit:S,className:"space-y-6"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Student ID"),a.createElement("input",{type:"text",value:b.studentId,onChange:C=>k({...b,studentId:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none",placeholder:"CS123456"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Enrollment Year"),a.createElement("input",{type:"number",value:b.enrollmentYear,onChange:C=>k({...b,enrollmentYear:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none",placeholder:"2021"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Current Year"),a.createElement("select",{value:b.currentYear,onChange:C=>k({...b,currentYear:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white focus:border-blue-400 focus:outline-none"},a.createElement("option",{value:"",className:"bg-gray-800"},"Select Year"),a.createElement("option",{value:"1",className:"bg-gray-800"},"1st Year"),a.createElement("option",{value:"2",className:"bg-gray-800"},"2nd Year"),a.createElement("option",{value:"3",className:"bg-gray-800"},"3rd Year"),a.createElement("option",{value:"4",className:"bg-gray-800"},"4th Year"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Current Semester"),a.createElement("select",{value:b.currentSemester,onChange:C=>k({...b,currentSemester:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white focus:border-blue-400 focus:outline-none"},a.createElement("option",{value:"",className:"bg-gray-800"},"Select Semester"),b.currentYear==="1"&&a.createElement(a.Fragment,null,a.createElement("option",{value:"1",className:"bg-gray-800"},"1st Semester"),a.createElement("option",{value:"2",className:"bg-gray-800"},"2nd Semester")),b.currentYear==="2"&&a.createElement(a.Fragment,null,a.createElement("option",{value:"3",className:"bg-gray-800"},"3rd Semester"),a.createElement("option",{value:"4",className:"bg-gray-800"},"4th Semester")),b.currentYear==="3"&&a.createElement(a.Fragment,null,a.createElement("option",{value:"5",className:"bg-gray-800"},"5th Semester"),a.createElement("option",{value:"6",className:"bg-gray-800"},"6th Semester")),b.currentYear==="4"&&a.createElement(a.Fragment,null,a.createElement("option",{value:"7",className:"bg-gray-800"},"7th Semester"),a.createElement("option",{value:"8",className:"bg-gray-800"},"8th Semester")))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Specialization"),a.createElement("select",{value:b.specialization,onChange:C=>k({...b,specialization:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white focus:border-blue-400 focus:outline-none"},a.createElement("option",{value:"",className:"bg-gray-800"},"Select Specialization"),a.createElement("option",{value:"AIML",className:"bg-gray-800"},"AI & ML"),a.createElement("option",{value:"DS",className:"bg-gray-800"},"Data Science"),a.createElement("option",{value:"IOT",className:"bg-gray-800"},"IoT"),a.createElement("option",{value:"Cyber Security",className:"bg-gray-800"},"Cyber Security"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-white mb-2"},"Department"),a.createElement("input",{type:"text",value:b.department,onChange:C=>k({...b,department:C.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/10 backdrop-blur-sm border-2 border-white/20 text-white placeholder-white/60 focus:border-blue-400 focus:outline-none",placeholder:"Computer Science"}))),a.createElement("div",{className:"flex justify-end"},a.createElement("button",{type:"submit",disabled:c,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-300 disabled:opacity-50 border border-green-400"},c?"Saving...":" Save Changes")))),d==="grades"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-white"}," Academic Performance"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},a.createElement("div",{className:"p-6 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl text-center"},a.createElement("div",{className:"text-3xl font-bold"},ve()),a.createElement("div",{className:"text-sm opacity-90"},"Current CGPA")),a.createElement("div",{className:"p-6 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl text-center"},a.createElement("div",{className:"text-3xl font-bold"},A.length),a.createElement("div",{className:"text-sm opacity-90"},"Subjects Graded")),a.createElement("div",{className:"p-6 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl text-center"},a.createElement("div",{className:"text-3xl font-bold"},A.reduce((C,P)=>C+(P.credits||0),0)),a.createElement("div",{className:"text-sm opacity-90"},"Total Credits")),a.createElement("div",{className:"p-6 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl text-center"},a.createElement("div",{className:"text-3xl font-bold"},(r==null?void 0:r.currentYear)||"N/A"),a.createElement("div",{className:"text-sm opacity-90"},"Current Year"))),a.createElement("div",{className:"space-y-4"},A.length>0?A.map(C=>a.createElement("div",{key:C.id,className:"p-6 bg-gradient-to-r from-white to-gray-50 rounded-2xl border-2 border-gray-200"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex-1"},a.createElement("h3",{className:"text-xl font-bold text-gray-800"},C.subjectName),a.createElement("div",{className:"flex items-center space-x-4 mt-2"},a.createElement("span",{className:"text-sm text-gray-600"},"Semester ",C.semester,", Year ",C.year),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${C.grade==="A+"||C.grade==="A"?"bg-green-100 text-green-800":C.grade==="B+"||C.grade==="B"?"bg-blue-100 text-blue-800":C.grade==="C"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`},"Grade: ",C.grade," (",C.gradePoint," GP)"),a.createElement("span",{className:"text-sm text-gray-600"},"Credits: ",C.credits)),a.createElement("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600"},a.createElement("span",null,"Internal: ",C.internalMarks,"/40"),a.createElement("span",null,"External: ",C.externalMarks,"/60"),a.createElement("span",null,"Total: ",C.totalMarks,"/100")))))):a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold mb-2"},"No Grades Available"),a.createElement("p",{className:"text-gray-600"},"Your academic grades will appear here once they are published.")))),d==="attendance"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-white"}," Attendance Records"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},I.map(C=>a.createElement("div",{key:C.id,className:"p-6 bg-gradient-to-r from-white to-gray-50 rounded-2xl border-2 border-gray-200"},a.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-2"},C.subjectName),a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-sm text-gray-600"},"Total Classes:"),a.createElement("span",{className:"font-semibold"},C.totalClasses)),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-sm text-gray-600"},"Attended:"),a.createElement("span",{className:"font-semibold text-green-600"},C.attendedClasses)),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-sm text-gray-600"},"Percentage:"),a.createElement("span",{className:`font-semibold ${C.attendancePercentage>=85?"text-green-600":C.attendancePercentage>=75?"text-yellow-600":"text-red-600"}`},C.attendancePercentage,"%")))))),I.length===0&&a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold mb-2"},"No Attendance Records"),a.createElement("p",{className:"text-gray-600"},"Your attendance records will appear here."))),d==="assignments"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-white"}," Assignments"),a.createElement("div",{className:"space-y-4"},T.length>0?T.map(C=>a.createElement("div",{key:C.id,className:"p-6 bg-gradient-to-r from-white to-gray-50 rounded-2xl border-2 border-gray-200"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex-1"},a.createElement("h3",{className:"text-xl font-bold text-gray-800"},C.title),a.createElement("p",{className:"text-gray-600 mt-1"},C.description),a.createElement("div",{className:"flex items-center space-x-4 mt-2"},a.createElement("span",{className:"text-sm text-gray-600"},C.subjectName),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${C.studentSubmission?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},C.studentSubmission?"Submitted":"Pending"),a.createElement("span",{className:"text-sm text-gray-600"},"Due: ",new Date(C.dueDate.toDate()).toLocaleDateString())),C.studentSubmission&&a.createElement("div",{className:"mt-2 text-sm text-green-600"},"Submitted on: ",new Date(C.studentSubmission.submittedAt.toDate()).toLocaleDateString()))))):a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold mb-2"},"No Assignments"),a.createElement("p",{className:"text-gray-600"},"Your assignments will appear here.")))),d==="notifications"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-white"}," Notifications"),a.createElement("div",{className:"space-y-4"},U.length>0?U.map(C=>a.createElement("div",{key:C.id,className:`p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 ${C.isRead?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-300 shadow-md"}`,onClick:()=>!C.isRead&&H(C.id)},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",{className:"flex-1"},a.createElement("h3",{className:`text-lg font-bold ${C.isRead?"text-gray-700":"text-gray-900"}`},C.title),a.createElement("p",{className:`mt-1 ${C.isRead?"text-gray-600":"text-gray-800"}`},C.message),a.createElement("div",{className:"flex items-center space-x-4 mt-2"},a.createElement("span",{className:"text-sm text-gray-500"},new Date(C.createdAt.toDate()).toLocaleDateString()),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${C.priority==="high"?"bg-red-100 text-red-800":C.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`},C.priority))),!C.isRead&&a.createElement("div",{className:"w-3 h-3 bg-blue-600 rounded-full ml-4"})))):a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold mb-2"},"No Notifications"),a.createElement("p",{className:"text-gray-600"},"You're all caught up!")))))),a.createElement(Rt,null))}const c3=[{id:1,name:"First Year",semesters:["1st Semester","2nd Semester"]},{id:2,name:"Second Year",semesters:["3rd Semester","4th Semester"]},{id:3,name:"Third Year",semesters:["5th Semester","6th Semester"]},{id:4,name:"Fourth Year",semesters:["7th Semester","8th Semester"]}],u3=["AIML","DS","IOT","Cyber Security"];function d3({user:t}){const{id:e}=nT(),n=Qe(),r=c3.find(b=>b.id===parseInt(e)),[s,i]=a.useState(null),[o,c]=a.useState(null),[u,d]=a.useState(null),[h,g]=a.useState(!1),p=b=>{g(!0),setTimeout(()=>{i(s===b?null:b),g(!1)},300)};return r?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 overflow-x-hidden"},a.createElement(Pt,{user:t}),a.createElement("div",{className:"container mx-auto p-6 max-w-7xl"},a.createElement("div",{className:"mb-8 p-8 bg-gradient-to-r from-blue-600 to-purple-700 text-white rounded-lg shadow-lg animate-fade-in"},a.createElement("h1",{className:"text-4xl font-bold mb-2"},r.name),a.createElement("p",{className:"text-xl"},"Explore your academic journey and track your progress")),a.createElement("div",{className:"space-y-8"},r.semesters.map((b,k)=>a.createElement("div",{key:b,className:"p-6 bg-gray-800 rounded-xl shadow-xl animate-slide-up hover:shadow-2xl transition border border-gray-700"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("h2",{className:"text-2xl font-bold text-gray-100"},b),a.createElement("div",{className:"flex space-x-3"},a.createElement("button",{onClick:()=>p(k),className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-700 text-white rounded-lg font-semibold hover:from-indigo-700 hover:to-purple-800 transition transform hover:scale-105 shadow-lg",disabled:h},h?"Loading...":s===k?"Close":"View Specialization"))),s===k&&a.createElement("div",{className:"mt-6 animate-fade-in"},h&&a.createElement("div",{className:"flex justify-center items-center py-8"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"}),a.createElement("span",{className:"ml-3 text-lg text-gray-300"},"Loading specializations...")),!h&&a.createElement(a.Fragment,null,a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 justify-items-center"},u3.map(A=>a.createElement("div",{key:A,className:"bg-gradient-to-br from-gray-800 via-gray-700 to-gray-800 rounded-2xl shadow-xl border border-gray-600 hover:shadow-2xl transition-all duration-500 transform hover:scale-105 hover:border-indigo-500 group w-full max-w-sm"},a.createElement("div",{className:"p-8"},a.createElement("div",{className:"text-center mb-6"},a.createElement("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-full mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg"},a.createElement("span",{className:"text-4xl"},A==="AIML"?"":A==="DS"?"":A==="IOT"?"":"")),a.createElement("h3",{className:"text-2xl font-bold text-gray-100 mb-2 group-hover:text-indigo-300 transition-colors"},A),a.createElement("p",{className:"text-gray-300 text-sm leading-relaxed"},"Advanced specialization program with industry-relevant curriculum and cutting-edge technologies")),a.createElement("button",{onClick:()=>n(`/syllabus?spec=${A}&semester=${b}&year=${r.id}`),className:"w-full px-6 py-4 bg-gradient-to-r from-indigo-600 via-purple-700 to-pink-700 text-white font-bold rounded-xl hover:from-indigo-700 hover:via-purple-800 hover:to-pink-800 transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl text-lg animate-pulse"}," Syllabus View"))))))))))),a.createElement(Rt,null)):a.createElement("div",null,"Year not found")}const m3=["2023-24","2024-25","2025-26"],Jy={"2023-24":{"1st Semester":["Mathematics-I","Physics/Chemistry","Basic Electrical Engineering","Engineering Graphics","Communication Skills","Environmental Science"],"2nd Semester":["Mathematics-II","Data Structures & Algorithms","Digital Electronics","Object Oriented Programming","Discrete Mathematics","Economics"],"3rd Semester":["PMSE","Operating System","ET1-Data Analytics(ALML, Cyber Security)","ET1-IT-Security (Data Science)","Relational Database Management System and NOSQL"]},"2024-25":{"1st Semester":["Advanced Mathematics","Computer Organization","Database Management Systems","Software Engineering","Web Technologies","Professional Ethics"],"2nd Semester":["Operating Systems","Computer Networks","Design & Analysis of Algorithms","Machine Learning Basics","Cloud Computing","Project Management"],"3rd Semester":["PMSE","Operating System","ET1-Data Analytics(ALML, Cyber Security)","ET1-IT-Security (Data Science)","Relational Database Management System and NOSQL"]},"2025-26":{"1st Semester":["Advanced Data Structures","Artificial Intelligence","Cyber Security Fundamentals","Big Data Analytics","Mobile Application Development","Research Methodology"],"2nd Semester":["Deep Learning","Blockchain Technology","Internet of Things","DevOps & CI/CD","Advanced Web Development","Capstone Project"],"3rd Semester":["PMSE","Operating System","ET1-Data Analytics(ALML, Cyber Security)","ET1-IT-Security (Data Science)","Relational Database Management System and NOSQL"]}},h3=["AIML","DS","IOT","Cyber Security"],Fn={PMSE:{"MST-1":"/pdfs/3rd-sem-mst1/Principle_of_Modern_Software_Engineering_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/MST-II_Principle_of_Modern_Software_Engineering_Nov2024 (2).pdf",Final:"/pdfs/3rd-sem-final/Modern_Software_Engineering_End_Term_Jan_2025_Questions.pdf"},"Operating System":{"MST-1":"/pdfs/3rd-sem-mst1/System_Programming_and_OS_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/System_Programming_Operating_System_MST_2.pdf",Final:"/pdfs/3rd-sem-final/System_Programming_and_OS_End_Term_Jan_2025_Questions.pdf"},"ET1-Data Analytics(ALML, Cyber Security)":{"MST-1":"/pdfs/3rd-sem-mst1/Introduction_to_Data_Analytics_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/Open_Standards_MST_2.pdf",Final:"/pdfs/3rd-sem-final/FinalPage_EmergingTech1_DataAnalytics.pdf"},"ET1-IT-Security (Data Science)":{"MST-1":"/pdfs/3rd-sem-mst1/Open_Source_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/Open_Standards_MST_2.pdf",Final:"/pdfs/3rd-sem-final/Open_Source_Software_and_Open_Standards_Exam_Jan_2025.pdf"},"Relational Database Management System and NOSQL":{"MST-1":"/pdfs/3rd-sem-mst1/RDBMS_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/MST 2 RDBMS_Nov2024_QuestionPaper.pdf",Final:"/pdfs/3rd-sem-final/Relational_Database_Management_System_NoSQL_Exam_Jan_2025.pdf"}};function f3({user:t}){const e=Qe(),[n]=Eb(),r=n.get("spec")||"AIML",s=n.get("semester")||"1st Semester",i=n.get("year")||"1",[o,c]=a.useState("2024-25"),[u,d]=a.useState(null),h=Jy[o][s]||Jy[o]["1st Semester"],g={1:"First Year",2:"Second Year",3:"Third Year",4:"Fourth Year"};return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900"},a.createElement(Pt,{user:t}),a.createElement("div",{className:"relative overflow-hidden"},a.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-700 via-purple-800 to-indigo-900 opacity-95"}),a.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-black/20"}),a.createElement("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),a.createElement("div",{className:"relative container mx-auto px-6 py-24"},a.createElement("div",{className:"text-center text-white"},a.createElement("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white/20 backdrop-blur-lg rounded-full mb-8 shadow-2xl border border-white/30"},a.createElement("span",{className:"text-5xl animate-pulse"},r==="AIML"?"":r==="DS"?"":r==="IOT"?"":"")),a.createElement("h1",{className:"text-6xl md:text-7xl font-black mb-6 bg-gradient-to-r from-yellow-300 via-orange-300 to-pink-300 bg-clip-text text-transparent drop-shadow-lg"},r," Syllabus"),a.createElement("div",{className:"flex items-center justify-center space-x-6 mb-6"},a.createElement("div",{className:"bg-white/20 backdrop-blur-sm rounded-full px-6 py-3 border border-white/30"},a.createElement("span",{className:"text-lg font-semibold text-white"},g[i])),a.createElement("div",{className:"bg-white/20 backdrop-blur-sm rounded-full px-6 py-3 border border-white/30"},a.createElement("span",{className:"text-lg font-semibold text-white"},s))),a.createElement("p",{className:"text-xl md:text-2xl text-blue-100 font-medium max-w-4xl mx-auto leading-relaxed"}," Comprehensive curriculum and course structure for academic excellence in ",r),a.createElement("div",{className:"mt-8 flex items-center justify-center space-x-4"},a.createElement("div",{className:"w-16 h-1 bg-gradient-to-r from-yellow-300 to-orange-300 rounded-full"}),a.createElement("div",{className:"w-4 h-4 bg-white/60 rounded-full animate-pulse"}),a.createElement("div",{className:"w-16 h-1 bg-gradient-to-r from-orange-300 to-pink-300 rounded-full"})))),a.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-gray-900 via-gray-900/80 to-transparent"})),a.createElement("div",{className:"container mx-auto px-6 py-12"},a.createElement("div",{className:"mb-12"},a.createElement("h2",{className:"text-3xl font-bold text-center text-gray-100 mb-8"},"Select Specialization"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 max-w-4xl mx-auto"},h3.map(p=>a.createElement("button",{key:p,onClick:()=>e(`/syllabus?spec=${p}&semester=${s}&year=${i}`),className:`p-6 rounded-2xl shadow-xl transition-all duration-500 transform hover:scale-110 hover:shadow-2xl ${r===p?"bg-gradient-to-r from-blue-600 via-indigo-700 to-purple-700 text-white shadow-2xl ring-4 ring-blue-400":"bg-gray-800 text-gray-200 hover:bg-gradient-to-br hover:from-gray-700 hover:via-gray-600 hover:to-gray-700 border-2 border-gray-600 hover:border-blue-400"}`},a.createElement("div",{className:"text-center"},a.createElement("div",{className:`text-4xl mb-3 ${r===p?"animate-bounce":""}`},p==="AIML"?"":p==="DS"?"":p==="IOT"?"":""),a.createElement("div",{className:"font-bold text-lg"},p),a.createElement("div",{className:"text-sm opacity-80 mt-1"},p==="AIML"?"AI & Machine Learning":p==="DS"?"Data Science":p==="IOT"?"Internet of Things":"Cyber Security")))))),a.createElement("div",{className:"mb-12"},a.createElement("h2",{className:"text-4xl font-black text-center text-gray-100 mb-12 bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent"},"Select Academic Year"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto"},m3.map(p=>a.createElement("button",{key:p,onClick:()=>c(p),className:`relative p-10 rounded-3xl shadow-2xl transition-all duration-500 transform hover:scale-110 hover:shadow-3xl border-4 ${o===p?"bg-gradient-to-br from-blue-600 via-indigo-700 to-purple-700 text-white shadow-2xl border-blue-400 ring-4 ring-blue-300":"bg-gray-800 text-gray-200 hover:bg-gradient-to-br hover:from-gray-700 hover:via-gray-600 hover:to-gray-700 border-gray-600 hover:border-blue-400"}`},a.createElement("div",{className:"text-center"},a.createElement("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-full mb-6 shadow-xl ${o===p?"bg-white/25 backdrop-blur-sm":"bg-gradient-to-r from-blue-600 to-indigo-700 text-white"}`},a.createElement("span",{className:"text-4xl font-bold animate-pulse"},p==="2023-24"?"":p==="2024-25"?"":"")),a.createElement("h3",{className:"text-3xl font-black mb-3"},p),a.createElement("p",{className:"text-lg font-medium opacity-90 mb-4"},p==="2023-24"?"Foundation Year":p==="2024-25"?"Current Year":"Upcoming Year"),a.createElement("div",{className:"flex items-center justify-center space-x-2"},a.createElement("span",{className:`inline-block w-3 h-3 rounded-full ${o===p?"bg-white animate-ping":"bg-blue-500"}`}),a.createElement("span",{className:"text-sm font-semibold"},o===p?"Selected":"Click to Select"))),o===p&&a.createElement("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2"},a.createElement("div",{className:"w-0 h-0 border-l-8 border-r-8 border-t-8 border-transparent border-t-gray-800 drop-shadow-lg"})))))),a.createElement("div",{className:"mb-12"},a.createElement("div",{className:"bg-gradient-to-br from-gray-800 via-gray-700 to-gray-800 rounded-3xl shadow-2xl p-10 border border-gray-600 relative overflow-hidden"},a.createElement("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/20 to-indigo-600/20 rounded-full -translate-y-16 translate-x-16"}),a.createElement("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-purple-400/20 to-pink-600/20 rounded-full translate-y-12 -translate-x-12"}),a.createElement("div",{className:"relative z-10"},a.createElement("div",{className:"flex items-center justify-between mb-8"},a.createElement("div",null,a.createElement("h3",{className:"text-4xl font-black text-gray-100 mb-3 bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent"},r," - ",o),a.createElement("p",{className:"text-gray-300 text-lg font-medium"},g[i],"  ",s,"  Advanced Curriculum"),a.createElement("div",{className:"flex items-center mt-3 space-x-3"},a.createElement("span",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-700 text-white text-sm font-bold rounded-full shadow-lg"}," Industry Ready"),a.createElement("span",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-700 text-white text-sm font-bold rounded-full shadow-lg"}," Cutting Edge"))),a.createElement("button",{onClick:()=>alert(`Downloading full syllabus for ${r} - ${o} - ${s}`),className:"px-8 py-4 bg-gradient-to-r from-green-600 via-emerald-700 to-teal-700 text-white font-bold rounded-2xl hover:from-green-700 hover:via-emerald-800 hover:to-teal-800 transition-all duration-300 transform hover:scale-110 shadow-2xl hover:shadow-3xl text-lg"}," Full Syllabus")),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},h.map((p,b)=>a.createElement("div",{key:p,className:"bg-gradient-to-br from-gray-800 via-gray-700 to-gray-800 rounded-3xl shadow-2xl border-2 border-gray-600 hover:shadow-3xl transition-all duration-500 transform hover:scale-105 hover:border-indigo-500 group relative overflow-hidden"},a.createElement("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-blue-400/20 to-indigo-600/20 rounded-full -translate-y-10 translate-x-10 group-hover:scale-150 transition-transform duration-700"}),a.createElement("div",{className:"relative z-10 p-8"},a.createElement("div",{className:"flex items-center justify-between mb-6"},a.createElement("div",{className:"flex items-center"},a.createElement("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-r from-blue-600 via-indigo-700 to-purple-700 text-white rounded-full flex items-center justify-center text-xl font-black mr-6 shadow-xl group-hover:scale-110 transition-transform duration-300"},b+1),a.createElement("div",null,a.createElement("h4",{className:"font-black text-gray-100 text-xl mb-2 group-hover:text-indigo-300 transition-colors"},p),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("span",{className:"inline-block px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-700 text-white text-xs rounded-full font-bold shadow-lg"}," Active Subject"),a.createElement("span",{className:"inline-block px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-700 text-white text-xs rounded-full font-bold shadow-lg"}," Industry Ready"))))),a.createElement("p",{className:"text-gray-300 text-base mb-8 leading-relaxed font-medium"},"Comprehensive curriculum covering fundamental concepts, practical applications, and industry-relevant skills for ",p.toLowerCase(),". Designed to build expertise and prepare students for real-world challenges."),a.createElement("div",{className:"grid grid-cols-3 gap-4"},a.createElement("button",{onClick:()=>d(u===`${p}-MST1`?null:`${p}-MST1`),className:"px-6 py-4 bg-gradient-to-r from-blue-500 via-indigo-600 to-purple-600 text-white font-bold rounded-2xl hover:from-blue-600 hover:via-indigo-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-110 shadow-xl hover:shadow-2xl text-sm"}," MST-1"),a.createElement("button",{onClick:()=>d(u===`${p}-MST2`?null:`${p}-MST2`),className:"px-6 py-4 bg-gradient-to-r from-blue-500 via-indigo-600 to-purple-600 text-white font-bold rounded-2xl hover:from-blue-600 hover:via-indigo-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-110 shadow-xl hover:shadow-2xl text-sm"}," MST-2"),a.createElement("button",{onClick:()=>d(u===`${p}-Final`?null:`${p}-Final`),className:"px-6 py-4 bg-gradient-to-r from-blue-500 via-indigo-600 to-purple-600 text-white font-bold rounded-2xl hover:from-blue-600 hover:via-indigo-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-110 shadow-xl hover:shadow-2xl text-sm"}," Final")),u===`${p}-MST1`&&a.createElement("div",{className:"flex space-x-3 mt-4 animate-fade-in"},s==="3rd Semester"&&Fn[p]?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>window.open(Fn[p]["MST-1"],"_blank"),className:"text-sm bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition"},"View"),a.createElement("a",{href:Fn[p]["MST-1"],download:!0,className:"text-sm bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition inline-block"},"Download")):a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>alert(`Viewing ${p} MST-1 paper for ${o}`),className:"text-sm bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition"},"View"),a.createElement("button",{onClick:()=>alert(`Downloading ${p} MST-1 paper for ${o}`),className:"text-sm bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition"},"Download"))),u===`${p}-MST2`&&a.createElement("div",{className:"flex space-x-3 mt-4 animate-fade-in"},s==="3rd Semester"&&Fn[p]?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>window.open(Fn[p]["MST-2"],"_blank"),className:"text-sm bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition"},"View"),a.createElement("a",{href:Fn[p]["MST-2"],download:!0,className:"text-sm bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition inline-block"},"Download")):a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>alert(`Viewing ${p} MST-2 paper for ${o}`),className:"text-sm bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition"},"View"),a.createElement("button",{onClick:()=>alert(`Downloading ${p} MST-2 paper for ${o}`),className:"text-sm bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition"},"Download"))),u===`${p}-Final`&&a.createElement("div",{className:"flex space-x-3 mt-4 animate-fade-in"},s==="3rd Semester"&&Fn[p]?a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>window.open(Fn[p].Final,"_blank"),className:"text-sm bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition"},"View"),a.createElement("a",{href:Fn[p].Final,download:!0,className:"text-sm bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition inline-block"},"Download")):a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>alert(`Viewing ${p} Final paper for ${o}`),className:"text-sm bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition"},"View"),a.createElement("button",{onClick:()=>alert(`Downloading ${p} Final paper for ${o}`),className:"text-sm bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition"},"Download")))))))))),a.createElement("div",{className:"text-center"},a.createElement("div",{className:"inline-flex items-center space-x-8 bg-gradient-to-r from-gray-800 via-gray-700 to-gray-800 rounded-3xl shadow-2xl p-8 border border-gray-600"},a.createElement("button",{onClick:()=>e("/"),className:"px-8 py-4 bg-gradient-to-r from-gray-600 via-slate-700 to-gray-800 text-white font-bold rounded-2xl hover:from-gray-700 hover:via-slate-800 hover:to-gray-900 transition-all duration-300 transform hover:scale-110 shadow-xl hover:shadow-2xl text-lg"}," Back to Home"),a.createElement("button",{onClick:()=>e(`/year/${i}`),className:"px-8 py-4 bg-gradient-to-r from-indigo-600 via-purple-700 to-pink-700 text-white font-bold rounded-2xl hover:from-indigo-700 hover:via-purple-800 hover:to-pink-800 transition-all duration-300 transform hover:scale-110 shadow-xl hover:shadow-2xl text-lg"}," Back to ",g[i]),a.createElement("button",{onClick:()=>alert("Contact: info.studentportalofficial@gmail.com"),className:"px-8 py-4 bg-gradient-to-r from-orange-600 via-red-700 to-pink-700 text-white font-bold rounded-2xl hover:from-orange-700 hover:via-red-800 hover:to-pink-800 transition-all duration-300 transform hover:scale-110 shadow-xl hover:shadow-2xl text-lg"}," Contact Advisor")))),a.createElement(Rt,null))}const p3=async()=>{try{console.log(" Initializing Firebase collections...");const t=[{title:"Tech Talk: AI in Education",description:"Explore how artificial intelligence is transforming educational methodologies",date:"2024-03-15",type:"academic",createdAt:new Date,updatedAt:new Date},{title:"Career Fair",description:"Connect with top companies and discover exciting career opportunities",date:"2024-04-05",type:"academic",createdAt:new Date,updatedAt:new Date},{title:"Cultural Fest",description:"Celebrate diversity through music, dance, and cultural performances",date:"2024-04-20",type:"cultural",createdAt:new Date,updatedAt:new Date}];for(const i of t)await bt(Z(X,"events"),i);console.log(" Events collection initialized");const e=[{title:"Mid-term Exam Schedule",content:"Available now - Check your email",type:"academic",priority:"high",createdAt:new Date,updatedAt:new Date},{title:"New Course Registration",content:"Opens next week",type:"academic",priority:"medium",createdAt:new Date,updatedAt:new Date},{title:"Scholarship Applications",content:"Deadline: March 30",type:"general",priority:"high",createdAt:new Date,updatedAt:new Date}];for(const i of e)await bt(Z(X,"announcements"),i);console.log(" Announcements collection initialized");const n=[{title:"Data Structures Assignment",description:"Submit your data structures assignment",dueDate:"2024-03-20",priority:"high",createdAt:new Date,updatedAt:new Date},{title:"AI Project Proposal",description:"Submit your AI project proposal",dueDate:"2024-03-25",priority:"medium",createdAt:new Date,updatedAt:new Date}];for(const i of n)await bt(Z(X,"deadlines"),i);console.log(" Deadlines collection initialized");const r=[{name:"PMSE",semester:"3rd Semester",year:"2",specialization:"AIML",academicYear:"2024-25",description:"Principles of Modern Software Engineering - Learn modern software development practices",pdfs:{"MST-1":"/pdfs/3rd-sem-mst1/Principle_of_Modern_Software_Engineering_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/MST-II_Principle_of_Modern_Software_Engineering_Nov2024 (2).pdf",Final:"/pdfs/3rd-sem-final/Modern_Software_Engineering_End_Term_Jan_2025_Questions.pdf"},createdAt:new Date,updatedAt:new Date},{name:"Operating System",semester:"3rd Semester",year:"2",specialization:"AIML",academicYear:"2024-25",description:"Operating Systems - Comprehensive study of OS concepts and implementations",pdfs:{"MST-1":"/pdfs/3rd-sem-mst1/System_Programming_and_OS_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/System_Programming_Operating_System_MST_2.pdf",Final:"/pdfs/3rd-sem-final/System_Programming_and_OS_End_Term_Jan_2025_Questions.pdf"},createdAt:new Date,updatedAt:new Date},{name:"ET1-Data Analytics(ALML, Cyber Security)",semester:"3rd Semester",year:"2",specialization:"AIML",academicYear:"2024-25",description:"Data Analytics for AIML and Cyber Security specializations",pdfs:{"MST-1":"/pdfs/3rd-sem-mst1/Introduction_to_Data_Analytics_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/Open_Standards_MST_2.pdf",Final:"/pdfs/3rd-sem-final/FinalPage_EmergingTech1_DataAnalytics.pdf"},createdAt:new Date,updatedAt:new Date},{name:"ET1-IT-Security (Data Science)",semester:"3rd Semester",year:"2",specialization:"DS",academicYear:"2024-25",description:"IT Security fundamentals for Data Science specialization",pdfs:{"MST-1":"/pdfs/3rd-sem-mst1/Open_Source_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/Open_Standards_MST_2.pdf",Final:"/pdfs/3rd-sem-final/Open_Source_Software_and_Open_Standards_Exam_Jan_2025.pdf"},createdAt:new Date,updatedAt:new Date},{name:"Relational Database Management System and NOSQL",semester:"3rd Semester",year:"2",specialization:"DS",academicYear:"2024-25",description:"RDBMS and NoSQL databases - Complete database management systems",pdfs:{"MST-1":"/pdfs/3rd-sem-mst1/RDBMS_Question_Paper.pdf","MST-2":"/pdfs/3rd-sem-mst2/MST 2 RDBMS_Nov2024_QuestionPaper.pdf",Final:"/pdfs/3rd-sem-final/Relational_Database_Management_System_NoSQL_Exam_Jan_2025.pdf"},createdAt:new Date,updatedAt:new Date}];for(const i of r)await bt(Z(X,"subjects"),i);console.log(" Subjects collection initialized");const s=[{email:"admin@ltsu.edu",role:"admin",name:"LTSU Administrator",createdAt:new Date,updatedAt:new Date}];for(const i of s)await bt(Z(X,"adminUsers"),i);console.log(" Admin users collection initialized"),console.log(" Firebase initialization completed successfully!"),alert("Firebase data initialized successfully!")}catch(t){console.error(" Error initializing Firebase data:",t),alert("Error initializing Firebase data. Check console for details.")}},g3=async()=>{try{const t=["events","announcements","deadlines","subjects","adminUsers"];for(const e of t){const r=(await me(Z(X,e))).docs.map(s=>ms(s.ref));await Promise.all(r),console.log(` Cleared ${e} collection`)}console.log(" All collections cleared"),alert("All Firebase collections cleared!")}catch(t){console.error(" Error clearing Firebase data:",t),alert("Error clearing Firebase data. Check console for details.")}};function y3(){const t=Qe(),[e,n]=V.useState(null),[r,s]=V.useState(!1),[i,o]=V.useState("events"),[c,u]=V.useState([]),[d,h]=V.useState([]),[g,p]=V.useState([]),[b,k]=V.useState([]),[A,D]=V.useState({title:"",description:"",date:"",type:"academic"}),[I,w]=V.useState({title:"",content:"",type:"general",priority:"normal"}),[T,L]=V.useState({title:"",description:"",dueDate:"",priority:"medium"}),[U,O]=V.useState({name:"",semester:"1st Semester",year:"1",specialization:"AIML",academicYear:"2024-25",description:""});V.useEffect(()=>{const P=sf(zt,B=>{console.log("Auth state changed:",B==null?void 0:B.email),B?(n(B),_(B)):(console.log("No user found, redirecting to login"),t("/auth/login"))});return()=>P()},[t]);const _=async P=>{var B,J;if(console.log("Checking admin status for:",P==null?void 0:P.email),P){console.log(" TEMP: Admin access granted for testing"),s(!0),y();return}try{if((B=P==null?void 0:P.email)!=null&&B.includes("admin")){console.log(" Admin access granted via email check"),s(!0),y();return}try{console.log("Checking adminUsers collection...");const Y=ie(Z(X,"adminUsers"));if((await me(Y)).docs.some(ut=>ut.data().email===(P==null?void 0:P.email))){console.log(" Admin access granted via collection check"),s(!0),y();return}}catch(Y){console.log("Admin collection check failed:",Y)}console.log(" Admin access denied"),alert(`Access denied. Admin privileges required.

Your email: ${P==null?void 0:P.email}

Please use an email containing "admin".`),t("/")}catch(Y){console.error("Error checking admin status:",Y),(J=P==null?void 0:P.email)!=null&&J.includes("admin")?(console.log(" Admin access granted via fallback"),s(!0),y()):(alert("Access denied. Admin privileges required."),t("/"))}},y=async()=>{try{const P=ie(Z(X,"events"),Ae("date","desc")),B=await me(P);u(B.docs.map(Ue=>({id:Ue.id,...Ue.data()})));const J=ie(Z(X,"announcements"),Ae("createdAt","desc")),Y=await me(J);h(Y.docs.map(Ue=>({id:Ue.id,...Ue.data()})));const we=ie(Z(X,"deadlines"),Ae("dueDate","asc")),ct=await me(we);p(ct.docs.map(Ue=>({id:Ue.id,...Ue.data()})));const ut=ie(Z(X,"subjects"),Ae("name","asc")),$t=await me(ut);k($t.docs.map(Ue=>({id:Ue.id,...Ue.data()})))}catch(P){console.error("Error loading data:",P)}},E=async()=>{try{await af(zt),t("/")}catch(P){console.error("Error signing out:",P)}},N=async P=>{P.preventDefault();try{await bt(Z(X,"events"),{...A,createdAt:new Date,updatedAt:new Date}),D({title:"",description:"",date:"",type:"academic"}),y()}catch(B){console.error("Error adding event:",B)}},v=async(P,B)=>{try{await Gt(Te(X,"events",P),{...B,updatedAt:new Date}),y()}catch(J){console.error("Error updating event:",J)}},R=async P=>{if(window.confirm("Are you sure you want to delete this event?"))try{await ms(Te(X,"events",P)),y()}catch(B){console.error("Error deleting event:",B)}},S=async P=>{P.preventDefault();try{await bt(Z(X,"announcements"),{...I,createdAt:new Date,updatedAt:new Date}),w({title:"",content:"",type:"general",priority:"normal"}),y()}catch(B){console.error("Error adding announcement:",B)}},ae=async(P,B)=>{try{await Gt(Te(X,"announcements",P),{...B,updatedAt:new Date}),y()}catch(J){console.error("Error updating announcement:",J)}},ee=async P=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await ms(Te(X,"announcements",P)),y()}catch(B){console.error("Error deleting announcement:",B)}},H=async P=>{P.preventDefault();try{await bt(Z(X,"deadlines"),{...T,updatedAt:new Date}),L({title:"",description:"",dueDate:"",priority:"medium"}),y()}catch(B){console.error("Error adding deadline:",B)}},ve=async(P,B)=>{try{await Gt(Te(X,"deadlines",P),{...B,updatedAt:new Date}),y()}catch(J){console.error("Error updating deadline:",J)}},C=async P=>{if(window.confirm("Are you sure you want to delete this deadline?"))try{await ms(Te(X,"deadlines",P)),y()}catch(B){console.error("Error deleting deadline:",B)}};return r?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},a.createElement(Pt,{user:e}),a.createElement("div",{className:"container mx-auto px-6 py-8"},a.createElement("div",{className:"mb-8 p-8 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-3xl shadow-2xl"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h1",{className:"text-4xl font-black mb-2"}," Admin Dashboard"),a.createElement("p",{className:"text-xl text-blue-100"},"Manage your website content dynamically")),a.createElement("div",{className:"flex space-x-4"},a.createElement("button",{onClick:()=>t("/admin/analytics"),className:"px-6 py-3 bg-purple-500/20 backdrop-blur-sm rounded-xl hover:bg-purple-600/30 transition-all duration-300 text-purple-100 border border-purple-400/30",title:"View analytics and system metrics"}," Analytics"),a.createElement("button",{onClick:()=>t("/admin/grades"),className:"px-6 py-3 bg-green-500/20 backdrop-blur-sm rounded-xl hover:bg-green-600/30 transition-all duration-300 text-green-100 border border-green-400/30",title:"Manage student grades and academic performance"}," Grades"),a.createElement("button",{onClick:()=>t("/admin/attendance"),className:"px-6 py-3 bg-orange-500/20 backdrop-blur-sm rounded-xl hover:bg-orange-600/30 transition-all duration-300 text-orange-100 border border-orange-400/30",title:"Manage student attendance records"}," Attendance"),a.createElement("button",{onClick:()=>t("/admin/users"),className:"px-6 py-3 bg-indigo-500/20 backdrop-blur-sm rounded-xl hover:bg-indigo-600/30 transition-all duration-300 text-indigo-100 border border-indigo-400/30",title:"View and manage all registered users"}," Users"),a.createElement("button",{onClick:p3,className:"px-6 py-3 bg-green-500/20 backdrop-blur-sm rounded-xl hover:bg-green-600/30 transition-all duration-300 text-green-100 border border-green-400/30",title:"Initialize Firebase with sample data"}," Init Data"),a.createElement("button",{onClick:g3,className:"px-6 py-3 bg-red-500/20 backdrop-blur-sm rounded-xl hover:bg-red-600/30 transition-all duration-300 text-red-100 border border-red-400/30",title:"Clear all Firebase data"}," Clear Data"),a.createElement("button",{onClick:E,className:"px-6 py-3 bg-white/20 backdrop-blur-sm rounded-xl hover:bg-white/30 transition-all duration-300"}," Logout")))),a.createElement("div",{className:"mb-8"},a.createElement("div",{className:"flex space-x-2 bg-white rounded-2xl p-2 shadow-xl"},[{id:"events",label:" Events",count:c.length},{id:"announcements",label:" Announcements",count:d.length},{id:"deadlines",label:" Deadlines",count:g.length},{id:"subjects",label:" Subjects",count:b.length}].map(P=>a.createElement("button",{key:P.id,onClick:()=>o(P.id),className:`flex-1 px-6 py-4 rounded-xl font-bold transition-all duration-300 ${i===P.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`},P.label," (",P.count,")")))),a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8"},i==="events"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-gray-800"}," Manage Events"),a.createElement("form",{onSubmit:N,className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border-2 border-blue-200"},a.createElement("h3",{className:"text-xl font-bold mb-4"},"Add New Event"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("input",{type:"text",placeholder:"Event Title",value:A.title,onChange:P=>D({...A,title:P.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0}),a.createElement("input",{type:"date",value:A.date,onChange:P=>D({...A,date:P.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0}),a.createElement("select",{value:A.type,onChange:P=>D({...A,type:P.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:"academic"},"Academic"),a.createElement("option",{value:"cultural"},"Cultural"),a.createElement("option",{value:"sports"},"Sports"),a.createElement("option",{value:"technical"},"Technical")),a.createElement("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-300"}," Add Event")),a.createElement("textarea",{placeholder:"Event Description",value:A.description,onChange:P=>D({...A,description:P.target.value}),className:"w-full mt-4 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",rows:"3",required:!0})),a.createElement("div",{className:"space-y-4"},c.map(P=>a.createElement("div",{key:P.id,className:"p-6 bg-gradient-to-r from-white to-gray-50 rounded-2xl border-2 border-gray-200 hover:border-blue-300 transition-all duration-300"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h3",{className:"text-xl font-bold text-gray-800"},P.title),a.createElement("p",{className:"text-gray-600 mt-1"},P.description),a.createElement("div",{className:"flex items-center space-x-4 mt-2"},a.createElement("span",{className:"text-sm text-gray-500"}," ",P.date),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${P.type==="academic"?"bg-blue-100 text-blue-800":P.type==="cultural"?"bg-purple-100 text-purple-800":P.type==="sports"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`},P.type))),a.createElement("div",{className:"flex space-x-2"},a.createElement("button",{onClick:()=>v(P.id,{...P,title:P.title+" (Updated)"}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition"}," Edit"),a.createElement("button",{onClick:()=>R(P.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"}," Delete"))))))),i==="announcements"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-gray-800"}," Manage Announcements"),a.createElement("form",{onSubmit:S,className:"mb-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl border-2 border-green-200"},a.createElement("h3",{className:"text-xl font-bold mb-4"},"Add New Announcement"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("input",{type:"text",placeholder:"Announcement Title",value:I.title,onChange:P=>w({...I,title:P.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-green-500 focus:outline-none",required:!0}),a.createElement("select",{value:I.type,onChange:P=>w({...I,type:P.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-green-500 focus:outline-none"},a.createElement("option",{value:"general"},"General"),a.createElement("option",{value:"academic"},"Academic"),a.createElement("option",{value:"exam"},"Exam"),a.createElement("option",{value:"event"},"Event")),a.createElement("select",{value:I.priority,onChange:P=>w({...I,priority:P.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-green-500 focus:outline-none"},a.createElement("option",{value:"low"},"Low Priority"),a.createElement("option",{value:"normal"},"Normal Priority"),a.createElement("option",{value:"high"},"High Priority")),a.createElement("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-300"}," Add Announcement")),a.createElement("textarea",{placeholder:"Announcement Content",value:I.content,onChange:P=>w({...I,content:P.target.value}),className:"w-full mt-4 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-green-500 focus:outline-none",rows:"3",required:!0})),a.createElement("div",{className:"space-y-4"},d.map(P=>a.createElement("div",{key:P.id,className:`p-6 rounded-2xl border-2 transition-all duration-300 ${P.priority==="high"?"bg-red-50 border-red-200":P.priority==="normal"?"bg-blue-50 border-blue-200":"bg-green-50 border-green-200"}`},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h3",{className:"text-xl font-bold text-gray-800"},P.title),a.createElement("p",{className:"text-gray-600 mt-1"},P.content),a.createElement("div",{className:"flex items-center space-x-4 mt-2"},a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${P.type==="academic"?"bg-blue-100 text-blue-800":P.type==="exam"?"bg-red-100 text-red-800":P.type==="event"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`},P.type),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${P.priority==="high"?"bg-red-100 text-red-800":P.priority==="normal"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`},P.priority," priority"))),a.createElement("div",{className:"flex space-x-2"},a.createElement("button",{onClick:()=>ae(P.id,{...P,title:P.title+" (Updated)"}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition"}," Edit"),a.createElement("button",{onClick:()=>ee(P.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"}," Delete"))))))),i==="deadlines"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-gray-800"}," Manage Deadlines"),a.createElement("form",{onSubmit:H,className:"mb-8 p-6 bg-gradient-to-r from-orange-50 to-red-50 rounded-2xl border-2 border-orange-200"},a.createElement("h3",{className:"text-xl font-bold mb-4"},"Add New Deadline"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},a.createElement("input",{type:"text",placeholder:"Deadline Title",value:T.title,onChange:P=>L({...T,title:P.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:outline-none",required:!0}),a.createElement("input",{type:"date",value:T.dueDate,onChange:P=>L({...T,dueDate:P.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:outline-none",required:!0}),a.createElement("select",{value:T.priority,onChange:P=>L({...T,priority:P.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:outline-none"},a.createElement("option",{value:"low"},"Low Priority"),a.createElement("option",{value:"medium"},"Medium Priority"),a.createElement("option",{value:"high"},"High Priority")),a.createElement("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white font-bold rounded-xl hover:from-orange-600 hover:to-red-700 transition-all duration-300"}," Add Deadline")),a.createElement("textarea",{placeholder:"Deadline Description",value:T.description,onChange:P=>L({...T,description:P.target.value}),className:"w-full mt-4 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:outline-none",rows:"3",required:!0})),a.createElement("div",{className:"space-y-4"},g.map(P=>a.createElement("div",{key:P.id,className:`p-6 rounded-2xl border-2 transition-all duration-300 ${P.priority==="high"?"bg-red-50 border-red-200":P.priority==="medium"?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200"}`},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h3",{className:"text-xl font-bold text-gray-800"},P.title),a.createElement("p",{className:"text-gray-600 mt-1"},P.description),a.createElement("div",{className:"flex items-center space-x-4 mt-2"},a.createElement("span",{className:"text-sm text-gray-500"}," Due: ",new Date(P.dueDate).toLocaleDateString()),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${P.priority==="high"?"bg-red-100 text-red-800":P.priority==="medium"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`},P.priority," priority"))),a.createElement("div",{className:"flex space-x-2"},a.createElement("button",{onClick:()=>ve(P.id,{...P,title:P.title+" (Updated)"}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition"}," Edit"),a.createElement("button",{onClick:()=>C(P.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"}," Delete"))))))),i==="subjects"&&a.createElement("div",null,a.createElement("h2",{className:"text-3xl font-bold mb-6 text-gray-800"}," Manage Subjects"),a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold mb-2"},"Coming Soon"),a.createElement("p",{className:"text-gray-600"},"Subjects management interface will be implemented next."))))),a.createElement(Rt,null)):a.createElement("div",{className:"min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h1",{className:"text-2xl font-bold mb-2"},"Access Denied"),a.createElement("p",{className:"text-gray-600"},"You don't have permission to access this page.")))}function v3(){const t=Qe(),[e,n]=V.useState(null),[r,s]=V.useState(!1),[i,o]=V.useState(!0),[c,u]=V.useState({totalUsers:0,totalEvents:0,totalAnnouncements:0,totalDeadlines:0,totalAssignments:0,userActivity:[],contentPerformance:[],systemHealth:{}});V.useEffect(()=>{const p=zt.onAuthStateChanged(async b=>{b?(n(b),await d(b)):t("/auth/login")});return()=>p()},[t]);const d=async p=>{var b;try{(b=p==null?void 0:p.email)!=null&&b.includes("admin")?(s(!0),await h()):(alert("Access denied. Admin privileges required."),t("/"))}catch(k){console.error("Error checking admin status:",k),t("/")}},h=async()=>{try{o(!0);const[p,b,k,A,D,I]=await Promise.all([me(Z(X,"users")),me(Z(X,"events")),me(Z(X,"announcements")),me(Z(X,"deadlines")),me(Z(X,"assignments")),Wt.getAnalytics("user_activity",{start:le.fromDate(new Date(Date.now()-30*24*60*60*1e3))})]),w=I.reduce((T,L)=>{const U=L.data(),O=U.createdAt.toDate().toISOString().split("T")[0];return T[O]||(T[O]={date:O,pageViews:0,uniqueUsers:new Set,sessions:0}),T[O].pageViews++,T[O].uniqueUsers.add(U.userId),T[O].sessions++,T},{});Object.values(w).forEach(T=>{T.uniqueUsers=T.uniqueUsers.size}),u({totalUsers:p.size,totalEvents:b.size,totalAnnouncements:k.size,totalDeadlines:A.size,totalAssignments:D.size,userActivity:Object.values(w).sort((T,L)=>L.date.localeCompare(T.date)),contentPerformance:[],systemHealth:{lastBackup:"2024-10-01",databaseSize:"2.4 MB",uptime:"99.9%"}})}catch(p){console.error("Error loading analytics:",p)}finally{o(!1)}},g=async p=>{try{const k=(await me(Z(X,p))).docs.map(T=>({id:T.id,...T.data()})),A=JSON.stringify(k,null,2),D=new Blob([A],{type:"application/json"}),I=URL.createObjectURL(D),w=document.createElement("a");w.href=I,w.download=`${p}_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(I),alert(`${p} data exported successfully!`)}catch(b){console.error("Error exporting data:",b),alert("Error exporting data. Please try again.")}};return r?i?a.createElement("div",{className:"min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.createElement("p",null,"Loading analytics..."))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},a.createElement(Pt,{user:e}),a.createElement("div",{className:"container mx-auto px-6 py-8"},a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8 mb-8"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h1",{className:"text-4xl font-black mb-2"}," Analytics Dashboard"),a.createElement("p",{className:"text-xl text-gray-600"},"Monitor system performance and user engagement")),a.createElement("div",{className:"flex space-x-4"},a.createElement("button",{onClick:()=>t("/admin"),className:"px-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition"}," Back to Admin"),a.createElement("button",{onClick:h,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition"}," Refresh Data")))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},a.createElement("div",{className:"bg-white rounded-2xl p-6 shadow-lg border-l-4 border-blue-500"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-600"},"Total Users"),a.createElement("p",{className:"text-3xl font-bold text-blue-600"},c.totalUsers)),a.createElement("div",{className:"text-4xl"},""))),a.createElement("div",{className:"bg-white rounded-2xl p-6 shadow-lg border-l-4 border-green-500"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-600"},"Active Events"),a.createElement("p",{className:"text-3xl font-bold text-green-600"},c.totalEvents)),a.createElement("div",{className:"text-4xl"},""))),a.createElement("div",{className:"bg-white rounded-2xl p-6 shadow-lg border-l-4 border-purple-500"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-600"},"Announcements"),a.createElement("p",{className:"text-3xl font-bold text-purple-600"},c.totalAnnouncements)),a.createElement("div",{className:"text-4xl"},""))),a.createElement("div",{className:"bg-white rounded-2xl p-6 shadow-lg border-l-4 border-orange-500"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-600"},"Active Assignments"),a.createElement("p",{className:"text-3xl font-bold text-orange-600"},c.totalAssignments)),a.createElement("div",{className:"text-4xl"},"")))),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8"},a.createElement("h2",{className:"text-2xl font-bold mb-6 text-gray-800"}," User Activity (Last 30 Days)"),a.createElement("div",{className:"space-y-4"},c.userActivity.slice(0,10).map(p=>a.createElement("div",{key:p.date,className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl"},a.createElement("div",null,a.createElement("p",{className:"font-semibold"},new Date(p.date).toLocaleDateString()),a.createElement("p",{className:"text-sm text-gray-600"},p.uniqueUsers," unique users")),a.createElement("div",{className:"text-right"},a.createElement("p",{className:"font-bold text-blue-600"},p.pageViews),a.createElement("p",{className:"text-sm text-gray-600"},"page views")))))),a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8"},a.createElement("h2",{className:"text-2xl font-bold mb-6 text-gray-800"}," System Health"),a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-xl"},a.createElement("div",null,a.createElement("p",{className:"font-semibold"},"Database Status"),a.createElement("p",{className:"text-sm text-gray-600"},"All systems operational")),a.createElement("div",{className:"text-2xl"},"")),a.createElement("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl"},a.createElement("div",null,a.createElement("p",{className:"font-semibold"},"Last Backup"),a.createElement("p",{className:"text-sm text-gray-600"},c.systemHealth.lastBackup)),a.createElement("div",{className:"text-2xl"},"")),a.createElement("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-xl"},a.createElement("div",null,a.createElement("p",{className:"font-semibold"},"Database Size"),a.createElement("p",{className:"text-sm text-gray-600"},c.systemHealth.databaseSize)),a.createElement("div",{className:"text-2xl"},"")),a.createElement("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-xl"},a.createElement("div",null,a.createElement("p",{className:"font-semibold"},"System Uptime"),a.createElement("p",{className:"text-sm text-gray-600"},c.systemHealth.uptime)),a.createElement("div",{className:"text-2xl"},""))))),a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8"},a.createElement("h2",{className:"text-2xl font-bold mb-6 text-gray-800"}," Data Export & Backup"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},[{name:"users",label:"User Data",icon:""},{name:"events",label:"Events",icon:""},{name:"announcements",label:"Announcements",icon:""},{name:"deadlines",label:"Deadlines",icon:""},{name:"assignments",label:"Assignments",icon:""},{name:"grades",label:"Grades",icon:""}].map(p=>a.createElement("button",{key:p.name,onClick:()=>g(p.name),className:"p-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl border-2 border-gray-200 hover:border-blue-300 transition-all duration-300 text-left"},a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("div",{className:"text-3xl"},p.icon),a.createElement("div",null,a.createElement("h3",{className:"font-bold text-gray-800"},p.label),a.createElement("p",{className:"text-sm text-gray-600"},"Export as JSON")))))),a.createElement("div",{className:"mt-8 p-6 bg-yellow-50 rounded-2xl border-2 border-yellow-200"},a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("div",{className:"text-3xl"},""),a.createElement("div",null,a.createElement("h3",{className:"font-bold text-yellow-800"},"Backup Recommendation"),a.createElement("p",{className:"text-yellow-700"},"Regular data backups are essential. Export critical data periodically and store securely.")))))),a.createElement(Rt,null)):a.createElement("div",{className:"min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h1",{className:"text-2xl font-bold mb-2"},"Access Denied"),a.createElement("p",{className:"text-gray-600"},"You don't have permission to access this page.")))}function E3(){const t=Qe(),[e,n]=V.useState(null),[r,s]=V.useState(!1),[i,o]=V.useState(!0),[c,u]=V.useState([]),[d,h]=V.useState([]),[g,p]=V.useState([]),[b,k]=V.useState({studentId:"",subjectId:"",subjectName:"",semester:"1",year:"1",academicYear:"2024-25",internalMarks:"",externalMarks:"",grade:"",credits:""}),[A,D]=V.useState({studentId:"",semester:"",year:"",subjectId:""});V.useEffect(()=>{const E=zt.onAuthStateChanged(async N=>{N?(n(N),await I(N)):t("/auth/login")});return()=>E()},[t]);const I=async E=>{var N;try{(N=E==null?void 0:E.email)!=null&&N.includes("admin")?(s(!0),await w()):(alert("Access denied. Admin privileges required."),t("/"))}catch(v){console.error("Error checking admin status:",v),t("/")}},w=async()=>{try{o(!0);let E=Z(X,"grades");A.studentId&&(E=ie(E,Oe("studentId","==",A.studentId))),A.semester&&(E=ie(E,Oe("semester","==",parseInt(A.semester)))),A.year&&(E=ie(E,Oe("year","==",parseInt(A.year)))),A.subjectId&&(E=ie(E,Oe("subjectId","==",A.subjectId))),E=ie(E,Ae("createdAt","desc"));const v=(await me(E)).docs.map(H=>({id:H.id,...H.data()})),S=(await me(Z(X,"users"))).docs.map(H=>({id:H.id,...H.data()})),ee=(await me(Z(X,"subjects"))).docs.map(H=>({id:H.id,...H.data()}));u(v),h(S),p(ee)}catch(E){console.error("Error loading data:",E)}finally{o(!1)}};V.useEffect(()=>{r&&w()},[A,r]);const T=(E,N)=>{const v=parseFloat(E||0)+parseFloat(N||0);return v>=90?"A+":v>=80?"A":v>=70?"B+":v>=60?"B":v>=50?"C":"F"},L=E=>({"A+":10,A:9,"B+":8,B:7,C:6,F:0})[E]||0,U=async E=>{E.preventDefault();try{const N=parseFloat(b.internalMarks),v=parseFloat(b.externalMarks),R=N+v,S=T(N,v),ae=L(S),ee={...b,internalMarks:N,externalMarks:v,totalMarks:R,grade:S,gradePoint:ae,credits:parseFloat(b.credits),semester:parseInt(b.semester),year:parseInt(b.year)};await Wt.addStudentGrade(ee),k({studentId:"",subjectId:"",subjectName:"",semester:"1",year:"1",academicYear:"2024-25",internalMarks:"",externalMarks:"",grade:"",credits:""}),alert("Grade added successfully!"),await w()}catch(N){console.error("Error adding grade:",N),alert("Error adding grade. Please try again.")}},O=async(E,N)=>{try{await Gt(Te(X,"grades",E),{...N,updatedAt:new Date}),await w()}catch(v){console.error("Error updating grade:",v)}},_=async E=>{if(window.confirm("Are you sure you want to delete this grade?"))try{await ms(Te(X,"grades",E)),await w()}catch(N){console.error("Error deleting grade:",N)}},y=E=>{const N=d.find(v=>v.uid===E);return N?`${N.firstName||""} ${N.lastName||""}`.trim()||N.displayName||N.email:"Unknown Student"};return r?i?a.createElement("div",{className:"min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.createElement("p",null,"Loading grades..."))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},a.createElement(Pt,{user:e}),a.createElement("div",{className:"container mx-auto px-6 py-8"},a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8 mb-8"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h1",{className:"text-4xl font-black mb-2"}," Grades Management"),a.createElement("p",{className:"text-xl text-gray-600"},"Manage student academic performance and grades")),a.createElement("div",{className:"flex space-x-4"},a.createElement("button",{onClick:()=>t("/admin"),className:"px-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition"}," Back to Admin"),a.createElement("button",{onClick:w,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition"}," Refresh")))),a.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 mb-8"},a.createElement("h2",{className:"text-2xl font-bold mb-4"}," Filter Grades"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},a.createElement("select",{value:A.studentId,onChange:E=>D({...A,studentId:E.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Students"),d.map(E=>a.createElement("option",{key:E.uid,value:E.uid},E.firstName," ",E.lastName," (",E.studentId,")"))),a.createElement("select",{value:A.semester,onChange:E=>D({...A,semester:E.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Semesters"),a.createElement("option",{value:"1"},"Semester 1"),a.createElement("option",{value:"2"},"Semester 2")),a.createElement("select",{value:A.year,onChange:E=>D({...A,year:E.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Years"),a.createElement("option",{value:"1"},"Year 1"),a.createElement("option",{value:"2"},"Year 2"),a.createElement("option",{value:"3"},"Year 3"),a.createElement("option",{value:"4"},"Year 4")),a.createElement("select",{value:A.subjectId,onChange:E=>D({...A,subjectId:E.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Subjects"),g.map(E=>a.createElement("option",{key:E.id,value:E.id},E.name))))),a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8 mb-8"},a.createElement("h2",{className:"text-3xl font-bold mb-6 text-gray-800"}," Add New Grade"),a.createElement("form",{onSubmit:U,className:"space-y-6"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},a.createElement("select",{value:b.studentId,onChange:E=>k({...b,studentId:E.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0},a.createElement("option",{value:""},"Select Student"),d.map(E=>a.createElement("option",{key:E.uid,value:E.uid},E.firstName," ",E.lastName," (",E.studentId,")"))),a.createElement("select",{value:b.subjectId,onChange:E=>{const N=g.find(v=>v.id===E.target.value);k({...b,subjectId:E.target.value,subjectName:N?N.name:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0},a.createElement("option",{value:""},"Select Subject"),g.map(E=>a.createElement("option",{key:E.id,value:E.id},E.name))),a.createElement("select",{value:b.semester,onChange:E=>k({...b,semester:E.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0},a.createElement("option",{value:"1"},"Semester 1"),a.createElement("option",{value:"2"},"Semester 2")),a.createElement("select",{value:b.year,onChange:E=>k({...b,year:E.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0},a.createElement("option",{value:"1"},"Year 1"),a.createElement("option",{value:"2"},"Year 2"),a.createElement("option",{value:"3"},"Year 3"),a.createElement("option",{value:"4"},"Year 4")),a.createElement("input",{type:"text",placeholder:"Academic Year (e.g., 2024-25)",value:b.academicYear,onChange:E=>k({...b,academicYear:E.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0}),a.createElement("input",{type:"number",placeholder:"Credits",value:b.credits,onChange:E=>k({...b,credits:E.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",min:"1",max:"6",required:!0})),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Internal Marks (40)"),a.createElement("input",{type:"number",value:b.internalMarks,onChange:E=>k({...b,internalMarks:E.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",min:"0",max:"40",required:!0})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"External Marks (60)"),a.createElement("input",{type:"number",value:b.externalMarks,onChange:E=>k({...b,externalMarks:E.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",min:"0",max:"60",required:!0})),a.createElement("div",{className:"flex items-end"},a.createElement("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-300"}," Add Grade"))))),a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8"},a.createElement("h2",{className:"text-3xl font-bold mb-6 text-gray-800"}," Grades List (",c.length,")"),a.createElement("div",{className:"space-y-4"},c.length>0?c.map(E=>a.createElement("div",{key:E.id,className:"p-6 bg-gradient-to-r from-white to-gray-50 rounded-2xl border-2 border-gray-200 hover:border-blue-300 transition-all duration-300"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("h3",{className:"font-bold text-gray-800"},y(E.studentId)),a.createElement("p",{className:"text-sm text-gray-600"},"ID: ",E.studentId)),a.createElement("div",null,a.createElement("h4",{className:"font-semibold text-gray-800"},E.subjectName),a.createElement("p",{className:"text-sm text-gray-600"},"Sem ",E.semester,", Year ",E.year)),a.createElement("div",null,a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("div",{className:"text-center"},a.createElement("p",{className:"text-sm text-gray-600"},"Internal"),a.createElement("p",{className:"font-bold"},E.internalMarks,"/40")),a.createElement("div",{className:"text-center"},a.createElement("p",{className:"text-sm text-gray-600"},"External"),a.createElement("p",{className:"font-bold"},E.externalMarks,"/60")),a.createElement("div",{className:"text-center"},a.createElement("p",{className:"text-sm text-gray-600"},"Total"),a.createElement("p",{className:"font-bold"},E.totalMarks,"/100")))),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"text-center"},a.createElement("span",{className:`inline-block px-4 py-2 rounded-full text-lg font-bold ${E.grade==="A+"||E.grade==="A"?"bg-green-100 text-green-800":E.grade==="B+"||E.grade==="B"?"bg-blue-100 text-blue-800":E.grade==="C"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`},E.grade," (",E.gradePoint," GP)"),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},E.credits," Credits")),a.createElement("div",{className:"flex space-x-2"},a.createElement("button",{onClick:()=>O(E.id,{...E,grade:E.grade==="A+"?"A":"A+"}),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition"},""),a.createElement("button",{onClick:()=>_(E.id),className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"},"")))))):a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold mb-2"},"No Grades Found"),a.createElement("p",{className:"text-gray-600"},"Add grades using the form above."))))),a.createElement(Rt,null)):a.createElement("div",{className:"min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h1",{className:"text-2xl font-bold mb-2"},"Access Denied"),a.createElement("p",{className:"text-gray-600"},"You don't have permission to access this page.")))}function b3(){const t=Qe(),[e,n]=V.useState(null),[r,s]=V.useState(!1),[i,o]=V.useState(!0),[c,u]=V.useState([]),[d,h]=V.useState([]),[g,p]=V.useState([]),[b,k]=V.useState({studentId:"",subjectId:"",subjectName:"",semester:"1",year:"1",academicYear:"2024-25",totalClasses:"",attendedClasses:"",records:[]}),[A,D]=V.useState({studentId:"",semester:"",year:"",subjectId:""});V.useEffect(()=>{const y=zt.onAuthStateChanged(async E=>{E?(n(E),await I(E)):t("/auth/login")});return()=>y()},[t]);const I=async y=>{var E;try{(E=y==null?void 0:y.email)!=null&&E.includes("admin")?(s(!0),await w()):(alert("Access denied. Admin privileges required."),t("/"))}catch(N){console.error("Error checking admin status:",N),t("/")}},w=async()=>{try{o(!0);let y=Z(X,"attendance");A.studentId&&(y=ie(y,Oe("studentId","==",A.studentId))),A.semester&&(y=ie(y,Oe("semester","==",parseInt(A.semester)))),A.year&&(y=ie(y,Oe("year","==",parseInt(A.year)))),A.subjectId&&(y=ie(y,Oe("subjectId","==",A.subjectId))),y=ie(y,Ae("createdAt","desc"));const N=(await me(y)).docs.map(ee=>({id:ee.id,...ee.data()})),R=(await me(Z(X,"users"))).docs.map(ee=>({id:ee.id,...ee.data()})),ae=(await me(Z(X,"subjects"))).docs.map(ee=>({id:ee.id,...ee.data()}));u(N),h(R),p(ae)}catch(y){console.error("Error loading data:",y)}finally{o(!1)}};V.useEffect(()=>{r&&w()},[A,r]);const T=async y=>{y.preventDefault();try{const E=parseInt(b.totalClasses),N=parseInt(b.attendedClasses),v=E>0?(N/E*100).toFixed(2):0,R={...b,totalClasses:E,attendedClasses:N,attendancePercentage:parseFloat(v),semester:parseInt(b.semester),year:parseInt(b.year)};await Wt.updateAttendance("new",R),k({studentId:"",subjectId:"",subjectName:"",semester:"1",year:"1",academicYear:"2024-25",totalClasses:"",attendedClasses:"",records:[]}),alert("Attendance record added successfully!"),await w()}catch(E){console.error("Error adding attendance:",E),alert("Error adding attendance record. Please try again.")}},L=async(y,E)=>{try{await Wt.updateAttendance(y,E),await w()}catch(N){console.error("Error updating attendance:",N)}},U=async y=>{if(window.confirm("Are you sure you want to delete this attendance record?"))try{await ms(Te(X,"attendance",y)),await w()}catch(E){console.error("Error deleting attendance:",E)}},O=y=>{const E=d.find(N=>N.uid===y);return E?`${E.firstName||""} ${E.lastName||""}`.trim()||E.displayName||E.email:"Unknown Student"},_=y=>y>=85?"text-green-600 bg-green-100":y>=75?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return r?i?a.createElement("div",{className:"min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.createElement("p",null,"Loading attendance..."))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},a.createElement(Pt,{user:e}),a.createElement("div",{className:"container mx-auto px-6 py-8"},a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8 mb-8"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h1",{className:"text-4xl font-black mb-2"}," Attendance Management"),a.createElement("p",{className:"text-xl text-gray-600"},"Track and manage student attendance records")),a.createElement("div",{className:"flex space-x-4"},a.createElement("button",{onClick:()=>t("/admin"),className:"px-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition"}," Back to Admin"),a.createElement("button",{onClick:w,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition"}," Refresh")))),a.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 mb-8"},a.createElement("h2",{className:"text-2xl font-bold mb-4"}," Filter Attendance Records"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},a.createElement("select",{value:A.studentId,onChange:y=>D({...A,studentId:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Students"),d.map(y=>a.createElement("option",{key:y.uid,value:y.uid},y.firstName," ",y.lastName," (",y.studentId,")"))),a.createElement("select",{value:A.semester,onChange:y=>D({...A,semester:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Semesters"),a.createElement("option",{value:"1"},"Semester 1"),a.createElement("option",{value:"2"},"Semester 2")),a.createElement("select",{value:A.year,onChange:y=>D({...A,year:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Years"),a.createElement("option",{value:"1"},"Year 1"),a.createElement("option",{value:"2"},"Year 2"),a.createElement("option",{value:"3"},"Year 3"),a.createElement("option",{value:"4"},"Year 4")),a.createElement("select",{value:A.subjectId,onChange:y=>D({...A,subjectId:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Subjects"),g.map(y=>a.createElement("option",{key:y.id,value:y.id},y.name))))),a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8 mb-8"},a.createElement("h2",{className:"text-3xl font-bold mb-6 text-gray-800"}," Add Attendance Record"),a.createElement("form",{onSubmit:T,className:"space-y-6"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},a.createElement("select",{value:b.studentId,onChange:y=>k({...b,studentId:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0},a.createElement("option",{value:""},"Select Student"),d.map(y=>a.createElement("option",{key:y.uid,value:y.uid},y.firstName," ",y.lastName," (",y.studentId,")"))),a.createElement("select",{value:b.subjectId,onChange:y=>{const E=g.find(N=>N.id===y.target.value);k({...b,subjectId:y.target.value,subjectName:E?E.name:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0},a.createElement("option",{value:""},"Select Subject"),g.map(y=>a.createElement("option",{key:y.id,value:y.id},y.name))),a.createElement("select",{value:b.semester,onChange:y=>k({...b,semester:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0},a.createElement("option",{value:"1"},"Semester 1"),a.createElement("option",{value:"2"},"Semester 2")),a.createElement("select",{value:b.year,onChange:y=>k({...b,year:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0},a.createElement("option",{value:"1"},"Year 1"),a.createElement("option",{value:"2"},"Year 2"),a.createElement("option",{value:"3"},"Year 3"),a.createElement("option",{value:"4"},"Year 4")),a.createElement("input",{type:"text",placeholder:"Academic Year (e.g., 2024-25)",value:b.academicYear,onChange:y=>k({...b,academicYear:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",required:!0}),a.createElement("input",{type:"number",placeholder:"Total Classes",value:b.totalClasses,onChange:y=>k({...b,totalClasses:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",min:"1",required:!0}),a.createElement("input",{type:"number",placeholder:"Attended Classes",value:b.attendedClasses,onChange:y=>k({...b,attendedClasses:y.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none",min:"0",required:!0}),a.createElement("div",{className:"flex items-end"},a.createElement("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-300"}," Add Attendance"))))),a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8"},a.createElement("h2",{className:"text-3xl font-bold mb-6 text-gray-800"}," Attendance Records (",c.length,")"),a.createElement("div",{className:"space-y-4"},c.length>0?c.map(y=>a.createElement("div",{key:y.id,className:"p-6 bg-gradient-to-r from-white to-gray-50 rounded-2xl border-2 border-gray-200 hover:border-blue-300 transition-all duration-300"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},a.createElement("div",null,a.createElement("h3",{className:"font-bold text-gray-800"},O(y.studentId)),a.createElement("p",{className:"text-sm text-gray-600"},"ID: ",y.studentId)),a.createElement("div",null,a.createElement("h4",{className:"font-semibold text-gray-800"},y.subjectName),a.createElement("p",{className:"text-sm text-gray-600"},"Sem ",y.semester,", Year ",y.year),a.createElement("p",{className:"text-sm text-gray-600"},y.academicYear)),a.createElement("div",null,a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("div",{className:"text-center"},a.createElement("p",{className:"text-sm text-gray-600"},"Total Classes"),a.createElement("p",{className:"font-bold"},y.totalClasses)),a.createElement("div",{className:"text-center"},a.createElement("p",{className:"text-sm text-gray-600"},"Attended"),a.createElement("p",{className:"font-bold text-green-600"},y.attendedClasses)))),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"text-center"},a.createElement("span",{className:`inline-block px-4 py-2 rounded-full text-lg font-bold ${_(y.attendancePercentage)}`},y.attendancePercentage,"%"),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},y.attendancePercentage>=85?"Excellent":y.attendancePercentage>=75?"Good":"Needs Improvement")),a.createElement("div",{className:"flex space-x-2"},a.createElement("button",{onClick:()=>L(y.id,{...y,attendedClasses:y.attendedClasses+1}),className:"px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition",title:"Mark present"},""),a.createElement("button",{onClick:()=>L(y.id,{...y,totalClasses:y.totalClasses+1}),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",title:"Add class"},""),a.createElement("button",{onClick:()=>U(y.id),className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"},"")))))):a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold mb-2"},"No Attendance Records"),a.createElement("p",{className:"text-gray-600"},"Add attendance records using the form above."))))),a.createElement(Rt,null)):a.createElement("div",{className:"min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h1",{className:"text-2xl font-bold mb-2"},"Access Denied"),a.createElement("p",{className:"text-gray-600"},"You don't have permission to access this page.")))}const w3=async()=>{try{const t=[{uid:"sample-user-1",firstName:"Satish",lastName:"",fullName:"Satish",phoneNumber:"9876543210",email:"satish123@gmail.com",studentId:"23100010011",gender:"Male",department:"BTech CSE IBM",specialization:"AI & ML",currentYear:"3",currentSemester:"1",enrollmentYear:"2021",status:"active",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15"),address:{street:"123 Main Street",city:"Hyderabad",state:"Telangana",pincode:"500001",country:"India"},academicRecords:{gpa:8.5,totalCredits:120,completedSubjects:["CS101","CS102","CS201"]}},{uid:"sample-user-2",firstName:"Priya",lastName:"Sharma",fullName:"Priya Sharma",phoneNumber:"9876543211",email:"priya.sharma@ltsu.edu",studentId:"23100010012",gender:"Female",department:"BTech CSE IBM",specialization:"Data Science",currentYear:"3",currentSemester:"1",enrollmentYear:"2021",status:"active",createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20"),address:{street:"456 Tech Park",city:"Bangalore",state:"Karnataka",pincode:"560001",country:"India"},academicRecords:{gpa:9.2,totalCredits:125,completedSubjects:["CS101","CS102","CS201","DS101"]}},{uid:"sample-user-3",firstName:"Rahul",lastName:"Verma",fullName:"Rahul Verma",phoneNumber:"9876543212",email:"rahul.verma@ltsu.edu",studentId:"23100010013",gender:"Male",department:"BTech CSE IBM",specialization:"Cyber Security",currentYear:"2",currentSemester:"2",enrollmentYear:"2022",status:"active",createdAt:new Date("2024-02-01"),updatedAt:new Date("2024-02-01"),address:{street:"789 Security Lane",city:"Delhi",state:"Delhi",pincode:"110001",country:"India"},academicRecords:{gpa:8.8,totalCredits:85,completedSubjects:["CS101","CS102","SEC101"]}},{uid:"sample-user-4",firstName:"Anjali",lastName:"Patel",fullName:"Anjali Patel",phoneNumber:"9876543213",email:"anjali.patel@ltsu.edu",studentId:"23100010014",gender:"Female",department:"BTech CSE IBM",specialization:"IoT",currentYear:"4",currentSemester:"1",enrollmentYear:"2020",status:"active",createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-10"),address:{street:"321 IoT Boulevard",city:"Mumbai",state:"Maharashtra",pincode:"400001",country:"India"},academicRecords:{gpa:9.5,totalCredits:160,completedSubjects:["CS101","CS102","CS201","CS301","IOT101","IOT201"]}},{uid:"sample-user-5",firstName:"Karan",lastName:"Singh",fullName:"Karan Singh",phoneNumber:"9876543214",email:"karan.singh@ltsu.edu",studentId:"23100010015",gender:"Male",department:"BTech Core",specialization:"Computer Science (Core)",currentYear:"1",currentSemester:"2",enrollmentYear:"2023",status:"active",createdAt:new Date("2024-02-15"),updatedAt:new Date("2024-02-15"),address:{street:"654 Campus Road",city:"Chennai",state:"Tamil Nadu",pincode:"600001",country:"India"},academicRecords:{gpa:7.8,totalCredits:25,completedSubjects:["CS101"]}}];console.log("Initializing sample users...");for(const e of t)try{await Vx(Te(X,"users",e.uid),e),console.log(` Created sample user: ${e.fullName}`)}catch(n){console.error(` Failed to create user ${e.fullName}:`,n)}console.log(" Sample users initialization completed!"),alert("Sample users created successfully! You can now view them in the admin user management.")}catch(t){console.error("Error initializing sample users:",t),alert("Failed to create sample users. Please check the console for details.")}};function x3(){const t=Qe(),[e,n]=V.useState(null),[r,s]=V.useState(!1),[i,o]=V.useState(!0),[c,u]=V.useState([]),[d,h]=V.useState(null),[g,p]=V.useState(!1),[b,k]=V.useState({search:"",year:"",specialization:""});V.useEffect(()=>{const O=zt.onAuthStateChanged(async _=>{_?(n(_),await A(_)):t("/auth/login")});return()=>O()},[t]);const A=async O=>{var _;try{(_=O==null?void 0:O.email)!=null&&_.includes("admin")?(s(!0),await D()):(alert("Access denied. Admin privileges required."),t("/"))}catch(y){console.error("Error checking admin status:",y),t("/")}},D=async()=>{try{o(!0);const O=ie(Z(X,"users"),Ae("createdAt","desc")),y=(await me(O)).docs.map(E=>({id:E.id,...E.data()}));u(y)}catch(O){console.error("Error loading users:",O)}finally{o(!1)}},I=c.filter(O=>{var N,v,R,S;const _=!b.search||((N=O.firstName)==null?void 0:N.toLowerCase().includes(b.search.toLowerCase()))||((v=O.lastName)==null?void 0:v.toLowerCase().includes(b.search.toLowerCase()))||((R=O.email)==null?void 0:R.toLowerCase().includes(b.search.toLowerCase()))||((S=O.studentId)==null?void 0:S.toLowerCase().includes(b.search.toLowerCase())),y=!b.year||O.currentYear===b.year,E=!b.specialization||O.specialization===b.specialization;return _&&y&&E}),w=O=>{h(O),p(!0)},T=async(O,_)=>{try{await Gt(Te(X,"users",O),{..._,updatedAt:new Date}),await D(),alert("User updated successfully!")}catch(y){console.error("Error updating user:",y),alert("Error updating user. Please try again.")}},L=async O=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await ms(Te(X,"users",O)),await D(),alert("User deleted successfully!")}catch(_){console.error("Error deleting user:",_),alert("Error deleting user. Please try again.")}},U=O=>({AIML:"bg-blue-100 text-blue-800",DS:"bg-green-100 text-green-800",IOT:"bg-purple-100 text-purple-800","Cyber Security":"bg-red-100 text-red-800"})[O]||"bg-gray-100 text-gray-800";return r?i?a.createElement("div",{className:"min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.createElement("p",null,"Loading users..."))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},a.createElement(Pt,{user:e}),a.createElement("div",{className:"container mx-auto px-6 py-8"},a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8 mb-8"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h1",{className:"text-4xl font-black mb-2"}," User Management"),a.createElement("p",{className:"text-xl text-gray-600"},"View and manage all registered users")),a.createElement("div",{className:"flex space-x-4"},a.createElement("button",{onClick:()=>t("/admin"),className:"px-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition"}," Back to Admin"),a.createElement("button",{onClick:D,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition"}," Refresh"),a.createElement("button",{onClick:async()=>{window.confirm("This will create sample users for testing. Continue?")&&(await w3(),await D())},className:"px-6 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition",title:"Create sample users for testing"}," Add Sample Users")))),a.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-6 mb-8"},a.createElement("h2",{className:"text-2xl font-bold mb-4"}," Filter Users"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},a.createElement("input",{type:"text",placeholder:"Search by name, email, or student ID...",value:b.search,onChange:O=>k({...b,search:O.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"}),a.createElement("select",{value:b.year,onChange:O=>k({...b,year:O.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Years"),a.createElement("option",{value:"1"},"1st Year"),a.createElement("option",{value:"2"},"2nd Year"),a.createElement("option",{value:"3"},"3rd Year"),a.createElement("option",{value:"4"},"4th Year")),a.createElement("select",{value:b.specialization,onChange:O=>k({...b,specialization:O.target.value}),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none"},a.createElement("option",{value:""},"All Specializations"),a.createElement("option",{value:"AIML"},"AI & ML"),a.createElement("option",{value:"DS"},"Data Science"),a.createElement("option",{value:"IOT"},"IoT"),a.createElement("option",{value:"Cyber Security"},"Cyber Security")),a.createElement("div",{className:"flex items-center"},a.createElement("span",{className:"text-lg font-bold text-blue-600"},I.length),a.createElement("span",{className:"text-gray-600 ml-2"},"users found")))),a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl p-8"},a.createElement("h2",{className:"text-3xl font-bold mb-6 text-gray-800"}," Registered Users (",I.length,")"),a.createElement("div",{className:"space-y-4"},I.length>0?I.map(O=>a.createElement("div",{key:O.id,className:"p-6 bg-gradient-to-r from-white to-gray-50 rounded-2xl border-2 border-gray-200 hover:border-blue-300 transition-all duration-300"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center"},a.createElement("div",{className:"md:col-span-2"},a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("img",{src:O.photoURL||"/default-avatar.png",alt:"Profile",className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200"}),a.createElement("div",null,a.createElement("h3",{className:"text-lg font-bold text-gray-800"},O.firstName&&O.lastName?`${O.firstName} ${O.lastName}`:O.displayName||"No Name"),a.createElement("p",{className:"text-sm text-gray-600"},O.email),a.createElement("p",{className:"text-sm text-gray-600"},"ID: ",O.studentId||"Not Set")))),a.createElement("div",null,a.createElement("div",{className:"space-y-1"},a.createElement("p",{className:"text-sm text-gray-600"},"Year: ",O.currentYear||"N/A"),a.createElement("p",{className:"text-sm text-gray-600"},"Sem: ",O.currentSemester||"N/A"))),a.createElement("div",null,O.specialization?a.createElement("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold ${U(O.specialization)}`},O.specialization):a.createElement("span",{className:"text-sm text-gray-500"},"Not Set")),a.createElement("div",{className:"flex space-x-2"},a.createElement("button",{onClick:()=>w(O),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition"}," View"),a.createElement("button",{onClick:()=>T(O.id,{...O,status:O.status==="active"?"inactive":"active"}),className:`px-4 py-2 rounded-lg transition ${O.status==="active"?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`},O.status==="active"?" Deactivate":" Activate"),a.createElement("button",{onClick:()=>L(O.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"}," Delete"))))):a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h3",{className:"text-xl font-bold mb-2"},"No Users Found"),a.createElement("p",{className:"text-gray-600"},"Try adjusting your filters or check back later.")))),g&&d&&a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},a.createElement("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},a.createElement("div",{className:"p-8"},a.createElement("div",{className:"flex items-center justify-between mb-6"},a.createElement("h2",{className:"text-3xl font-bold text-gray-800"}," User Details"),a.createElement("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"},"")),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},a.createElement("div",{className:"text-center"},a.createElement("img",{src:d.photoURL||"/default-avatar.png",alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-blue-200 mx-auto mb-4"}),a.createElement("h3",{className:"text-2xl font-bold text-gray-800 mb-2"},d.firstName&&d.lastName?`${d.firstName} ${d.lastName}`:d.displayName||"No Name"),a.createElement("p",{className:"text-gray-600 mb-2"},d.email),a.createElement("div",{className:"flex justify-center space-x-4"},a.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${U(d.specialization)}`},d.specialization||"No Specialization"),a.createElement("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-bold"},"Year ",d.currentYear||"N/A"))),a.createElement("div",{className:"space-y-6"},a.createElement("div",null,a.createElement("h4",{className:"text-xl font-bold mb-4 text-gray-800"}," Personal Information"),a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Student ID:"),a.createElement("span",{className:"font-semibold"},d.studentId||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Phone:"),a.createElement("span",{className:"font-semibold"},d.phoneNumber||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Gender:"),a.createElement("span",{className:"font-semibold"},d.gender||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Date of Birth:"),a.createElement("span",{className:"font-semibold"},d.dateOfBirth?new Date(d.dateOfBirth.toDate()).toLocaleDateString():"Not Set")))),a.createElement("div",null,a.createElement("h4",{className:"text-xl font-bold mb-4 text-gray-800"}," Academic Information"),a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Enrollment Year:"),a.createElement("span",{className:"font-semibold"},d.enrollmentYear||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Current Year:"),a.createElement("span",{className:"font-semibold"},d.currentYear||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Current Semester:"),a.createElement("span",{className:"font-semibold"},d.currentSemester||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Department:"),a.createElement("span",{className:"font-semibold"},d.department||"Not Set")))),d.address&&a.createElement("div",null,a.createElement("h4",{className:"text-xl font-bold mb-4 text-gray-800"}," Address Information"),a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Street:"),a.createElement("span",{className:"font-semibold"},d.address.street||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"City:"),a.createElement("span",{className:"font-semibold"},d.address.city||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"State:"),a.createElement("span",{className:"font-semibold"},d.address.state||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Pincode:"),a.createElement("span",{className:"font-semibold"},d.address.pincode||"Not Set")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Country:"),a.createElement("span",{className:"font-semibold"},d.address.country||"Not Set")))),a.createElement("div",null,a.createElement("h4",{className:"text-xl font-bold mb-4 text-gray-800"}," Account Information"),a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Status:"),a.createElement("span",{className:`font-semibold ${d.status==="active"?"text-green-600":"text-red-600"}`},d.status||"active")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Created:"),a.createElement("span",{className:"font-semibold"},d.createdAt?new Date(d.createdAt.toDate()).toLocaleDateString():"Unknown")),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-gray-600"},"Last Updated:"),a.createElement("span",{className:"font-semibold"},d.updatedAt?new Date(d.updatedAt.toDate()).toLocaleDateString():"Never")))))),a.createElement("div",{className:"flex justify-end mt-8"},a.createElement("button",{onClick:()=>p(!1),className:"px-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition"},"Close")))))),a.createElement(Rt,null)):a.createElement("div",{className:"min-h-screen flex items-center justify-center"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h1",{className:"text-2xl font-bold mb-2"},"Access Denied"),a.createElement("p",{className:"text-gray-600"},"You don't have permission to access this page.")))}function _3({user:t}){const[e,n]=a.useState(!0);return a.useEffect(()=>{const r=setTimeout(()=>{n(!1)},800);return()=>clearTimeout(r)},[]),e?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center overflow-hidden"},a.createElement("div",{className:"text-center animate-fade-in"},a.createElement("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-500 mx-auto mb-4"}),a.createElement("h2",{className:"text-2xl font-bold text-gray-100 mb-2"},"Loading Timetable..."),a.createElement("p",{className:"text-gray-300"},"Please wait while we load your academic resources"))):a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900"},a.createElement(Pt,{user:t}),a.createElement("div",{className:"container mx-auto p-6 max-w-7xl"},a.createElement("div",{className:"mb-8 p-8 bg-gradient-to-r from-blue-600 to-purple-700 text-white rounded-lg shadow-lg animate-fade-in"},a.createElement("h1",{className:"text-4xl font-bold mb-2 animate-pulse"}," Academic Timetable & Calendar"),a.createElement("p",{className:"text-xl"},"Access important dates, schedules, and academic resources")),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12"},a.createElement("div",{className:"p-8 bg-gradient-to-br from-gray-800 to-gray-700 rounded-xl shadow-xl animate-slide-up hover:shadow-2xl transition-all duration-300 border border-gray-600"},a.createElement("div",{className:"text-center mb-6"},a.createElement("div",{className:"text-6xl mb-4 animate-bounce"},""),a.createElement("h2",{className:"text-2xl font-bold text-gray-100 mb-2"},"Date Sheet MST-I"),a.createElement("p",{className:"text-gray-300"},"USET September 2025")),a.createElement("div",{className:"flex space-x-4"},a.createElement("button",{onClick:()=>window.open("/date-sheet.pdf","_blank"),className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"}," View"),a.createElement("a",{href:"/date-sheet.pdf",download:"Date Sheet MST-I USET September 2025.pdf",className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold rounded-lg hover:from-green-700 hover:to-green-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl text-center"}," Download"))),a.createElement("div",{className:"p-8 bg-gradient-to-br from-gray-800 to-gray-700 rounded-xl shadow-xl animate-slide-up hover:shadow-2xl transition-all duration-300 border border-gray-600"},a.createElement("div",{className:"text-center mb-6"},a.createElement("div",{className:"text-6xl mb-4 animate-bounce"},""),a.createElement("h2",{className:"text-2xl font-bold text-gray-100 mb-2"},"Academic Calendar"),a.createElement("p",{className:"text-gray-300"},"July-December 2025")),a.createElement("div",{className:"flex space-x-4"},a.createElement("button",{onClick:()=>window.open("/academic-calendar.pdf","_blank"),className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"}," View"),a.createElement("a",{href:"/academic-calendar.pdf",download:"Academic Calendar (July-Dec 2025).pdf",className:"flex-1 px-6 py-3 bg-gradient-to-r from-pink-600 to-pink-700 text-white font-semibold rounded-lg hover:from-pink-700 hover:to-pink-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl text-center"}," Download")))),a.createElement("div",{className:"mt-12 p-8 bg-gradient-to-r from-gray-800 to-gray-700 rounded-xl shadow-lg animate-fade-in border border-gray-600"},a.createElement("h3",{className:"text-2xl font-bold text-gray-100 mb-6 text-center"}," Additional Resources"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},a.createElement("div",{className:"p-6 bg-gray-800 rounded-lg shadow-md text-center hover:shadow-lg transition-all duration-300 transform hover:scale-105 border border-gray-600"},a.createElement("div",{className:"text-4xl mb-4 animate-pulse"},""),a.createElement("h4",{className:"font-semibold text-lg mb-2 text-gray-100"},"Class Schedule"),a.createElement("p",{className:"text-gray-300 text-sm"},"Daily timetable and room allocations")),a.createElement("div",{className:"p-6 bg-gray-800 rounded-lg shadow-md text-center hover:shadow-lg transition-all duration-300 transform hover:scale-105 border border-gray-600"},a.createElement("div",{className:"text-4xl mb-4 animate-pulse"},""),a.createElement("h4",{className:"font-semibold text-lg mb-2 text-gray-100"},"Exam Schedule"),a.createElement("p",{className:"text-gray-300 text-sm"},"Important exam dates and timings")),a.createElement("div",{className:"p-6 bg-gray-800 rounded-lg shadow-md text-center hover:shadow-lg transition-all duration-300 transform hover:scale-105 border border-gray-600"},a.createElement("div",{className:"text-4xl mb-4 animate-pulse"},""),a.createElement("h4",{className:"font-semibold text-lg mb-2 text-gray-100"},"Academic Events"),a.createElement("p",{className:"text-gray-300 text-sm"},"Workshops, seminars, and special events"))))),a.createElement(Rt,null))}const N3=[{id:1,title:'"Python for Everybody"  University of Michigan (Coursera)',description:"Very popular, from basics to more advanced topics, free auditing option",provider:"Coursera",link:"https://www.coursera.org/specializations/python"},{id:2,title:"Google's Python Class",description:"Free class by Google with lecture videos, exercises",provider:"Google for Developers",link:"https://developers.google.com/edu/python"},{id:3,title:"Codecademy  Python Courses & Tutorials",description:"Interactive learning, starts from basics, step by step",provider:"Codecademy",link:"https://www.codecademy.com/catalog/language/python"},{id:4,title:"MyGreatLearning  Python Fundamentals for Beginners (free)",description:"Beginner course, includes fundamentals, quizzes",provider:"My Great Learning",link:"https://www.mygreatlearning.com/academy/learn-for-free/courses/python-fundamentals-for-beginners"},{id:5,title:'FreeCodeCamp / YouTube "Python Full Course for Beginners"',description:"Video-based full course, good for visual learners",provider:"YouTube",link:"https://www.youtube.com/watch?v=K5KVEU3aaeQ"}];function S3({user:t}){return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900"},a.createElement(Pt,{user:t}),a.createElement("div",{className:"container mx-auto p-6"},a.createElement("div",{className:"mb-8 p-8 bg-gradient-to-r from-blue-600 to-green-700 text-white rounded-xl shadow-2xl"},a.createElement("h1",{className:"text-4xl font-bold mb-2"}," Python Full Course"),a.createElement("p",{className:"text-blue-100 text-lg"},"Master Python programming from basics to advanced concepts")),a.createElement("div",{className:"grid grid-cols-1 gap-6"},N3.map((e,n)=>a.createElement("div",{key:e.id,className:"bg-gray-800 rounded-xl shadow-lg p-6 transform hover:scale-105 transition-all duration-300 hover:shadow-2xl border border-gray-600"},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center mb-3"},a.createElement("span",{className:"text-2xl mr-3 text-gray-300"},"#",e.id),a.createElement("h3",{className:"text-xl font-bold text-gray-100"},e.title)),a.createElement("p",{className:"text-gray-300 mb-4 leading-relaxed"},e.description),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"inline-block px-3 py-1 bg-blue-800 text-blue-200 rounded-full text-sm font-medium"},e.provider),a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-blue-800 transition transform hover:scale-105 shadow-lg"},"Start Learning ")))))))),a.createElement(Rt,null))}const I3=[{id:1,title:"IBM Full Stack Cloud Developer Professional Certificate (Coursera)",description:"Covers front end, back end, cloud, DevOps",provider:"Coursera",link:"https://www.coursera.org/professional-certificates/ibm-full-stack-cloud-developer"},{id:2,title:"Full Stack Open (University of Helsinki / open course)",description:"Modern JavaScript stack (React, Node.js, GraphQL, TypeScript)",provider:"fullstackopen.com",link:"https://fullstackopen.com/en/"},{id:3,title:"Scaler Academy  Full Stack Developer Course",description:"Bootcamp style, in-depth curriculum, placement help (India)",provider:"InterviewBit",link:"#"},{id:4,title:"Codecademy  Full-Stack Engineer Career Path",description:"Structured path covering front end, back end, databases",provider:"Codecademy",link:"https://www.codecademy.com/learn/paths/full-stack-engineer-career-path"},{id:5,title:"UT Austin  Full Stack Software Development Certificate (online)",description:"University certificate course, live + project work",provider:"McCombs Great Learning",link:"https://onlineexeced.mccombs.utexas.edu/online-full-stack-software-development-course"}];function T3({user:t}){return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900"},a.createElement(Pt,{user:t}),a.createElement("div",{className:"container mx-auto p-6"},a.createElement("div",{className:"mb-8 p-8 bg-gradient-to-r from-purple-600 to-pink-700 text-white rounded-xl shadow-2xl"},a.createElement("h1",{className:"text-4xl font-bold mb-2"}," Full Stack Development"),a.createElement("p",{className:"text-purple-100 text-lg"},"Build complete web applications with modern technologies")),a.createElement("div",{className:"grid grid-cols-1 gap-6"},I3.map((e,n)=>a.createElement("div",{key:e.id,className:"bg-gray-800 rounded-xl shadow-lg p-6 transform hover:scale-105 transition-all duration-300 hover:shadow-2xl border border-gray-600"},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center mb-3"},a.createElement("span",{className:"text-2xl mr-3 text-gray-300"},"#",e.id),a.createElement("h3",{className:"text-xl font-bold text-gray-100"},e.title)),a.createElement("p",{className:"text-gray-300 mb-4 leading-relaxed"},e.description),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"inline-block px-3 py-1 bg-purple-800 text-purple-200 rounded-full text-sm font-medium"},e.provider),a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition transform hover:scale-105 shadow-lg"},"Start Learning ")))))))),a.createElement(Rt,null))}const k3=[{id:1,title:"LeetCode's Interview Crash Course  DSA",description:"Focused on interview-relevant DSA",provider:"LeetCode",link:"https://leetcode.com/explore/featured/card/leetcodes-interview-crash-course-data-structures-and-algorithms/"},{id:2,title:'"Master the Coding Interview: Data Structures + Algorithms" (Zero to Mastery)',description:"Comprehensive bootcamp style",provider:"Zero To Mastery",link:"https://zerotomastery.io/courses/learn-data-structures-and-algorithms/"},{id:3,title:"GeeksforGeeks  Data Structures & Algorithms Self-Paced Course",description:"Covers from basics to advanced, good for exam & interview prep",provider:"GeeksforGeeks",link:"https://www.geeksforgeeks.org/courses/dsa-self-paced/"},{id:4,title:'"Algorithms, Part I & II"  Princeton on Coursera',description:"University level algorithms course (often used as crash refresher)",provider:"Coursera",link:"#"},{id:5,title:'"Algorithms & Data Structures Full Crash Course"  YouTube (NeuralNine)',description:"Video crash course covering major DSA topics",provider:"YouTube",link:"https://www.youtube.com/watch?v=jQqQpPMYPXs"}];function A3({user:t}){return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900"},a.createElement(Pt,{user:t}),a.createElement("div",{className:"container mx-auto p-6"},a.createElement("div",{className:"mb-8 p-8 bg-gradient-to-r from-green-600 to-blue-700 text-white rounded-xl shadow-2xl"},a.createElement("h1",{className:"text-4xl font-bold mb-2"}," DSA Crash Course"),a.createElement("p",{className:"text-green-100 text-lg"},"Master Data Structures and Algorithms for technical interviews")),a.createElement("div",{className:"grid grid-cols-1 gap-6"},k3.map((e,n)=>a.createElement("div",{key:e.id,className:"bg-gray-800 rounded-xl shadow-lg p-6 transform hover:scale-105 transition-all duration-300 hover:shadow-2xl border border-gray-600"},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center mb-3"},a.createElement("span",{className:"text-2xl mr-3 text-gray-300"},"#",e.id),a.createElement("h3",{className:"text-xl font-bold text-gray-100"},e.title)),a.createElement("p",{className:"text-gray-300 mb-4 leading-relaxed"},e.description),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"inline-block px-3 py-1 bg-green-800 text-green-200 rounded-full text-sm font-medium"},e.provider),a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg font-semibold hover:from-green-700 hover:to-blue-700 transition transform hover:scale-105 shadow-lg"},"Start Learning ")))))))),a.createElement(Rt,null))}function C3({user:t}){const e=Qe(),n=[{id:"react-advanced",title:"React & Advanced JavaScript",description:"Master modern React development with hooks, context, and advanced JavaScript concepts",duration:"8 weeks",level:"Advanced",price:"2,999",features:["Modern React with Hooks & Context API","Advanced JavaScript (ES6+, Async/Await)","Redux & State Management","React Native for Mobile Apps","Real-world Projects","Industry Expert Mentorship"],icon:"",color:"from-blue-500 to-cyan-500"},{id:"nodejs-backend",title:"Node.js & Backend Development",description:"Build scalable backend applications with Node.js, databases, and modern APIs",duration:"10 weeks",level:"Intermediate",price:"3,499",features:["RESTful APIs & GraphQL","MongoDB & PostgreSQL Integration","Authentication & Security","Microservices Architecture","Docker & Deployment","API Testing & Documentation"],icon:"",color:"from-green-500 to-emerald-500"},{id:"machine-learning",title:"Machine Learning & AI",description:"Dive into the world of AI with Python, TensorFlow, and real-world ML applications",duration:"12 weeks",level:"Advanced",price:"4,999",features:["Python for Data Science","TensorFlow & PyTorch","Computer Vision & NLP","Deep Learning Fundamentals","Real-world ML Projects","AI Ethics & Deployment"],icon:"",color:"from-purple-500 to-pink-500"},{id:"cloud-computing",title:"Cloud Computing & DevOps",description:"Master cloud platforms, DevOps practices, and scalable infrastructure",duration:"14 weeks",level:"Advanced",price:"5,499",features:["AWS, Azure & GCP Fundamentals","Serverless Architecture","Docker & Kubernetes","CI/CD Pipelines","Infrastructure as Code","Cloud Security & Monitoring"],icon:"",color:"from-orange-500 to-red-500"},{id:"data-science",title:"Advanced Data Science",description:"Master data analysis, visualization, and predictive modeling techniques",duration:"10 weeks",level:"Intermediate",price:"3,999",features:["Advanced Statistical Analysis","Data Visualization with Python","Predictive Modeling","Big Data Processing","Time Series Analysis","Business Intelligence"],icon:"",color:"from-indigo-500 to-blue-500"},{id:"cyber-security",title:"Cyber Security Fundamentals",description:"Learn ethical hacking, network security, and cybersecurity best practices",duration:"12 weeks",level:"Intermediate",price:"4,499",features:["Ethical Hacking Techniques","Network Security","Web Application Security","Cryptography & Encryption","Security Auditing","Incident Response"],icon:"",color:"from-gray-600 to-gray-800"}];return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden"},a.createElement("div",{className:"absolute inset-0"},a.createElement("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),a.createElement("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000"}),a.createElement("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500"})),a.createElement(Pt,{user:t}),a.createElement("div",{className:"container mx-auto p-6 relative z-10"},a.createElement("main",null,a.createElement("section",{className:"mb-12"},a.createElement("div",{className:"text-center mb-8 p-8 bg-white/10 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/20"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-white"},"Premium Course Library"),a.createElement("p",{className:"text-xl text-white/90 font-medium"},"Unlock advanced courses designed by industry experts"),a.createElement("div",{className:"mt-6 p-4 bg-yellow-500/20 rounded-lg border border-yellow-400/30"},a.createElement("p",{className:"text-yellow-200 font-semibold"}," Exclusive Access for Premium Members Only")))),a.createElement("section",{className:"mb-12"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},n.map(r=>a.createElement("div",{key:r.id,className:"bg-white/10 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/20 overflow-hidden hover:transform hover:scale-105 transition-all duration-300"},a.createElement("div",{className:`bg-gradient-to-r ${r.color} p-6 text-white`},a.createElement("div",{className:"text-4xl mb-3"},r.icon),a.createElement("h3",{className:"text-xl font-bold mb-2"},r.title),a.createElement("div",{className:"flex items-center gap-4 text-sm opacity-90"},a.createElement("span",null," ",r.duration),a.createElement("span",null," ",r.level))),a.createElement("div",{className:"p-6"},a.createElement("p",{className:"text-white/80 text-sm mb-4 leading-relaxed"},r.description),a.createElement("div",{className:"mb-6"},a.createElement("h4",{className:"text-white font-semibold mb-3"},"What you'll learn:"),a.createElement("ul",{className:"space-y-2"},r.features.slice(0,4).map((s,i)=>a.createElement("li",{key:i,className:"flex items-center gap-2 text-white/70 text-sm"},a.createElement("span",{className:"text-green-400"},""),s)))),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("div",{className:"text-2xl font-bold text-white"},r.price),a.createElement("div",{className:"text-white/60 text-sm"},"One-time payment")),a.createElement("button",{onClick:()=>alert(` Course "${r.title}" enrolled successfully! Access materials in your dashboard.`),className:"px-6 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-semibold hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"},"Enroll Now "))))))),a.createElement("section",{className:"mb-12"},a.createElement("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 backdrop-blur-2xl rounded-3xl p-8 border border-yellow-400/30 text-center"},a.createElement("h2",{className:"text-3xl font-bold text-white mb-4"},"Ready to Start Learning?"),a.createElement("p",{className:"text-white/90 text-lg mb-6"},"Join thousands of successful students who have transformed their careers with our premium courses"),a.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center"},a.createElement("button",{onClick:()=>e("/profile"),className:"px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-xl font-bold hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 shadow-lg hover:shadow-xl"}," Access My Courses"),a.createElement("button",{onClick:()=>alert(" Contact support for course recommendations: info.studentportalofficial@gmail.com"),className:"px-8 py-4 bg-white/20 text-white rounded-xl font-bold hover:bg-white/30 transition-all duration-200 border border-white/30"}," Get Help")))),a.createElement("section",{className:"mb-12"},a.createElement("div",{className:"text-center mb-8"},a.createElement("h2",{className:"text-3xl font-bold text-white mb-4"},"Success Stories"),a.createElement("p",{className:"text-white/70"},"See how our premium courses have transformed careers")),a.createElement("div",{className:"grid md:grid-cols-3 gap-6"},a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-2xl p-6 border border-white/20"},a.createElement("div",{className:"text-4xl mb-4"},""),a.createElement("h3",{className:"text-white font-bold mb-2"},"From Student to SDE"),a.createElement("p",{className:"text-white/70 text-sm mb-4"},'"The Full Stack course helped me land a job at a top tech company with a 40% salary increase!"'),a.createElement("div",{className:"text-yellow-400 text-sm font-semibold"},"- Rahul M., Software Engineer")),a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-2xl p-6 border border-white/20"},a.createElement("div",{className:"text-4xl mb-4"},""),a.createElement("h3",{className:"text-white font-bold mb-2"},"AI Career Breakthrough"),a.createElement("p",{className:"text-white/70 text-sm mb-4"},`"The ML course gave me the skills to work on cutting-edge AI projects. Now I'm leading AI initiatives!"`),a.createElement("div",{className:"text-yellow-400 text-sm font-semibold"},"- Priya S., AI Engineer")),a.createElement("div",{className:"bg-white/10 backdrop-blur-2xl rounded-2xl p-6 border border-white/20"},a.createElement("div",{className:"text-4xl mb-4"},""),a.createElement("h3",{className:"text-white font-bold mb-2"},"Cloud Architecture Expert"),a.createElement("p",{className:"text-white/70 text-sm mb-4"},'"Cloud Computing course prepared me perfectly for AWS certifications and cloud architect roles."'),a.createElement("div",{className:"text-yellow-400 text-sm font-semibold"},"- Amit K., Cloud Architect")))))),a.createElement(Rt,null))}function P3({user:t}){const e=Qe(),[n,r]=a.useState(!1),s=[{id:1,title:"Placement Preparation Kit",description:"Complete interview preparation with company-specific questions, coding challenges, and mock tests",icon:"",color:"from-blue-500 to-cyan-500",benefits:["500+ Company-specific interview questions","Live coding challenges with solutions","Mock technical interviews","Resume optimization templates","Behavioral interview guides"]},{id:2,title:"Internships and Job Openings",description:"Exclusive access to verified internships and job opportunities from top companies",icon:"",color:"from-green-500 to-emerald-500",benefits:["200+ Active internships monthly","Direct applications to top companies","Salary insights and negotiation tips","Internship completion certificates","Referral network access"]},{id:3,title:"ATS Resume Building",description:"AI-powered resume builder that beats Applicant Tracking Systems with 95% success rate",icon:"",color:"from-purple-500 to-pink-500",benefits:["ATS-optimized resume templates","AI content suggestions","Keyword optimization for your field","Multiple export formats (PDF, Word)","Resume scoring and improvement tips"]},{id:4,title:"Project Ideas (Industry Level)",description:"Real-world project ideas with complete implementation guides and mentorship support",icon:"",color:"from-orange-500 to-red-500",benefits:["50+ Industry-relevant project ideas","Complete implementation roadmaps","Technology stack recommendations","GitHub repository templates","Project presentation guides"]},{id:5,title:"Alumni Support",description:"Connect with successful alumni for guidance, mentorship, and career advice",icon:"",color:"from-indigo-500 to-blue-500",benefits:["1-on-1 mentorship sessions","Alumni networking events","Career transition guidance","Industry insights and trends","Success story sessions"]},{id:6,title:"Mock Interviews",description:"Professional mock interviews with detailed feedback and improvement strategies",icon:"",color:"from-teal-500 to-cyan-500",benefits:["Technical interview simulations","HR round practice sessions","Detailed feedback reports","Improvement action plans","Confidence building exercises"]},{id:7,title:"Certification Courses",description:"Industry-recognized certifications to boost your resume and career prospects",icon:"",color:"from-yellow-500 to-orange-500",benefits:["AWS, Azure, GCP certifications","Programming language certifications","Data Science & AI certifications","Project Management certifications","Blockchain & Web3 certifications"]},{id:8,title:"Freelancing Work",description:"Earn while learning with real freelancing projects and skill-building opportunities",icon:"",color:"from-pink-500 to-rose-500",benefits:["Curated freelancing projects","Skill-based earning opportunities","Project management training","Client communication skills","Portfolio building through work"]},{id:9,title:"Emerging Tech Trends",description:"Stay ahead with insights on AI, Blockchain, Web3, Metaverse, and future technologies",icon:"",color:"from-violet-500 to-purple-500",benefits:["Weekly tech trend reports","Emerging technology workshops","Future career path guidance","Investment and startup insights","Global tech conference access"]},{id:10,title:"Basic Courses for Students",description:"Essential skills every student needs: Git, GitHub, English Communication, and more",icon:"",color:"from-emerald-500 to-teal-500",benefits:["Complete Git & GitHub mastery","Professional English communication","Time management & productivity","Basic design principles","Presentation skills training"]},{id:11,title:"Top Performers Winner",description:"Exclusive rewards and recognition for outstanding academic and extracurricular achievements",icon:"",color:"from-amber-500 to-yellow-500",benefits:["Monthly top performer awards","Exclusive scholarship opportunities","Leadership development programs","International conference invitations","Industry networking events"]}];return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden"},a.createElement("div",{className:"absolute inset-0"},a.createElement("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),a.createElement("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000"}),a.createElement("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500"})),a.createElement(Pt,{user:t}),a.createElement("div",{className:"container mx-auto p-6 relative z-10"},a.createElement("main",null,a.createElement("section",{className:"mb-12"},a.createElement("div",{className:"text-center mb-8 p-8 bg-white/10 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/20"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-white"},"LTSU Premium Benefits"),a.createElement("p",{className:"text-xl text-white/90 font-medium"},"Unlock your full potential with exclusive premium features"),a.createElement("div",{className:"mt-6 p-4 bg-yellow-500/20 rounded-lg border border-yellow-400/30"},a.createElement("p",{className:"text-yellow-200 font-semibold"}," Transform your academic journey into a successful career")))),a.createElement("section",{className:"mb-12"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},s.map(i=>a.createElement("div",{key:i.id,className:"bg-white/10 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/20 overflow-hidden hover:transform hover:scale-105 transition-all duration-300"},a.createElement("div",{className:`bg-gradient-to-r ${i.color} p-6 text-white`},a.createElement("div",{className:"text-4xl mb-3"},i.icon),a.createElement("h3",{className:"text-xl font-bold mb-2"},i.title),a.createElement("p",{className:"text-white/90 text-sm leading-relaxed"},i.description)),a.createElement("div",{className:"p-6"},a.createElement("h4",{className:"text-white font-semibold mb-4"},"What you'll get:"),a.createElement("ul",{className:"space-y-3"},i.benefits.map((o,c)=>a.createElement("li",{key:c,className:"flex items-start gap-3 text-white/80 text-sm"},a.createElement("span",{className:"text-green-400 mt-1"},""),a.createElement("span",null,o))))))))),a.createElement("section",{className:"mb-12"},a.createElement("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 backdrop-blur-2xl rounded-3xl p-8 border border-yellow-400/30 text-center"},a.createElement("h2",{className:"text-3xl font-bold text-white mb-4"},"Choose Your Plan"),a.createElement("p",{className:"text-white/90 text-lg mb-8"},"Start your premium journey today and unlock unlimited potential"),a.createElement("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto"},a.createElement("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20"},a.createElement("h3",{className:"text-2xl font-bold text-white mb-2"},"Semester Plan"),a.createElement("div",{className:"text-4xl font-bold text-yellow-400 mb-4"},"199",a.createElement("span",{className:"text-lg text-white/70"},"/6 months")),a.createElement("ul",{className:"text-left space-y-2 mb-6"},a.createElement("li",{className:"flex items-center gap-2 text-white/80"},a.createElement("span",{className:"text-green-400"},""),"All premium features"),a.createElement("li",{className:"flex items-center gap-2 text-white/80"},a.createElement("span",{className:"text-green-400"},""),"6 months access"),a.createElement("li",{className:"flex items-center gap-2 text-white/80"},a.createElement("span",{className:"text-green-400"},""),"Student-friendly pricing")),a.createElement("button",{onClick:()=>e("/payment?plan=semester"),className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200"},"Choose Semester")),a.createElement("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 backdrop-blur-sm rounded-2xl p-6 border border-yellow-400/30 relative"},a.createElement("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2"},a.createElement("span",{className:"bg-yellow-500 text-black px-3 py-1 rounded-full text-sm font-bold"},"SAVE 50%")),a.createElement("h3",{className:"text-2xl font-bold text-white mb-2"},"Annual Plan"),a.createElement("div",{className:"text-4xl font-bold text-yellow-400 mb-4"},"399",a.createElement("span",{className:"text-lg text-white/70"},"/year")),a.createElement("ul",{className:"text-left space-y-2 mb-6"},a.createElement("li",{className:"flex items-center gap-2 text-white/80"},a.createElement("span",{className:"text-green-400"},""),"All Semester features"),a.createElement("li",{className:"flex items-center gap-2 text-white/80"},a.createElement("span",{className:"text-green-400"},""),"Best value for students"),a.createElement("li",{className:"flex items-center gap-2 text-white/80"},a.createElement("span",{className:"text-green-400"},""),"Complete year access")),a.createElement("button",{onClick:()=>e("/payment?plan=annual"),className:"w-full px-6 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-semibold hover:from-yellow-600 hover:to-orange-600 transition-all duration-200"},"Choose Annual "))))),a.createElement("section",{className:"mb-12"},a.createElement("div",{className:"text-center mb-8"},a.createElement("h2",{className:"text-3xl font-bold text-white mb-4"},"Success Stories"),a.createElement("p",{className:"text-white/70"},"See how Premium members transformed their careers")),a.createElement("div",{className:"grid md:grid-cols-3 gap-6"})),a.createElement("section",{className:"mb-12"},a.createElement("div",{className:"bg-gradient-to-r from-blue-500/20 to-purple-500/20 backdrop-blur-2xl rounded-3xl p-8 border border-blue-400/30 text-center"},a.createElement("h2",{className:"text-3xl font-bold text-white mb-4"},"Ready to Transform Your Future?"),a.createElement("p",{className:"text-white/90 text-lg mb-6"},"Join thousands of successful students who chose LTSU Premium"),a.createElement("div",{className:"flex justify-center"},a.createElement("button",{onClick:()=>e("/payment?plan=semester"),className:"px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-xl font-bold hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 shadow-lg hover:shadow-xl"}," Upgrade to Premium Now")))))),a.createElement(Rt,null),n&&a.createElement(I_,{user:t,onClose:()=>r(!1)}))}const R3=({user:t})=>{const e=Qe(),[n]=Eb(),r=n.get("plan")||"semester",[s,i]=V.useState({name:"",phone:"",email:"",password:"",transactionId:"",countryCode:"+91"}),[o,c]=V.useState(null),[u,d]=V.useState(!1),[h,g]=V.useState(!1),[p,b]=V.useState(1),[k,A]=V.useState({}),[D,I]=V.useState(null),w={semester:{name:"Semester Plan",price:199,period:"6 months",features:["All premium features","6 months access","Student-friendly pricing","Email support"]},annual:{name:"Annual Plan",price:399,period:"1 year",features:["All Semester features","Complete year access","Best value for students","Priority support"]}},T=[{name:"PhonePe",icon:"",color:"from-purple-500 to-indigo-600",package:"com.phonepe.app"},{name:"GPay",icon:"",color:"from-green-500 to-teal-600",package:"com.google.android.apps.nfc.payments"}],L=w[r];V.useEffect(()=>{t&&t.email&&i(H=>({...H,email:t.email}))},[t]);const U=H=>{const{name:ve,value:C}=H.target;if(ve==="phone"){const P=C.replace(/\D/g,"").slice(0,10);i({...s,[ve]:P});return}i({...s,[ve]:C})},O=()=>{const H={};return s.name.trim()||(H.name="Name is required"),s.phone?s.phone.length!==10&&(H.phone="Phone number must be exactly 10 digits"):H.phone="Phone number is required",s.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(H.email="Please enter a valid email address"):H.email="Email is required",s.password?s.password.length<6&&(H.password="Password must be at least 6 characters"):H.password="Password is required",t&&s.email!==t.email&&(H.email="Email must match your account email"),A(H),Object.keys(H).length===0},_=H=>{H.preventDefault(),O()&&b(2)},y=H=>{c(H),b(3)},E=H=>{const ve=`upi://pay?pa=kalyan9391@ybl&pn=LTSU Premium&am=${H}&cu=INR&tn=LTSU Premium Subscription`;window.location.href=ve,window.open("","upipayment","width=400,height=300").document.write(`
      <html>
        <head><title>UPI Payment</title></head>
        <body style="font-family: Arial; padding: 20px; background: #1a1a1a; color: white;">
          <h2>UPI Payment Instructions</h2>
          <p><strong>UPI ID:</strong> kalyan9391@ybl</p>
          <p><strong>Amount:</strong> ${H}</p>
          <p><strong>App:</strong> ${o==null?void 0:o.name}</p>
          <button onclick="window.close()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Close</button>
        </body>
      </html>
    `)},N=async()=>{if(!s.transactionId){alert("Please enter the transaction ID");return}d(!0);try{if(await new Promise(C=>setTimeout(C,3e3)),!(s.transactionId.toUpperCase().includes("TXN")||s.transactionId.length>=8))throw new Error("Transaction not found");const ve=Te(X,"users",t.uid);await Gt(ve,{isPremium:!0,premiumPlan:r,premiumStartDate:new Date,premiumExpiryDate:r==="semester"?new Date(Date.now()+6*30*24*60*60*1e3):new Date(Date.now()+365*24*60*60*1e3),paymentMethod:"UPI",upiApp:o==null?void 0:o.name,transactionId:s.transactionId,paymentDate:new Date,lmsAccess:!0}),d(!1),g(!0),setTimeout(()=>{localStorage.setItem("ltsu_payment_success",JSON.stringify({plan:L.name,amount:L.price,transactionId:s.transactionId,timestamp:new Date().toISOString(),userName:s.name})),e("/lms-portal")},2e3)}catch(H){console.error("Payment verification failed:",H),d(!1),alert("Payment verification failed. Please check your transaction ID and try again.")}},v=()=>{e(`/payment?plan=${r==="semester"?"annual":"semester"}`),b(1)},R=()=>a.createElement("div",{className:"max-w-2xl mx-auto"},a.createElement("div",{className:"bg-gray-800/50 backdrop-blur-2xl rounded-3xl p-8 border border-gray-600"},a.createElement("div",{className:"text-center mb-8"},a.createElement("h2",{className:"text-3xl font-bold text-white mb-2"},"Complete Your Information"),a.createElement("p",{className:"text-gray-300"},"Step 1 of 3 - Basic Details")),a.createElement("form",{onSubmit:_,className:"space-y-6"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"Full Name *"),a.createElement("input",{type:"text",name:"name",value:s.name,onChange:U,className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name",required:!0}),k.name&&a.createElement("p",{className:"text-red-400 text-sm mt-1"},k.name)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"Phone Number *"),a.createElement("div",{className:"flex"},a.createElement("select",{name:"countryCode",value:s.countryCode,onChange:U,className:"px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-l-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},a.createElement("option",{value:"+91"},"+91 (India)")),a.createElement("input",{type:"tel",name:"phone",value:s.phone,onChange:U,className:"flex-1 px-4 py-3 bg-gray-700/50 border border-l-0 border-gray-600 rounded-r-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter 10-digit mobile number",maxLength:"10",required:!0})),k.phone&&a.createElement("p",{className:"text-red-400 text-sm mt-1"},k.phone)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"Email Address *"),a.createElement("input",{type:"email",name:"email",value:s.email,onChange:U,className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email address",required:!0}),k.email&&a.createElement("p",{className:"text-red-400 text-sm mt-1"},k.email),a.createElement("p",{className:"text-gray-400 text-xs mt-1"},"Must match your account email address")),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"Password *"),a.createElement("input",{type:"password",name:"password",value:s.password,onChange:U,className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your account password",required:!0}),k.password&&a.createElement("p",{className:"text-red-400 text-sm mt-1"},k.password),a.createElement("p",{className:"text-gray-400 text-xs mt-1"},"Must match your account password")),a.createElement("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200"},"Continue to Payment")))),S=()=>a.createElement("div",{className:"max-w-2xl mx-auto"},a.createElement("div",{className:"bg-gray-800/50 backdrop-blur-2xl rounded-3xl p-8 border border-gray-600"},a.createElement("div",{className:"text-center mb-8"},a.createElement("h2",{className:"text-3xl font-bold text-white mb-2"},"Select Payment Method"),a.createElement("p",{className:"text-gray-300"},"Step 2 of 3 - Choose UPI App")),a.createElement("div",{className:"bg-gray-700/50 rounded-2xl p-6 mb-8"},a.createElement("h3",{className:"text-xl font-bold text-white mb-2"},"Selected Plan"),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-gray-300"},L.name),a.createElement("p",{className:"text-2xl font-bold text-yellow-400"},"",L.price," ",a.createElement("span",{className:"text-sm text-gray-400"},"/ ",L.period))),a.createElement("button",{onClick:v,className:"text-blue-400 hover:text-blue-300 text-sm font-medium px-4 py-2 border border-blue-400 rounded-lg hover:bg-blue-400/20 transition-colors"},"Change Plan"))),a.createElement("div",{className:"grid grid-cols-2 gap-6"},T.map(H=>a.createElement("button",{key:H.name,onClick:()=>y(H),className:`p-8 rounded-2xl border-2 transition-all transform hover:scale-105 ${(o==null?void 0:o.name)===H.name?"border-blue-500 bg-blue-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"}`},a.createElement("div",{className:`w-20 h-20 mx-auto mb-4 rounded-2xl bg-gradient-to-r ${H.color} flex items-center justify-center text-3xl text-white shadow-lg`},H.icon),a.createElement("h3",{className:"text-white font-semibold text-center text-lg"},H.name)))),a.createElement("div",{className:"mt-8 p-4 bg-blue-500/20 border border-blue-500/30 rounded-lg"},a.createElement("p",{className:"text-blue-200 text-sm text-center"}," You will be directed to your selected UPI app to complete the payment")))),ae=()=>a.createElement("div",{className:"max-w-2xl mx-auto"},a.createElement("div",{className:"bg-gray-800/50 backdrop-blur-2xl rounded-3xl p-8 border border-gray-600"},a.createElement("div",{className:"text-center mb-8"},a.createElement("h2",{className:"text-3xl font-bold text-white mb-2"},"Complete Payment"),a.createElement("p",{className:"text-gray-300"},"Step 3 of 3 - Enter Transaction Details")),a.createElement("div",{className:"bg-gray-700/50 rounded-2xl p-6 mb-8"},a.createElement("h3",{className:"text-xl font-bold text-white mb-4"},"Payment Instructions"),a.createElement("div",{className:"space-y-3 text-gray-300"},a.createElement("p",null,"1. Click the payment button below to open ",o==null?void 0:o.name),a.createElement("p",null,"2. Send ",L.price," to UPI ID: ",a.createElement("span",{className:"text-yellow-400 font-mono"},"kalyan9391@ybl")),a.createElement("p",null,"3. Copy the transaction ID from the payment confirmation"),a.createElement("p",null,"4. Enter the transaction ID below for verification"))),a.createElement("div",{className:"bg-gradient-to-r from-green-500/20 to-teal-500/20 border border-green-500/30 rounded-2xl p-6 mb-8"},a.createElement("div",{className:"flex items-center justify-center mb-4"},a.createElement("div",{className:`w-24 h-24 rounded-2xl bg-gradient-to-r ${o==null?void 0:o.color} flex items-center justify-center text-4xl text-white shadow-lg`},o==null?void 0:o.icon)),a.createElement("h3",{className:"text-2xl font-bold text-white text-center mb-2"},"Pay ",L.price),a.createElement("p",{className:"text-center text-gray-300 mb-2"},"via ",o==null?void 0:o.name),a.createElement("p",{className:"text-center text-yellow-400 font-mono text-lg"},"kalyan9391@ybl"),a.createElement("button",{onClick:()=>E(L.price),className:`w-full mt-6 px-6 py-4 bg-gradient-to-r ${o==null?void 0:o.color} text-white rounded-xl font-bold text-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105`},"Open ",o==null?void 0:o.name," to Pay ",L.price)),a.createElement("div",{className:"space-y-6"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"Transaction ID *"),a.createElement("input",{type:"text",name:"transactionId",value:s.transactionId,onChange:U,className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter transaction ID (e.g., TXN123456789)",required:!0}),a.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Check your ",o==null?void 0:o.name," transaction history for the ID")),a.createElement("div",{className:"flex gap-4"},a.createElement("button",{onClick:()=>b(2),className:"flex-1 px-6 py-3 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition-colors"},"Back"),a.createElement("button",{onClick:N,disabled:u||h,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg font-semibold hover:from-green-700 hover:to-teal-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},u?"Verifying...":h?"Processing...":"Verify & Submit"))))),ee=()=>a.createElement("div",{className:"max-w-2xl mx-auto"},a.createElement("div",{className:"bg-gray-800/50 backdrop-blur-2xl rounded-3xl p-8 border border-gray-600 text-center"},a.createElement("div",{className:"text-6xl mb-6"},""),a.createElement("h2",{className:"text-3xl font-bold text-white mb-4"},"Payment Successful!"),a.createElement("p",{className:"text-gray-300 mb-6"},"Welcome to LTSU Premium! Redirecting to your LMS portal..."),a.createElement("div",{className:"bg-gray-700/50 rounded-2xl p-6 mb-6"},a.createElement("h3",{className:"text-xl font-bold text-white mb-2"},"Payment Summary"),a.createElement("div",{className:"text-left space-y-2 text-gray-300"},a.createElement("p",null,"Plan: ",L.name),a.createElement("p",null,"Amount: ",L.price),a.createElement("p",null,"UPI App: ",o==null?void 0:o.name),a.createElement("p",null,"Transaction ID: ",s.transactionId))),a.createElement("div",{className:"animate-pulse text-yellow-400"},"Redirecting to your LMS portal...")));return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden"},a.createElement("div",{className:"absolute inset-0"},a.createElement("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),a.createElement("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000"}),a.createElement("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500"})),a.createElement("div",{className:"container mx-auto p-6 relative z-10"},a.createElement("div",{className:"text-center mb-8"},a.createElement("button",{onClick:()=>e("/premium-benefits"),className:"absolute top-6 left-6 text-gray-400 hover:text-white transition-colors"}," Back to Premium"),a.createElement("h1",{className:"text-4xl font-bold text-white mb-2"},"Secure Payment"),a.createElement("p",{className:"text-gray-300"},"Complete your premium upgrade")),a.createElement("div",{className:"flex items-center justify-center mb-12"},[1,2,3].map(H=>a.createElement(a.Fragment,{key:H},a.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold ${p>=H?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"}`},H),H<3&&a.createElement("div",{className:`w-16 h-1 mx-2 ${p>H?"bg-blue-600":"bg-gray-600"}`})))),p===1&&R(),p===2&&S(),p===3&&ae(),p===4&&ee()))},D3=({user:t})=>{const e=Qe(),[n,r]=V.useState(null),[s,i]=V.useState("dashboard"),[o,c]=V.useState("");V.useEffect(()=>{const S=localStorage.getItem("ltsu_payment_success");if(!S){e("/premium-benefits");return}try{const ee=JSON.parse(S);ee&&ee.userName&&c(ee.userName)}catch(ee){console.log("Error parsing payment data:",ee)}const ae=sf(zt,ee=>{if(!ee){e("/login");return}r(ee)});return()=>ae()},[e]);const u=async()=>{try{await af(zt),localStorage.removeItem("ltsu_payment_success"),e("/login")}catch(S){console.error("Logout error:",S)}};if(!n)return a.createElement("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center"},a.createElement("div",{className:"text-white text-xl"},"Loading..."));const d=[{id:"dashboard",label:"Dashboard",icon:""},{id:"placement",label:"Placement Preparation Kit",icon:""},{id:"internships",label:"Internships and Job Openings",icon:""},{id:"resume",label:"ATS Resume Building",icon:""},{id:"projects",label:"Project Ideas (Industry Level)",icon:""},{id:"hackathons",label:"Hackathons Live",icon:""},{id:"interviews",label:"Mock Interviews Prep",icon:""},{id:"certifications",label:"Certification Courses",icon:""},{id:"freelancing",label:"Freelancing Work",icon:""},{id:"tech-trends",label:"Emerging Tech Trends",icon:""},{id:"basic-courses",label:"Basic Courses for Students",icon:""},{id:"top-performers",label:"Top Performers Winner",icon:""},{id:"alumni",label:"Alumni Support",icon:""},{id:"progress",label:"Progress Live",icon:""},{id:"support",label:"Support",icon:""}],h=[{id:1,title:"Advanced Python Programming",instructor:"Dr. Sarah Johnson",progress:75,nextClass:"Today, 3:00 PM",duration:"6 months",students:1247},{id:2,title:"Full Stack Web Development",instructor:"Mark Thompson",progress:45,nextClass:"Tomorrow, 10:00 AM",duration:"8 months",students:892},{id:3,title:"Data Science & Machine Learning",instructor:"Dr. Emily Chen",progress:20,nextClass:"Friday, 2:00 PM",duration:"10 months",students:1563}],g=()=>a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"bg-gradient-to-r from-blue-600 to-purple-700 rounded-2xl p-6 text-white"},a.createElement("h1",{className:"text-3xl font-bold mb-2"},"Welcome back, ",o||n.displayName||"Student","! "),a.createElement("p",{className:"text-blue-100"},"Continue your learning journey with LTSU Premium")),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6"},a.createElement("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-gray-400 text-sm"},"Active Courses"),a.createElement("p",{className:"text-2xl font-bold text-white"},h.length)),a.createElement("div",{className:"text-3xl"},""))),a.createElement("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-gray-400 text-sm"},"Completion"),a.createElement("p",{className:"text-2xl font-bold text-white"},"47%")),a.createElement("div",{className:"text-3xl"},""))),a.createElement("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-gray-400 text-sm"},"Hours Learned"),a.createElement("p",{className:"text-2xl font-bold text-white"},"127")),a.createElement("div",{className:"text-3xl"},""))),a.createElement("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-gray-400 text-sm"},"Certifications"),a.createElement("p",{className:"text-2xl font-bold text-white"},"2")),a.createElement("div",{className:"text-3xl"},"")))),a.createElement("div",null,a.createElement("h2",{className:"text-2xl font-bold text-white mb-4"},"My Courses"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},h.map(S=>a.createElement("div",{key:S.id,className:"bg-gray-800 rounded-xl p-6 border border-gray-700 hover:border-blue-500 transition-colors"},a.createElement("h3",{className:"text-lg font-semibold text-white mb-2"},S.title),a.createElement("p",{className:"text-gray-400 text-sm mb-3"},"by ",S.instructor),a.createElement("div",{className:"mb-4"},a.createElement("div",{className:"flex justify-between text-sm text-gray-400 mb-1"},a.createElement("span",null,"Progress"),a.createElement("span",null,S.progress,"%")),a.createElement("div",{className:"w-full bg-gray-700 rounded-full h-2"},a.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${S.progress}%`}}))),a.createElement("div",{className:"space-y-2 text-sm text-gray-300"},a.createElement("p",null," Next: ",S.nextClass),a.createElement("p",null," Duration: ",S.duration),a.createElement("p",null," Students: ",S.students.toLocaleString())),a.createElement("button",{className:"w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Continue Learning")))))),p=(S,ae,ee)=>a.createElement("div",null,a.createElement("h2",{className:"text-2xl font-bold text-white mb-6"},ae),a.createElement("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700"},a.createElement("p",{className:"text-gray-300"},ee))),b=()=>p("placement","Placement Preparation Kit","Comprehensive placement preparation resources including aptitude tests, coding challenges, and interview preparation materials."),k=()=>p("internships","Internships and Job Openings","Curated internship opportunities and job openings from top companies worldwide."),A=()=>p("resume","ATS Resume Building","Build ATS-optimized resumes that get you noticed by employers and pass automated screening."),D=()=>p("projects","Project Ideas (Industry Level)","Industry-level project ideas with complete implementation guides and source code."),I=()=>p("hackathons","Hackathons Live","Active hackathons, coding competitions, and challenges to showcase your skills."),w=()=>p("interviews","Mock Interviews Prep","Practice mock interviews with AI-powered feedback and real-time evaluation."),T=()=>p("certifications","Certification Courses","Industry-recognized certification courses from leading technology companies."),L=()=>p("freelancing","Freelancing Work","Find freelance opportunities and learn how to build a successful freelancing career."),U=()=>p("tech-trends","Emerging Tech Trends","Stay updated with the latest technology trends and future career opportunities."),O=()=>p("basic-courses","Basic Courses for Students","Foundational courses designed specifically for students to build strong fundamentals."),_=()=>p("top-performers","Top Performers Winner","Celebrating our top-performing students and their achievements."),y=()=>p("alumni","Alumni Support","Connect with successful alumni and get career guidance from industry experts."),E=()=>p("progress","Progress Live","Real-time progress tracking and analytics to monitor your learning journey."),N=()=>a.createElement("div",null,a.createElement("h2",{className:"text-2xl font-bold text-white mb-6"},"All Courses"),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},h.map(S=>a.createElement("div",{key:S.id,className:"bg-gray-800 rounded-xl p-6 border border-gray-700"},a.createElement("div",{className:"flex items-start justify-between mb-4"},a.createElement("div",null,a.createElement("h3",{className:"text-xl font-semibold text-white"},S.title),a.createElement("p",{className:"text-gray-400"},"by ",S.instructor)),a.createElement("div",{className:"text-3xl"},"")),a.createElement("div",{className:"mb-4"},a.createElement("div",{className:"flex justify-between text-sm text-gray-400 mb-1"},a.createElement("span",null,"Overall Progress"),a.createElement("span",null,S.progress,"%")),a.createElement("div",{className:"w-full bg-gray-700 rounded-full h-3"},a.createElement("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${S.progress}%`}}))),a.createElement("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-300 mb-4"},a.createElement("div",null,a.createElement("p",{className:"text-gray-400"},"Next Class"),a.createElement("p",null,S.nextClass)),a.createElement("div",null,a.createElement("p",{className:"text-gray-400"},"Duration"),a.createElement("p",null,S.duration))),a.createElement("div",{className:"flex gap-2"},a.createElement("button",{className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"View Course"),a.createElement("button",{className:"px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:border-gray-500 transition-colors"},"")))))),v=()=>a.createElement("div",null,a.createElement("h2",{className:"text-2xl font-bold text-white mb-6"},"Support & Help"),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},a.createElement("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700"},a.createElement("h3",{className:"text-lg font-semibold text-white mb-4"},"Contact Support"),a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:"text-2xl"},""),a.createElement("div",null,a.createElement("p",{className:"text-white"},"Email Support"),a.createElement("p",{className:"text-gray-400 text-sm"},"support@ltsu.edu"))),a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:"text-2xl"},""),a.createElement("div",null,a.createElement("p",{className:"text-white"},"Live Chat"),a.createElement("p",{className:"text-gray-400 text-sm"},"Available 9 AM - 6 PM"))),a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:"text-2xl"},""),a.createElement("div",null,a.createElement("p",{className:"text-white"},"Phone Support"),a.createElement("p",{className:"text-gray-400 text-sm"},"+91 98765 43210"))))),a.createElement("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700"},a.createElement("h3",{className:"text-lg font-semibold text-white mb-4"},"FAQ"),a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"border-b border-gray-700 pb-2"},a.createElement("button",{className:"text-gray-300 hover:text-white font-medium w-full text-left"},"How do I access my courses?"),a.createElement("p",{className:"mt-2 text-sm text-gray-400"},'Your courses are available in the "My Courses" section.')),a.createElement("div",{className:"border-b border-gray-700 pb-2"},a.createElement("button",{className:"text-gray-300 hover:text-white font-medium w-full text-left"},"Can I download course materials?"),a.createElement("p",{className:"mt-2 text-sm text-gray-400"},"Yes, most course materials can be downloaded for offline access.")),a.createElement("div",null,a.createElement("button",{className:"text-gray-300 hover:text-white font-medium w-full text-left"},"How do I track my progress?"),a.createElement("p",{className:"mt-2 text-sm text-gray-400"},"Progress is automatically tracked and visible in the Progress section.")))))),R=()=>{switch(s){case"dashboard":return g();case"courses":return N();case"placement":return b();case"internships":return k();case"resume":return A();case"projects":return D();case"hackathons":return I();case"interviews":return w();case"certifications":return T();case"freelancing":return L();case"tech-trends":return U();case"basic-courses":return O();case"top-performers":return _();case"alumni":return y();case"progress":return E();case"support":return v();default:return g()}};return a.createElement("div",{className:"min-h-screen bg-gray-900"},a.createElement("header",{className:"bg-gray-800 border-b border-gray-700"},a.createElement("div",{className:"container mx-auto px-6 py-4"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-blue-500 shadow-lg bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center"},a.createElement("span",{className:"text-white font-bold text-xl"},"L")),a.createElement("div",null,a.createElement("h1",{className:"text-xl font-bold text-white"},"LTSU Premium"),a.createElement("p",{className:"text-gray-400 text-sm"},"Learning Management System"))),a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("div",{className:"text-right"},a.createElement("p",{className:"text-white font-semibold"},o||n.displayName||"Premium User"),a.createElement("p",{className:"text-gray-400 text-sm"},n.email)),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("button",{className:"p-2 text-gray-400 hover:text-white transition-colors"},a.createElement("span",{className:"text-xl"},"")),a.createElement("button",{onClick:u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm"},"Logout")))))),a.createElement("div",{className:"flex"},a.createElement("div",{className:"w-80 bg-gray-800 min-h-screen border-r border-gray-700"},a.createElement("nav",{className:"p-4"},a.createElement("ul",{className:"space-y-2"},d.map(S=>a.createElement("li",{key:S.id},a.createElement("button",{onClick:()=>i(S.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${s===S.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`},a.createElement("span",{className:"text-xl"},S.icon),a.createElement("span",{className:"text-sm font-medium"},S.label))))))),a.createElement("div",{className:"flex-1 p-6"},R())))};function L3({user:t}){const[e,n]=V.useState(!1),[r,s]=V.useState([{text:` Welcome to LTSU Student Portal! I'm your AI Assistant, powered by advanced technology to help you excel in your academic journey. I can assist with:

 Academic tracking (attendance, grades, timetable)
 Course recommendations & learning resources
 Profile management & account settings
 Events, hackathons & competitions
 Technical support & general guidance

What would you like to explore today?`,sender:"bot"}]),[i,o]=V.useState(""),[c,u]=V.useState(!1),[d,h]=V.useState([]),[g,p]=V.useState(!1),[b,k]=V.useState(null),A=V.useRef(null),D="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",I="https://openrouter.ai/api/v1/chat/completions",w=()=>{var v;(v=A.current)==null||v.scrollIntoView({behavior:"smooth"})};V.useEffect(()=>{w()},[r]),V.useEffect(()=>{t!=null&&t.uid&&L()},[t]);const T=async()=>{if(!(t!=null&&t.uid))return null;try{return(await bt(Z(X,"chatSessions"),{userId:t.uid,createdAt:new Date,title:`Chat ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`})).id}catch(v){return console.error("Error creating chat session:",v),null}},L=async()=>{if(t!=null&&t.uid)try{const v=ie(Z(X,"chatSessions"),Oe("userId","==",t.uid),Ae("createdAt","desc"),limit(10)),S=(await me(v)).docs.map(ae=>({id:ae.id,...ae.data()}));h(S)}catch(v){console.error("Error loading chat history:",v)}},U=async(v,R)=>{if(!(!b||!(t!=null&&t.uid)))try{await bt(Z(X,"chatMessages"),{sessionId:b,message:v,sender:R,timestamp:new Date,userId:t.uid})}catch(S){console.error("Error saving message:",S)}},O=async v=>{try{const R=ie(Z(X,"chatMessages"),Oe("sessionId","==",v),Oe("userId","==",t.uid),Ae("timestamp","asc")),ae=(await me(R)).docs.map(ee=>({text:ee.data().message,sender:ee.data().sender,timestamp:ee.data().timestamp}));ae.length>0?(s(ae),k(v)):(s([{text:" Welcome back to LTSU Student Portal! I'm your AI Assistant. What would you like to explore today?",sender:"bot"}]),k(v)),p(!1)}catch(R){console.error("Error loading session messages:",R)}},_=()=>{s([{text:` Welcome to LTSU Student Portal! I'm your AI Assistant, powered by advanced technology to help you excel in your academic journey. I can assist with:

 Academic tracking (attendance, grades, timetable)
 Course recommendations & learning resources
 Profile management & account settings
 Events, hackathons & competitions
 Technical support & general guidance

What would you like to explore today?`,sender:"bot"}])},y=async()=>{const v=await T();v&&(k(v),s([{text:` Welcome to LTSU Student Portal! I'm your AI Assistant, powered by advanced technology to help you excel in your academic journey. I can assist with:

 Academic tracking (attendance, grades, timetable)
 Course recommendations & learning resources
 Profile management & account settings
 Events, hackathons & competitions
 Technical support & general guidance

What would you like to explore today?`,sender:"bot"}]),p(!1),L())},E=async v=>{var ae,ee;if(v.preventDefault(),!i.trim())return;let R=b;R||(R=await T(),k(R));const S={text:i,sender:"user"};s(H=>[...H,S]),await U(i,"user"),o(""),u(!0);try{const H=await fetch(I,{method:"POST",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"LTSU Student Portal AI Assistant"},body:JSON.stringify({model:"openai/gpt-3.5-turbo",messages:[{role:"system",content:`You are an advanced AI assistant for LTSU (Learn Teach Share Unite) Student Portal. You are helpful, professional, and knowledgeable about all aspects of the student portal.

Key information about LTSU:
- Created by students Vairagade Pavan Kalyan (AI & ML) and Satish (Data Science)
- Mission: "Learning is not just about acquiring knowledge, but about transforming lives"
- Comprehensive student portal with academic tracking, courses, events, and community features

Portal Features:
- Academic Services: Attendance (92%), Timetable, Grades (GPA: 8.5), Advisor contact
- Courses: Python Full Course, Full Stack Development, DSA Crash Course
- Events: Tech talks, hackathons (Devpost, Devnovate, SIH), cultural events
- Profile Management: Avatar upload, account settings
- Admin Dashboard: For admin users with analytics and user management
- Community: Forums, study groups, mentorship programs

Premium Features (Upgrade Available):
- Advanced AI Tutoring Sessions
- Premium Course Library (React, Node.js, Machine Learning, Cloud Computing)
- 1-on-1 Mentorship with Industry Experts
- Resume Review & Career Counseling
- Internship/Job Placement Assistance
- Advanced Analytics Dashboard
- Priority Support & Help
- Exclusive Webinars & Workshops
- Certification Programs
- Downloadable Resources & Templates

Current User Context:
- User is logged in as: ${(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"Student"}
- Current date/time: ${new Date().toLocaleString()}

Guidelines:
- Be extremely helpful and provide detailed, accurate information
- Use emojis appropriately to make responses engaging
- If asked about specific data, provide realistic examples
- Always maintain a professional yet friendly tone
- If you don't know something specific, admit it and offer alternatives
- Encourage academic excellence and portal engagement

Respond naturally and comprehensively to user queries.`},{role:"user",content:i}],max_tokens:1e3,temperature:.7})});if(!H.ok)throw new Error(`API request failed: ${H.status}`);const C=((ee=(ae=(await H.json()).choices[0])==null?void 0:ae.message)==null?void 0:ee.content)||"I apologize, but I encountered an error processing your request. Please try again.",P={text:C,sender:"bot"};s(B=>[...B,P]),await U(C,"bot")}catch(H){console.error("Error calling OpenAI API:",H);const ve=N(i.toLowerCase()),C={text:ve,sender:"bot"};s(P=>[...P,C]),await U(ve,"bot")}u(!1)},N=v=>{if(v.includes("attendance")||v.includes("attend"))return" You can check your attendance in the Student Services section. Your current attendance is 92%! Regular attendance is crucial for academic success. Need help with attendance tracking?";if(v.includes("timetable")||v.includes("schedule")||v.includes("class"))return" View your timetable in the Student Services section. It includes all your class schedules, timings, and room numbers. Stay organized and never miss a class!";if(v.includes("grades")||v.includes("marks")||v.includes("gpa")||v.includes("result"))return" Your current GPA is 8.5. Check the Student Services section for detailed grade reports, semester-wise breakdown, and performance analytics. Keep up the excellent work!";if(v.includes("courses")||v.includes("python")||v.includes("dsa")||v.includes("fullstack")||v.includes("full stack"))return` Explore our comprehensive courses in the Courses section! We offer:
 Python Full Course (beginner to advanced)
 Full Stack Development (MERN stack)
 DSA Crash Course (interview preparation)
All courses include hands-on projects and certification!`;if(v.includes("profile")||v.includes("account")||v.includes("avatar"))return" You can update your profile information in the Profile section. Upload your avatar, update personal details, and manage your account settings. A complete profile helps you get the most out of the portal!";if(v.includes("events")||v.includes("hackathon")||v.includes("competition"))return` Check out upcoming events and hackathons in the Events section! We have:
 Tech Talks & Workshops
 Coding Competitions
 Cultural Events
 Hackathons on Devpost, Devnovate, SIH
Great opportunities to learn, network, and showcase your skills!`;if(v.includes("help")||v.includes("support")||v.includes("assist"))return` I'm your LTSU Assistant! I can help with:
 Academic queries (attendance, grades, timetable)
 Course information and recommendations
 Profile and account management
 Events and hackathons
 Portal navigation
 General student support
What would you like to know?`;if(v.includes("hello")||v.includes("hi")||v.includes("hey")||v.includes("good morning")||v.includes("good afternoon"))return" Hello! Welcome to LTSU Student Portal - your gateway to academic excellence! I'm your AI assistant, ready to help you navigate through courses, track your progress, and make the most of your student journey. How can I assist you today?";if(v.includes("bye")||v.includes("goodbye")||v.includes("see you")||v.includes("thank you"))return" You're welcome! Have a fantastic day at LTSU. Remember, I'm always here if you need help with anything - just click the chat button anytime. Keep learning and growing! ";if(v.includes("developer")||v.includes("creator")||v.includes("built")||v.includes("made"))return` LTSU Student Portal was created by talented 3rd-year students:
 Vairagade Pavan Kalyan (AI & ML enthusiast)
 Satish (Data Science expert)

Their vision: 'Learning is not just about acquiring knowledge, but about transforming lives. Together, we create opportunities for growth, innovation, and success.'

Proud to be built by students, for students! `;if(v.includes("about")||v.includes("ltsu")||v.includes("portal"))return` LTSU Student Portal is your comprehensive digital companion for academic excellence! We provide:
 Seamless access to academic resources
 Interactive learning platforms
 Student community features
 Career development tools
 Real-time notifications and updates

Founded by students, driven by innovation! `;if(v.includes("contact")||v.includes("advisor")||v.includes("teacher")||v.includes("professor"))return` Need to contact your advisor? Use the 'Contact Advisor' button in Student Services. For technical support, email: info.studentportalofficial@gmail.com

Your academic advisor is here to guide you through your educational journey!`;if(v.includes("deadline")||v.includes("due")||v.includes("assignment")||v.includes("project"))return` Check upcoming deadlines in the dashboard! We track:
 Assignment submissions
 Project deadlines
 Exam dates
 Course registrations

Stay on top of your academic calendar and never miss important dates!`;if(v.includes("announcement")||v.includes("news")||v.includes("update"))return` Stay updated with the latest announcements on your dashboard! We share:
 Academic notifications
 Event updates
 Important deadlines
 Policy changes
 Campus news

Knowledge is power - stay informed! `;if(v.includes("syllabus")||v.includes("curriculum")||v.includes("subjects"))return` Access your syllabus in the dedicated Syllabus section. It includes:
 Course objectives
 Topic-wise breakdown
 Assessment criteria
 Learning outcomes

Your roadmap to academic success! `;if(v.includes("year")||v.includes("semester")||v.includes("progress"))return` Track your academic journey year by year! Explore different years to see:
 Semester-wise subjects
 Specialization options
 Career pathways
 Skill development tracks

Your educational adventure awaits! `;if(v.includes("admin")||v.includes("administrator")||v.includes("dashboard"))return` Admin Dashboard (available for admin users):
 User Management
 Analytics & Insights
 Grade Management
 Attendance Monitoring
 System Administration

Powerful tools for managing the portal ecosystem! `;if(v.includes("career")||v.includes("job")||v.includes("placement")||v.includes("internship"))return` Career Development at LTSU:
 Industry connections
 Internship opportunities
 Placement assistance
 Skill enhancement programs
 Networking events

Your future starts here! `;if(v.includes("community")||v.includes("social")||v.includes("network"))return` Join the LTSU Community:
 Student forums
 Study groups
 Mentorship programs
 Collaborative projects
 Peer learning

Together we grow stronger! `;if(v.includes("resources")||v.includes("material")||v.includes("study"))return` Access comprehensive study resources:
 Course materials
 Reference guides
 Practice questions
 Video tutorials
 Interactive exercises

Everything you need to excel! `;if(v.includes("feedback")||v.includes("suggestion")||v.includes("improve"))return` Your feedback matters! Help us improve by:
 Sharing your suggestions
 Reporting issues
 Requesting new features
 Rating your experience

Contact: info.studentportalofficial@gmail.com

Together, we make LTSU better! `;if(v.includes("technical")||v.includes("bug")||v.includes("issue")||v.includes("problem"))return` Technical Support:
 Report bugs or issues
 Request feature enhancements
 Get help with portal navigation
 Troubleshoot login problems

Email us at: info.studentportalofficial@gmail.com

We're here to ensure smooth sailing! `;if(v.includes("premium")||v.includes("upgrade")||v.includes("paid")||v.includes("pro")||v.includes("subscription"))return` **Unlock Premium Features!**

Elevate your learning experience with LTSU Premium:

 **Advanced AI Tutoring**
 Personalized 1-on-1 AI tutoring sessions
 Code review and debugging assistance
 Project guidance and mentorship

 **Premium Course Library**
 React & Advanced JavaScript
 Node.js & Backend Development
 Machine Learning & AI
 Cloud Computing (AWS/Azure)
 DevOps & CI/CD

 **Career Services**
 Resume review by industry experts
 Mock interviews & preparation
 Internship/job placement assistance
 LinkedIn profile optimization

 **Advanced Analytics**
 Detailed performance insights
 Learning progress tracking
 Personalized study recommendations

 **Exclusive Benefits**
 Priority customer support
 Early access to new features
 Exclusive webinars & workshops
 Certification programs
 Downloadable resources & templates

 **Pricing:** 499/month or 4,999/year (Save 30%)

Ready to upgrade? Visit your Profile  Premium Upgrade!

Transform your academic journey today! `;if(v.includes("pricing")||v.includes("cost")||v.includes("price")||v.includes("fee")||v.includes("money"))return` **LTSU Premium Pricing Plans**

 **Monthly Plan:** 499/month
 Full access to all premium features
 Cancel anytime
 No long-term commitment

 **Annual Plan:** 4,999/year
 Save 30% compared to monthly
 Best value for serious learners
 Priority support included

 **Special Offers:**
 Student Discount: Additional 20% off
 Group Plans: Contact for team pricing
 Referral Program: Get 1 month free for each referral

 **Payment Methods:**
 Credit/Debit Cards
 UPI (Google Pay, PhonePe, Paytm)
 Net Banking
 EMI options available

 **Money-Back Guarantee:**
 30-day refund policy
 No questions asked

Ready to upgrade? Visit Profile  Premium Upgrade! `;if(v.includes("react")||v.includes("node")||v.includes("ml")||v.includes("machine learning")||v.includes("cloud")||v.includes("aws")||v.includes("azure"))return` **Premium Course Preview!**

These advanced courses are available exclusively for Premium members:

 **React & Advanced JavaScript**
 Modern React with Hooks & Context
 Advanced JavaScript (ES6+, Async/Await)
 Redux & State Management
 React Native for mobile apps

 **Node.js & Backend Development**
 RESTful APIs & GraphQL
 Database integration (MongoDB, PostgreSQL)
 Authentication & Security
 Microservices architecture

 **Machine Learning & AI**
 Python for Data Science
 TensorFlow & PyTorch
 Computer Vision & NLP
 Real-world ML projects

 **Cloud Computing**
 AWS/Azure/GCP fundamentals
 Serverless architecture
 Docker & Kubernetes
 Cloud security & DevOps

 **Why Premium?**
 Industry-relevant curriculum
 Hands-on projects & certifications
 Expert mentorship
 Job-ready skills

Upgrade to Premium today and unlock these courses! `;if(v.includes("mentorship")||v.includes("mentor")||v.includes("career")||v.includes("job")||v.includes("placement")||v.includes("interview"))return` **Premium Career Services**

Take your career to the next level with expert guidance:

 **1-on-1 Mentorship**
 Industry experts from top companies
 Personalized career guidance
 Technical skill development
 Project portfolio review

 **Resume & Profile Services**
 Professional resume review
 LinkedIn profile optimization
 GitHub portfolio enhancement
 Cover letter assistance

 **Interview Preparation**
 Mock technical interviews
 Behavioral interview coaching
 Company-specific preparation
 Feedback & improvement tips

 **Placement Assistance**
 Internship opportunities
 Job referrals from partner companies
 Career counseling sessions
 Salary negotiation guidance

 **Success Stories**
 85% of premium members got internships
 Average salary increase: 40%
 95% satisfaction rate

Your dream job is just an upgrade away! `;const R=[" I'm here to help! Try asking about attendance, grades, courses, events, or any other portal features. I'm constantly learning to better assist you!"," I can help with academic queries, course information, profile management, events, and much more. What specific information are you looking for?",` Let me assist you better! Ask me about:
 Your academic progress
 Course recommendations
 Portal features
 Events and hackathons
 Profile settings
What interests you most?`," I'm your LTSU guide! Whether it's attendance tracking, course exploration, or staying updated with events, I'm here to help. What's on your mind?"];return R[Math.floor(Math.random()*R.length)]};return a.createElement(a.Fragment,null,a.createElement("div",{className:"fixed bottom-6 right-6 z-50"},a.createElement("button",{onClick:()=>n(!e),className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full shadow-2xl hover:shadow-3xl transform hover:scale-110 transition-all duration-300 flex items-center justify-center group"},a.createElement("img",{src:"/assets/images/chatbot.png",alt:"Chatbot",className:"w-7 h-7 rounded-full object-cover"}),!e&&a.createElement("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"}))),e&&a.createElement("div",{className:"fixed bottom-20 right-6 w-80 h-96 bg-white/95 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/30 z-50 flex flex-col animate-fade-in"},a.createElement("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 rounded-t-2xl flex items-center gap-3"},a.createElement("img",{src:"/assets/images/chatbot.png",alt:"Chatbot",className:"w-8 h-8 rounded-full object-cover"}),a.createElement("div",{className:"flex-1"},a.createElement("h3",{className:"font-bold text-sm"},"LTSU AI Assistant"),a.createElement("p",{className:"text-xs opacity-90"})),a.createElement("div",{className:"flex gap-2"},a.createElement("button",{onClick:()=>p(!g),className:"text-white/80 hover:text-white transition-colors p-1",title:"Chat History"},""),a.createElement("button",{onClick:_,className:"text-white/80 hover:text-white transition-colors p-1",title:"Clear Chat"},""),a.createElement("button",{onClick:y,className:"text-white/80 hover:text-white transition-colors p-1",title:"New Chat"},""),a.createElement("button",{onClick:()=>n(!1),className:"text-white/80 hover:text-white transition-colors p-1"},""))),g&&a.createElement("div",{className:"absolute top-full left-0 right-0 bg-white/95 backdrop-blur-2xl border-t border-gray-200 max-h-48 overflow-y-auto z-10"},a.createElement("div",{className:"p-3"},a.createElement("h4",{className:"font-semibold text-sm text-gray-800 mb-2"},"Chat History"),d.length>0?a.createElement("div",{className:"space-y-2"},d.map(v=>a.createElement("button",{key:v.id,onClick:()=>O(v.id),className:"w-full text-left p-2 rounded-lg hover:bg-gray-100 transition-colors text-sm"},a.createElement("div",{className:"font-medium text-gray-800"},v.title),a.createElement("div",{className:"text-xs text-gray-500"},new Date(v.createdAt.seconds*1e3).toLocaleDateString())))):a.createElement("p",{className:"text-sm text-gray-500"},"No chat history yet"))),a.createElement("div",{className:`flex-1 p-4 overflow-y-auto space-y-3 ${g?"pb-52":""}`},r.map((v,R)=>a.createElement("div",{key:R,className:`flex ${v.sender==="user"?"justify-end":"justify-start"}`},a.createElement("div",{className:`max-w-xs px-3 py-2 rounded-lg text-sm whitespace-pre-line ${v.sender==="user"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-br-none shadow-lg":"bg-white/80 text-gray-800 rounded-bl-none border border-gray-200 shadow-sm"}`},v.text,v.timestamp&&a.createElement("div",{className:`text-xs mt-1 opacity-70 ${v.sender==="user"?"text-blue-100":"text-gray-500"}`},new Date(v.timestamp.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))))),c&&a.createElement("div",{className:"flex justify-start"},a.createElement("div",{className:"bg-white/80 text-gray-800 px-3 py-2 rounded-lg rounded-bl-none text-sm border border-gray-200 shadow-sm"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"flex space-x-1"},a.createElement("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),a.createElement("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.createElement("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})),a.createElement("span",{className:"text-xs text-gray-500"},"AI is thinking...")))),a.createElement("div",{ref:A})),a.createElement("form",{onSubmit:E,className:"p-4 border-t border-gray-200 bg-gray-50/50"},a.createElement("div",{className:"flex gap-2"},a.createElement("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"Ask me anything about LTSU...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white/80 backdrop-blur-sm",disabled:c}),a.createElement("button",{type:"submit",disabled:c||!i.trim(),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"},"")),a.createElement("div",{className:"mt-2 text-xs text-gray-500 text-center"}," Try asking about attendance, courses, events, or portal features"))))}function O3(){const[t,e]=a.useState(null);return a.useEffect(()=>{const n=sf(zt,r=>e(r));return()=>n()},[]),a.createElement("div",{className:"relative"},a.createElement(vT,null,a.createElement(qe,{path:"/login",element:a.createElement(r3,null)}),a.createElement(qe,{path:"/signup",element:a.createElement(s3,null)}),a.createElement(qe,{path:"/profile",element:t?a.createElement(l3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/admin",element:t?a.createElement(y3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/admin/analytics",element:t?a.createElement(v3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/admin/grades",element:t?a.createElement(E3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/admin/attendance",element:t?a.createElement(b3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/admin/users",element:t?a.createElement(x3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/year/:id",element:t?a.createElement(d3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/syllabus",element:t?a.createElement(f3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/timetable",element:t?a.createElement(_3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/python-courses",element:t?a.createElement(S3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/fullstack-courses",element:t?a.createElement(T3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/dsa-courses",element:t?a.createElement(A3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/premium-courses",element:t?a.createElement(C3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/premium-benefits",element:t?a.createElement(P3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/payment",element:t?a.createElement(R3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/lms-portal",element:t?a.createElement(D3,{user:t}):a.createElement(tt,{to:"/login"})}),a.createElement(qe,{path:"/",element:t?a.createElement(i3,{user:t}):a.createElement(tt,{to:"/login"})})),t&&a.createElement(L3,{user:t}))}lb(document.getElementById("root")).render(a.createElement(a.StrictMode,null,a.createElement(IT,null,a.createElement(O3,null))));
